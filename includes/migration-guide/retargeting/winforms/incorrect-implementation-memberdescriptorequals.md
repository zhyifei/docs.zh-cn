### <a name="incorrect-implementation-of-memberdescriptorequals"></a><span data-ttu-id="d1560-101">MemberDescriptor.Equals 实现不正确</span><span class="sxs-lookup"><span data-stu-id="d1560-101">Incorrect implementation of MemberDescriptor.Equals</span></span>

|   |   |
|---|---|
|<span data-ttu-id="d1560-102">详细信息</span><span class="sxs-lookup"><span data-stu-id="d1560-102">Details</span></span>|<span data-ttu-id="d1560-103">“Equals”方法的原始实现是通过比较类别名称和描述字符串来比较对象的两个不同字符串属性。</span><span class="sxs-lookup"><span data-stu-id="d1560-103">Original implementation of &quot;Equals&quot; method was comparing two different string properties from the objects under comparison: category name to description string.</span></span> <span data-ttu-id="d1560-104">解决方法是将第一个对象和第二个对象的“类别”进行比较，然后再比较“描述”。</span><span class="sxs-lookup"><span data-stu-id="d1560-104">The fix is to compare &quot;category&quot; of first object to &quot;category&quot; of the second one and &quot;description&quot; to &quot;description&quot;.</span></span> <span data-ttu-id="d1560-105">如果面向 4.6.2，则可以将 MemberDescriptorEqualsReturnsFalseIfEquivalent 配置值设为 true 以选择弃用新行为；如果面向低于 4.6.2 的框架版本，则设为 false 启用此修复。</span><span class="sxs-lookup"><span data-stu-id="d1560-105">MemberDescriptorEqualsReturnsFalseIfEquivalent configuration value can be set to true to opt out of the new behavior if targeting 4.6.2 or to false to enable this fix when targeting framework version is below 4.6.2.</span></span>|
|<span data-ttu-id="d1560-106">建议</span><span class="sxs-lookup"><span data-stu-id="d1560-106">Suggestion</span></span>|<span data-ttu-id="d1560-107">描述符相等时如果应用程序依赖于有时返回 false 的 MemberDescriptor.Equals 并且面向 .NET Framework 4.6.2 版，那么你可以采用以下几个选项：</span><span class="sxs-lookup"><span data-stu-id="d1560-107">If your application depends on MemberDescriptor.Equals sometimes returning false when descriptors are equivalent, and you are targeting 4.6.2 version of the .NET Framework, you have several options:</span></span><ol><li><span data-ttu-id="d1560-108">除运行 Equals 方法外，更改代码以手动比较“类别”和“描述”字段。</span><span class="sxs-lookup"><span data-stu-id="d1560-108">Make code changes to compare &quot;category&quot; and &quot;description&quot; fields manually in addition to running Equals method.</span></span></li><li><span data-ttu-id="d1560-109">将以下值添加到 app.config 文件从而选择弃用此更改：</span><span class="sxs-lookup"><span data-stu-id="d1560-109">Opt out from this change by adding the following value to the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.MemberDescriptorEqualsReturnsFalseIfEquivalent=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="d1560-110">如果应用程序面向 4.6.1 或更低版本的 .NET Framework 并且想要启用此更改，可以通过将以下值添加到 app.config 文件，将兼容性开关设为 false：</span><span class="sxs-lookup"><span data-stu-id="d1560-110">If your application targets 4.6.1 or lower version of the .NET Framework, and you want this change enabled, you can set the compatibility switch to false by adding the following value to the app.config file:</span></span><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.MemberDescriptorEqualsReturnsFalseIfEquivalent=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="d1560-111">范围</span><span class="sxs-lookup"><span data-stu-id="d1560-111">Scope</span></span>|<span data-ttu-id="d1560-112">边缘</span><span class="sxs-lookup"><span data-stu-id="d1560-112">Edge</span></span>|
|<span data-ttu-id="d1560-113">版本</span><span class="sxs-lookup"><span data-stu-id="d1560-113">Version</span></span>|<span data-ttu-id="d1560-114">4.6.2</span><span class="sxs-lookup"><span data-stu-id="d1560-114">4.6.2</span></span>|
|<span data-ttu-id="d1560-115">类型</span><span class="sxs-lookup"><span data-stu-id="d1560-115">Type</span></span>|<span data-ttu-id="d1560-116">重定目标</span><span class="sxs-lookup"><span data-stu-id="d1560-116">Retargeting</span></span>|
|<span data-ttu-id="d1560-117">受影响的 API</span><span class="sxs-lookup"><span data-stu-id="d1560-117">Affected APIs</span></span>|<ul><li><xref:System.ComponentModel.MemberDescriptor.Equals(System.Object)?displayProperty=nameWithType></li></ul>|

