---
title: Windows 窗体中的自动缩放
ms.date: 06/15/2017
helpviewer_keywords:
- scalability [Windows Forms], automatic in Windows Forms
- Windows Forms, automatic scaling
ms.assetid: 68fad25b-afbc-44bd-8e1b-966fc43507a4
ms.openlocfilehash: d3981be7977b56af0b60f9796519b78dc9ac5db3
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/04/2018
ms.locfileid: "43505761"
---
# <a name="automatic-scaling-in-windows-forms"></a><span data-ttu-id="99a0e-102">Windows 窗体中的自动缩放</span><span class="sxs-lookup"><span data-stu-id="99a0e-102">Automatic scaling in Windows Forms</span></span>

<span data-ttu-id="99a0e-103">借助自动缩放功能，在某台计算机上以某种显示分辨率或系统字体设计的窗体及其控件可以在其他计算机上以不同的显示分辨率或系统字体适当显示。</span><span class="sxs-lookup"><span data-stu-id="99a0e-103">Automatic scaling enables a form and its controls, designed on one machine with a certain display resolution or system font, to be displayed appropriately on another machine with a different display resolution or system font.</span></span> <span data-ttu-id="99a0e-104">它确保窗体及其控件将以智能方式调整大小，以便与本机 Windows 以及用户和其他开发人员的计算机上的其他应用程序保持一致。</span><span class="sxs-lookup"><span data-stu-id="99a0e-104">It assures that the form and its controls will intelligently resize to be consistent with native windows and other applications on both the users' and other developers' machines.</span></span> <span data-ttu-id="99a0e-105">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 支持自动缩放和视觉样式，这使 [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 应用程序可以在与每个用户的计算机上的本机 Windows 应用程序比较时保持一致的外观和感觉。</span><span class="sxs-lookup"><span data-stu-id="99a0e-105">The support of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] for automatic scaling and visual styles enables [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] applications to maintain a consistent look and feel when compared to native Windows applications on each user's machine.</span></span>

<span data-ttu-id="99a0e-106">大多数情况下，自动缩放可在 [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 2.0 及更高版本中按预期方式工作。</span><span class="sxs-lookup"><span data-stu-id="99a0e-106">For the most part, automatic scaling works as expected in [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0 and later.</span></span> <span data-ttu-id="99a0e-107">但是，字体方案更改可能会产生问题。</span><span class="sxs-lookup"><span data-stu-id="99a0e-107">However, font scheme changes can be problematic.</span></span> <span data-ttu-id="99a0e-108">有关如何解决此问题的示例，请参阅[如何： 响应 Windows 窗体应用程序中的字体方案更改](how-to-respond-to-font-scheme-changes-in-a-windows-forms-application.md)。</span><span class="sxs-lookup"><span data-stu-id="99a0e-108">For an example of how to resolve this, see [How to: Respond to Font Scheme Changes in a Windows Forms Application](how-to-respond-to-font-scheme-changes-in-a-windows-forms-application.md).</span></span>

## <a name="need-for-automatic-scaling"></a><span data-ttu-id="99a0e-109">自动缩放的必要性</span><span class="sxs-lookup"><span data-stu-id="99a0e-109">Need for automatic scaling</span></span>

<span data-ttu-id="99a0e-110">若不进行自动缩放，在分辨率或字体更改时，为某个显示分辨率或字体设计的应用程序将显示太大或太小。</span><span class="sxs-lookup"><span data-stu-id="99a0e-110">Without automatic scaling, an application designed for one display resolution or font will either appear too small or too large when that resolution or font is changed.</span></span> <span data-ttu-id="99a0e-111">例如，如果应用程序是使用 Tahoma 9 point 作为基准而设计的，则在系统字体为 Tahoma 12 point 的计算机上运行时，若不进行调整它将显示太小。</span><span class="sxs-lookup"><span data-stu-id="99a0e-111">For example, if the application is designed using Tahoma 9 point as a baseline, without adjustment it will appear too small if run on a machine where the system font is Tahoma 12 point.</span></span> <span data-ttu-id="99a0e-112">与其他应用程序相比，呈现的文本元素（如标题、菜单、文本框内容等）要小一些。</span><span class="sxs-lookup"><span data-stu-id="99a0e-112">Text elements, such as titles, menus, text box contents, and so on will render smaller than other applications.</span></span> <span data-ttu-id="99a0e-113">此外，包含文本的用户界面 (UI) 元素（如标题栏、菜单和很多控件）的大小均取决于所使用的字体。</span><span class="sxs-lookup"><span data-stu-id="99a0e-113">Furthermore, the size of user interface (UI) elements that contain text, such as the title bar, menus, and many controls are dependent on the font used.</span></span> <span data-ttu-id="99a0e-114">在此示例中，这些元素的显示也相对小一些。</span><span class="sxs-lookup"><span data-stu-id="99a0e-114">In this example, these elements will also appear relatively smaller.</span></span>

<span data-ttu-id="99a0e-115">如果应用程序是针对某种显示分辨率设计的，会发生类似情况。</span><span class="sxs-lookup"><span data-stu-id="99a0e-115">An analogous situation occurs when an application is designed for a certain display resolution.</span></span> <span data-ttu-id="99a0e-116">最常见的显示分辨率为 96 点 / 英寸 (DPI) 等于 100%显示缩放，但更高分辨率显示支持 125%、 150%、 200%(哪个分别等于 120、 144 和 192 DPI) 和更高版本也越来越常见。</span><span class="sxs-lookup"><span data-stu-id="99a0e-116">The most common display resolution is 96 dots per inch (DPI), which equals 100% display scaling, but higher resolution displays supporting 125%, 150%, 200% (which respectively equal 120, 144 and 192 DPI) and above are becoming more common.</span></span> <span data-ttu-id="99a0e-117">如果不进行调整，针对某个分辨率设计的应用程序（特别是基于图形的应用程序）在其他分辨率上运行时就会显示太大或太小。</span><span class="sxs-lookup"><span data-stu-id="99a0e-117">Without adjustment, an application, especially a graphics-based one, designed for one resolution will appear either too large or too small when run at another resolution.</span></span>

<span data-ttu-id="99a0e-118">自动缩放寻求解决这些问题，方法是更具相对字体大小或显示分辨率自动调整窗体及其子控件的大小。</span><span class="sxs-lookup"><span data-stu-id="99a0e-118">Automatic scaling seeks to ameliorate these problems by automatically resizing the form and its child controls according to the relative font size or display resolution.</span></span> <span data-ttu-id="99a0e-119">Windows 操作系统支持使用一种名为对话框单位的相对度量单位的自动缩放对话框。</span><span class="sxs-lookup"><span data-stu-id="99a0e-119">The Windows operating system supports automatic scaling of dialog boxes using a relative unit of measurement called dialog units.</span></span> <span data-ttu-id="99a0e-120">对话框单位基于系统字体，并且它与像素的关系可由 Win32 SDK 函数 `GetDialogBaseUnits` 确定。</span><span class="sxs-lookup"><span data-stu-id="99a0e-120">A dialog unit is based on the system font and its relationship to pixels can be determined though the Win32 SDK function `GetDialogBaseUnits`.</span></span> <span data-ttu-id="99a0e-121">当用户更改 Windows 使用的主题时，所有对话框均自动进行相应调整。</span><span class="sxs-lookup"><span data-stu-id="99a0e-121">When a user changes the theme used by Windows, all dialog boxes are automatically adjusted accordingly.</span></span> <span data-ttu-id="99a0e-122">此外，[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]支持自动缩放，根据默认系统字体或显示分辨率。</span><span class="sxs-lookup"><span data-stu-id="99a0e-122">In addition, the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] supports automatic scaling either according to the default system font or the display resolution.</span></span> <span data-ttu-id="99a0e-123">或者，可在应用程序中禁用自动缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-123">Optionally, automatic scaling can be disabled in an application.</span></span>

## <a name="original-support-for-automatic-scaling"></a><span data-ttu-id="99a0e-124">自动缩放的原始支持</span><span class="sxs-lookup"><span data-stu-id="99a0e-124">Original support for automatic scaling</span></span>

<span data-ttu-id="99a0e-125">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 的版本 1.0 和 1.1 以依赖于 UI 使用的 Windows 默认字体（由 Win32 SDK 值 **DEFAULT_GUI_FONT** 表示）的直接方式支持自动缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-125">Versions 1.0 and 1.1 of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] supported automatic scaling in a straightforward manner that was dependent on the Windows default font used for the UI, represented by the Win32 SDK value **DEFAULT_GUI_FONT**.</span></span> <span data-ttu-id="99a0e-126">通常，此字体只在显示分辨率更改时才更改。</span><span class="sxs-lookup"><span data-stu-id="99a0e-126">This font is typically only changed when the display resolution changes.</span></span> <span data-ttu-id="99a0e-127">已使用以下机制来实现自动缩放：</span><span class="sxs-lookup"><span data-stu-id="99a0e-127">The following mechanism was used to implement automatic scaling:</span></span>

1. <span data-ttu-id="99a0e-128">在设计时，将 <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> 属性（现已弃用）设置为开发人员计算机上默认系统字体的高度和宽度。</span><span class="sxs-lookup"><span data-stu-id="99a0e-128">At design time, the <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> property (which is now deprecated) was set to the height and width of the default system font on the developer's machine.</span></span>

2. <span data-ttu-id="99a0e-129">在运行时，用户计算机的默认系统字体用于初始化 <xref:System.Windows.Forms.Form> 类的 <xref:System.Windows.Forms.Control.Font%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="99a0e-129">At runtime, the default system font of the user's machine was used to initialize the <xref:System.Windows.Forms.Control.Font%2A> property of the <xref:System.Windows.Forms.Form> class.</span></span>

3. <span data-ttu-id="99a0e-130">在显示窗体前，调用 <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> 方法以缩放窗体。</span><span class="sxs-lookup"><span data-stu-id="99a0e-130">Before displaying the form, the <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> method was called to scale the form.</span></span> <span data-ttu-id="99a0e-131">此方法计算 <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> 和 <xref:System.Windows.Forms.Control.Font%2A> 的相对缩放大小，然后调用 <xref:System.Windows.Forms.Control.Scale%2A> 方法来实际缩放窗体及其子窗体。</span><span class="sxs-lookup"><span data-stu-id="99a0e-131">This method calculated the relative scale sizes from <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> and <xref:System.Windows.Forms.Control.Font%2A> then called the <xref:System.Windows.Forms.Control.Scale%2A> method to actually scale the form and its children.</span></span>

4. <span data-ttu-id="99a0e-132">更新 <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> 的值，以便对 <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> 的后续调用不会逐渐调整窗体大小。</span><span class="sxs-lookup"><span data-stu-id="99a0e-132">The value of <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> was updated so that subsequent calls to <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> did not progressively resize the form.</span></span>

<span data-ttu-id="99a0e-133">虽然此机制足够实现大多数目的时，但具有以下限制：</span><span class="sxs-lookup"><span data-stu-id="99a0e-133">While this mechanism was sufficient for most purposes, it suffered from the following limitations:</span></span>

- <span data-ttu-id="99a0e-134">由于<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A>属性将基准字体大小表示为整数值，会发生舍入错误，窗体循环使用多个解决方案时变得很明显。</span><span class="sxs-lookup"><span data-stu-id="99a0e-134">Since the <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> property represents the baseline font size as integer values, rounding errors occur that become evident when a form is cycled through multiple resolutions.</span></span>

- <span data-ttu-id="99a0e-135">自动缩放仅在 <xref:System.Windows.Forms.Form> 类中实现，无法在 <xref:System.Windows.Forms.ContainerControl> 类中实现。</span><span class="sxs-lookup"><span data-stu-id="99a0e-135">Automatic scaling was implemented in only the <xref:System.Windows.Forms.Form> class, not in the <xref:System.Windows.Forms.ContainerControl> class.</span></span> <span data-ttu-id="99a0e-136">因此，只有在用户控件的分辨率设计为与窗体的相同且在设计时置于窗体时，用户控件才可正确缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-136">As a result, user controls would scale correctly only when the user control was designed at the same resolution as the form, and it was placed in the form at design time.</span></span>

- <span data-ttu-id="99a0e-137">窗体及其子控件只可由计算机分辨率相同的多名开发人员进行同时设计。</span><span class="sxs-lookup"><span data-stu-id="99a0e-137">Forms and their child controls could only be concurrently designed by multiple developers if their machine resolutions were the same.</span></span> <span data-ttu-id="99a0e-138">同样，如果窗体依赖与父窗体关联的分辨率，也会被继承。</span><span class="sxs-lookup"><span data-stu-id="99a0e-138">Likewise it also made inheritance of a form dependent on the resolution associated with the parent form.</span></span>

- <span data-ttu-id="99a0e-139">与 [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 2.0 版本引入的较新布局管理器（如 <xref:System.Windows.Forms.FlowLayoutPanel> 和 <xref:System.Windows.Forms.TableLayoutPanel>）不兼容。</span><span class="sxs-lookup"><span data-stu-id="99a0e-139">It is not compatible with the newer layout managers introduced with the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0, such as <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel>.</span></span>

- <span data-ttu-id="99a0e-140">它不支持直接基于与 [!INCLUDE[compact](../../../includes/compact-md.md)] 兼容所需的显示分辨率进行缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-140">It did not support scaling based directly on the display resolution that is required for compatibility to the [!INCLUDE[compact](../../../includes/compact-md.md)].</span></span>

<span data-ttu-id="99a0e-141">虽然 [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 2.0 版本为了维护向后兼容保留了此机制，但它已被下述更强大的缩放机制取代。</span><span class="sxs-lookup"><span data-stu-id="99a0e-141">Although this mechanism is preserved in the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0 to maintain backward compatibility, it has been superseded by the more robust scaling mechanism described next.</span></span> <span data-ttu-id="99a0e-142">因此，<xref:System.Windows.Forms.Form.AutoScale%2A><xref:System.Windows.Forms.Form.ApplyAutoScaling%2A>、<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> 和某些 <xref:System.Windows.Forms.Control.Scale%2A> 重载被标记为“已过时”。</span><span class="sxs-lookup"><span data-stu-id="99a0e-142">As a consequence, the <xref:System.Windows.Forms.Form.AutoScale%2A>, <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A>, <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A>, and certain <xref:System.Windows.Forms.Control.Scale%2A> overloads are marked as obsolete.</span></span>

> [!NOTE]
> <span data-ttu-id="99a0e-143">将旧代码升级到 [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 2.0 版时，可放心删除对这些成员的引用。</span><span class="sxs-lookup"><span data-stu-id="99a0e-143">You can safely delete references to these members when you upgrade your legacy code to the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0.</span></span>

## <a name="current-support-for-automatic-scaling"></a><span data-ttu-id="99a0e-144">当前支持的自动缩放</span><span class="sxs-lookup"><span data-stu-id="99a0e-144">Current support for automatic scaling</span></span>

<span data-ttu-id="99a0e-145">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 2.0 版本通过引入以下对 Windows 窗体的自动缩放的更改，克服了上述限制：</span><span class="sxs-lookup"><span data-stu-id="99a0e-145">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0 surmounts previous limitations by introducing the following changes to the automatic scaling of Windows Forms:</span></span>

- <span data-ttu-id="99a0e-146">基本的缩放支持已移至 <xref:System.Windows.Forms.ContainerControl> 类，以便窗体、本机复合控件和用户控件均接收一致的缩放支持。</span><span class="sxs-lookup"><span data-stu-id="99a0e-146">Base support for scaling has been moved to the <xref:System.Windows.Forms.ContainerControl> class so that forms, native composite controls and user controls all receive uniform scaling support.</span></span> <span data-ttu-id="99a0e-147">已添加新成员 <xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A>、<xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>、<xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> 和 <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A>。</span><span class="sxs-lookup"><span data-stu-id="99a0e-147">The new members <xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A>, <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>, <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> and <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> have been added.</span></span>

- <span data-ttu-id="99a0e-148"><xref:System.Windows.Forms.Control> 类还具有使其可参与缩放并支持在同一个窗体上的混合缩放的几个新成员。</span><span class="sxs-lookup"><span data-stu-id="99a0e-148">The <xref:System.Windows.Forms.Control> class also has several new members that allow it to participate in scaling and to support mixed scaling on the same form.</span></span> <span data-ttu-id="99a0e-149">特别是 <xref:System.Windows.Forms.Control.Scale%2A>、<xref:System.Windows.Forms.Control.ScaleChildren%2A> 和 <xref:System.Windows.Forms.Control.GetScaledBounds%2A> 成员支持缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-149">Specifically the <xref:System.Windows.Forms.Control.Scale%2A>, <xref:System.Windows.Forms.Control.ScaleChildren%2A>, and <xref:System.Windows.Forms.Control.GetScaledBounds%2A> members support scaling.</span></span>

- <span data-ttu-id="99a0e-150">已按照 <xref:System.Windows.Forms.AutoScaleMode> 枚举定义添加基于屏幕分辨率的缩放支持以补充系统字体支持。</span><span class="sxs-lookup"><span data-stu-id="99a0e-150">Support for scaling based upon the screen resolution has been added to complement system font support, as defined by the <xref:System.Windows.Forms.AutoScaleMode> enumeration.</span></span> <span data-ttu-id="99a0e-151">此模式与 [!INCLUDE[compact](../../../includes/compact-md.md)] 支持的自动缩放兼容，从而更容易迁移应用程序。</span><span class="sxs-lookup"><span data-stu-id="99a0e-151">This mode is compatible with automatic scaling supported by the [!INCLUDE[compact](../../../includes/compact-md.md)] enabling easier application migration.</span></span>

- <span data-ttu-id="99a0e-152">已向自动缩放实现添加与布局管理器（如 <xref:System.Windows.Forms.FlowLayoutPanel> 和 <xref:System.Windows.Forms.TableLayoutPanel>）的兼容性。</span><span class="sxs-lookup"><span data-stu-id="99a0e-152">Compatibility with layout managers such as <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel> has been added to the implementation of automatic scaling.</span></span>

- <span data-ttu-id="99a0e-153">缩放比例现在表示为浮点值，（通常采用 <xref:System.Drawing.SizeF> 结构），以便几乎消除舍入误差。</span><span class="sxs-lookup"><span data-stu-id="99a0e-153">Scaling factors are now represented as floating point values, typically using the <xref:System.Drawing.SizeF> structure, so that rounding errors have been practically eliminated.</span></span>

> [!CAUTION]
> <span data-ttu-id="99a0e-154">不支持任意混合的 DPI 和字体缩放模式。</span><span class="sxs-lookup"><span data-stu-id="99a0e-154">Arbitrary mixtures of DPI and font scaling modes are not supported.</span></span> <span data-ttu-id="99a0e-155">虽然你可能成功使用某种模式（例如 DPI）缩放用户控件并以另一种模式（字体）将其放在窗体上，但混合使用一种模式下的基窗体和其他模式下的派生窗体时可能导致意外结果。</span><span class="sxs-lookup"><span data-stu-id="99a0e-155">Although you may scale a user control using one mode (for example, DPI) and place it on a form using another mode (Font) with no issues, but mixing a base form in one mode and a derived form in another can lead to unexpected results.</span></span>

### <a name="automatic-scaling-in-action"></a><span data-ttu-id="99a0e-156">操作中的自动缩放</span><span class="sxs-lookup"><span data-stu-id="99a0e-156">Automatic scaling in action</span></span>

<span data-ttu-id="99a0e-157">Windows 窗体现在使用以下逻辑自动缩放窗体及其内容：</span><span class="sxs-lookup"><span data-stu-id="99a0e-157">Windows Forms now uses the following logic to automatically scale forms and their contents:</span></span>

1. <span data-ttu-id="99a0e-158">在设计时，每个 <xref:System.Windows.Forms.ContainerControl> 分别在 <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> 和 <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> 中记录缩放模式及其当前的分辨率。</span><span class="sxs-lookup"><span data-stu-id="99a0e-158">At design time, each <xref:System.Windows.Forms.ContainerControl> records the scaling mode and it current resolution in the <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> and <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>, respectively.</span></span>

2. <span data-ttu-id="99a0e-159">在运行时，实际的分辨率存储在 <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> 属性中。</span><span class="sxs-lookup"><span data-stu-id="99a0e-159">At run time, the actual resolution is stored in the <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> property.</span></span> <span data-ttu-id="99a0e-160"><xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A> 属性动态计算运行时和设计时缩放分辨率之间的比率。</span><span class="sxs-lookup"><span data-stu-id="99a0e-160">The <xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A> property dynamically calculates the ratio between the run-time and design-time scaling resolution.</span></span>

3. <span data-ttu-id="99a0e-161">窗体加载时，如果 <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> 和 <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> 的值不同，则调用 <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> 方法来缩放控件及其子项。</span><span class="sxs-lookup"><span data-stu-id="99a0e-161">When the form loads, if the values of <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> and <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> are different, then the <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> method is called to scale the control and its children.</span></span> <span data-ttu-id="99a0e-162">此方法将挂起布局并调用 <xref:System.Windows.Forms.Control.Scale%2A> 方法来执行实际缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-162">This method suspends layout and calls the <xref:System.Windows.Forms.Control.Scale%2A> method to perform the actual scaling.</span></span> <span data-ttu-id="99a0e-163">随后将更新 <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> 的值以避免渐进式缩放。</span><span class="sxs-lookup"><span data-stu-id="99a0e-163">Afterwards, the value of <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> is updated to avoid progressive scaling.</span></span>

4. <span data-ttu-id="99a0e-164">在以下情况下也可自动调用 <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A>：</span><span class="sxs-lookup"><span data-stu-id="99a0e-164"><xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> is also automatically invoked in the following situations:</span></span>

    - <span data-ttu-id="99a0e-165">如果缩放模式为 <xref:System.Windows.Forms.AutoScaleMode.Font>，则响应 <xref:System.Windows.Forms.Control.OnFontChanged%2A> 事件。</span><span class="sxs-lookup"><span data-stu-id="99a0e-165">In response to the <xref:System.Windows.Forms.Control.OnFontChanged%2A> event if the scaling mode is <xref:System.Windows.Forms.AutoScaleMode.Font>.</span></span>

    - <span data-ttu-id="99a0e-166">当容器控件的布局继续执行并在 <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> 或 <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> 属性中检测到更改时。</span><span class="sxs-lookup"><span data-stu-id="99a0e-166">When the layout of the container control resumes and a change is detected in the <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> or <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> properties.</span></span>

    - <span data-ttu-id="99a0e-167">如上所述，当父 <xref:System.Windows.Forms.ContainerControl> 正在缩放时。</span><span class="sxs-lookup"><span data-stu-id="99a0e-167">As implied above, when a parent <xref:System.Windows.Forms.ContainerControl> is being scaled.</span></span> <span data-ttu-id="99a0e-168">每个容器控件负责使用自己的比例因子（而不是其父容器的比例因子）缩放其子控件。</span><span class="sxs-lookup"><span data-stu-id="99a0e-168">Each container control is responsible for scaling its children using its own scaling factors and not the one from its parent container.</span></span>

5. <span data-ttu-id="99a0e-169">子控件可通过多种方式修改其缩放行为：</span><span class="sxs-lookup"><span data-stu-id="99a0e-169">Child controls can modify their scaling behavior through several means:</span></span>

    - <span data-ttu-id="99a0e-170">可重写 <xref:System.Windows.Forms.Control.ScaleChildren%2A> 属性以确定是否应缩放其子控件。</span><span class="sxs-lookup"><span data-stu-id="99a0e-170">The <xref:System.Windows.Forms.Control.ScaleChildren%2A> property can be overridden to determine if their child controls should be scaled or not.</span></span>

    - <span data-ttu-id="99a0e-171">可重写 <xref:System.Windows.Forms.Control.GetScaledBounds%2A> 方法以调整控件缩放到的边界，但不是调整缩放逻辑。</span><span class="sxs-lookup"><span data-stu-id="99a0e-171">The <xref:System.Windows.Forms.Control.GetScaledBounds%2A> method can be overridden to adjust the bounds that the control is scaled to, but not the scaling logic.</span></span>

    - <span data-ttu-id="99a0e-172">可重写 <xref:System.Windows.Forms.Control.ScaleControl%2A> 方法以更改当前控件的缩放逻辑。</span><span class="sxs-lookup"><span data-stu-id="99a0e-172">The <xref:System.Windows.Forms.Control.ScaleControl%2A> method can be overridden to change the scaling logic for the current control.</span></span>

## <a name="see-also"></a><span data-ttu-id="99a0e-173">请参阅</span><span class="sxs-lookup"><span data-stu-id="99a0e-173">See also</span></span>

- <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A>
- <xref:System.Windows.Forms.Control.Scale%2A>
- <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A>
- <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>
- [<span data-ttu-id="99a0e-174">使用视觉样式呈现控件</span><span class="sxs-lookup"><span data-stu-id="99a0e-174">Rendering Controls with Visual Styles</span></span>](./controls/rendering-controls-with-visual-styles.md)
- [<span data-ttu-id="99a0e-175">如何：通过避免自动缩放改善性能</span><span class="sxs-lookup"><span data-stu-id="99a0e-175">How to: Improve Performance by Avoiding Automatic Scaling</span></span>](./advanced/how-to-improve-performance-by-avoiding-automatic-scaling.md)