---
title: "Windows 窗体 DataGridView 控件中的数据显示模式"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-winforms
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- data [Windows Forms], display modes
- data grids [Windows Forms], display modes
- DataGridView control [Windows Forms], display modes
ms.assetid: 9755a030-3f3f-4705-a661-ba5a48a81875
caps.latest.revision: "13"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 92b66d27683fad4adf0ed2179a5bb29ef6220e3e
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/22/2017
---
# <a name="data-display-modes-in-the-windows-forms-datagridview-control"></a><span data-ttu-id="3e345-102">Windows 窗体 DataGridView 控件中的数据显示模式</span><span class="sxs-lookup"><span data-stu-id="3e345-102">Data Display Modes in the Windows Forms DataGridView Control</span></span>
<span data-ttu-id="3e345-103"><xref:System.Windows.Forms.DataGridView>控件可以在三种不同模式中显示数据： 绑定、 未绑定，和虚拟。</span><span class="sxs-lookup"><span data-stu-id="3e345-103">The <xref:System.Windows.Forms.DataGridView> control can display data in three distinct modes: bound, unbound, and virtual.</span></span> <span data-ttu-id="3e345-104">选择最合适的模式，基于你的要求。</span><span class="sxs-lookup"><span data-stu-id="3e345-104">Choose the most suitable mode based on your requirements.</span></span>  
  
## <a name="unbound"></a><span data-ttu-id="3e345-105">未绑定</span><span class="sxs-lookup"><span data-stu-id="3e345-105">Unbound</span></span>  
 <span data-ttu-id="3e345-106">未绑定的模式适合于显示相对较少量的编程方式管理的数据。</span><span class="sxs-lookup"><span data-stu-id="3e345-106">Unbound mode is suitable for displaying relatively small amounts of data that you manage programmatically.</span></span> <span data-ttu-id="3e345-107">你不附加<xref:System.Windows.Forms.DataGridView>直接与数据源如下所示绑定模式的控件。</span><span class="sxs-lookup"><span data-stu-id="3e345-107">You do not attach the <xref:System.Windows.Forms.DataGridView> control directly to a data source as in bound mode.</span></span> <span data-ttu-id="3e345-108">相反，你必须亲自填充该控件，通常通过使用<xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A?displayProperty=nameWithType>方法。</span><span class="sxs-lookup"><span data-stu-id="3e345-108">Instead, you must populate the control yourself, typically by using the <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="3e345-109">未绑定的模式可以是静态的只读数据，或当你想要自己进行交互的代码提供外部数据存储时特别有用。</span><span class="sxs-lookup"><span data-stu-id="3e345-109">Unbound mode can be particularly useful for static, read-only data, or when you want to provide your own code that interacts with an external data store.</span></span> <span data-ttu-id="3e345-110">如果你想你与外部数据源进行交互的用户，但是，你通常会使用绑定的模式。</span><span class="sxs-lookup"><span data-stu-id="3e345-110">When you want your users to interact with an external data source, however, you will typically use bound mode.</span></span>  
  
 <span data-ttu-id="3e345-111">使用只读的示例，未绑定<xref:System.Windows.Forms.DataGridView>，请参阅[如何： 创建未绑定的 Windows 窗体 DataGridView 控件](../../../../docs/framework/winforms/controls/how-to-create-an-unbound-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="3e345-111">For an example that uses a read-only unbound <xref:System.Windows.Forms.DataGridView>, see [How to: Create an Unbound Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/how-to-create-an-unbound-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="bound"></a><span data-ttu-id="3e345-112">绑定</span><span class="sxs-lookup"><span data-stu-id="3e345-112">Bound</span></span>  
 <span data-ttu-id="3e345-113">绑定的模式是适用于管理使用与数据存储区的自动交互的数据。</span><span class="sxs-lookup"><span data-stu-id="3e345-113">Bound mode is suitable for managing data using automatic interaction with the data store.</span></span> <span data-ttu-id="3e345-114">你可以将附加<xref:System.Windows.Forms.DataGridView>直接到通过设置其数据源的控件<xref:System.Windows.Forms.DataGridView.DataSource%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="3e345-114">You can attach the <xref:System.Windows.Forms.DataGridView> control directly to its data source by setting the <xref:System.Windows.Forms.DataGridView.DataSource%2A> property.</span></span> <span data-ttu-id="3e345-115">数据绑定控件时，推送和拉取而无需显式管理您的数据行。</span><span class="sxs-lookup"><span data-stu-id="3e345-115">When the control is data bound, data rows are pushed and pulled without the need of explicit management on your part.</span></span> <span data-ttu-id="3e345-116">当<xref:System.Windows.Forms.DataGridView.AutoGenerateColumns%2A>属性是`true`，每个列中数据源将导致控件中创建相对应的列。</span><span class="sxs-lookup"><span data-stu-id="3e345-116">When the <xref:System.Windows.Forms.DataGridView.AutoGenerateColumns%2A> property is `true`, each column in your data source will cause a corresponding column to be created in the control.</span></span> <span data-ttu-id="3e345-117">如果想要创建自己的列，可以将此属性设置为`false`并用<xref:System.Windows.Forms.DataGridViewColumn.DataPropertyName%2A>属性可将每个列绑定时将其配置。</span><span class="sxs-lookup"><span data-stu-id="3e345-117">If you prefer to create your own columns, you can set this property to `false` and use the <xref:System.Windows.Forms.DataGridViewColumn.DataPropertyName%2A> property to bind each column when you configure it.</span></span> <span data-ttu-id="3e345-118">当你想要使用的列类型不默认生成的类型时，这非常有用。</span><span class="sxs-lookup"><span data-stu-id="3e345-118">This is useful when you want to use a column type other than the types that are generated by default.</span></span> <span data-ttu-id="3e345-119">有关详细信息，请参阅[Windows 窗体 DataGridView 控件中的列类型](../../../../docs/framework/winforms/controls/column-types-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="3e345-119">For more information, see [Column Types in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/column-types-in-the-windows-forms-datagridview-control.md).</span></span>  
  
 <span data-ttu-id="3e345-120">有关示例，使用绑定<xref:System.Windows.Forms.DataGridView>控制，请参阅[演练： 验证 Windows 窗体 DataGridView 控件中的数据](../../../../docs/framework/winforms/controls/walkthrough-validating-data-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="3e345-120">For an example that uses a bound <xref:System.Windows.Forms.DataGridView> control, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>  
  
 <span data-ttu-id="3e345-121">你还可以添加到未绑定的列<xref:System.Windows.Forms.DataGridView>中绑定模式的控件。</span><span class="sxs-lookup"><span data-stu-id="3e345-121">You can also add unbound columns to a <xref:System.Windows.Forms.DataGridView> control in bound mode.</span></span> <span data-ttu-id="3e345-122">当你想要显示一列的按钮或链接，使用户能够在特定行上执行操作时，这非常有用。</span><span class="sxs-lookup"><span data-stu-id="3e345-122">This is useful when you want to display a column of buttons or links that enable users to perform actions on specific rows.</span></span> <span data-ttu-id="3e345-123">也很有用，与值计算的值绑定的列中显示列。</span><span class="sxs-lookup"><span data-stu-id="3e345-123">It is also useful to display columns with values calculated from bound columns.</span></span> <span data-ttu-id="3e345-124">你可以填充的处理程序中的计算列的单元格值<xref:System.Windows.Forms.DataGridView.CellFormatting>事件。</span><span class="sxs-lookup"><span data-stu-id="3e345-124">You can populate the cell values for calculated columns in a handler for the <xref:System.Windows.Forms.DataGridView.CellFormatting> event.</span></span> <span data-ttu-id="3e345-125">如果你使用<xref:System.Data.DataSet>或<xref:System.Data.DataTable>作为数据源，但是，你可能想要使用<xref:System.Data.DataColumn.Expression%2A?displayProperty=nameWithType>属性改为创建计算的列。</span><span class="sxs-lookup"><span data-stu-id="3e345-125">If you are using a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> as the data source, however, you might want to use the <xref:System.Data.DataColumn.Expression%2A?displayProperty=nameWithType> property to create a calculated column instead.</span></span> <span data-ttu-id="3e345-126">在这种情况下，<xref:System.Windows.Forms.DataGridView>控件会将计算的列就像任何其他列中的数据源一样。</span><span class="sxs-lookup"><span data-stu-id="3e345-126">In this case, the <xref:System.Windows.Forms.DataGridView> control will treat calculated column just like any other column in the data source.</span></span>  
  
 <span data-ttu-id="3e345-127">不支持按在绑定模式下的未绑定列进行排序。</span><span class="sxs-lookup"><span data-stu-id="3e345-127">Sorting by unbound columns in bound mode is not supported.</span></span> <span data-ttu-id="3e345-128">如果在包含用户可编辑值的绑定模式下创建的未绑定的列，则必须实现虚拟模式来维护这些值，当对控件进行排序的绑定的列。</span><span class="sxs-lookup"><span data-stu-id="3e345-128">If you create an unbound column in bound mode that contains user-editable values, you must implement virtual mode to maintain these values when the control is sorted by a bound column.</span></span>  
  
## <a name="virtual"></a><span data-ttu-id="3e345-129">虚拟</span><span class="sxs-lookup"><span data-stu-id="3e345-129">Virtual</span></span>  
 <span data-ttu-id="3e345-130">虚拟模式中，你可以实现你自己的数据管理操作。</span><span class="sxs-lookup"><span data-stu-id="3e345-130">With virtual mode, you can implement your own data management operations.</span></span> <span data-ttu-id="3e345-131">这是必要时对控件进行排序的绑定的列保持在绑定模式下的未绑定列的值。</span><span class="sxs-lookup"><span data-stu-id="3e345-131">This is necessary to maintain the values of unbound columns in bound mode when the control is sorted by bound columns.</span></span> <span data-ttu-id="3e345-132">但是，虚拟模式的主要用途是在与大量的数据进行交互时优化性能。</span><span class="sxs-lookup"><span data-stu-id="3e345-132">The primary use of virtual mode, however, is to optimize performance when interacting with large amounts of data.</span></span>  
  
 <span data-ttu-id="3e345-133">您附加<xref:System.Windows.Forms.DataGridView>控制对缓存的管理和你的代码控制何时推送和拉取数据行。</span><span class="sxs-lookup"><span data-stu-id="3e345-133">You attach the <xref:System.Windows.Forms.DataGridView> control to a cache that you manage, and your code controls when data rows are pushed and pulled.</span></span> <span data-ttu-id="3e345-134">若要减少内存占用量，缓存应在大小上类似于当前显示的行数。</span><span class="sxs-lookup"><span data-stu-id="3e345-134">To keep the memory footprint small, the cache should be similar in size to the number of rows currently displayed.</span></span> <span data-ttu-id="3e345-135">当用户滚动到视图中新行时，你的代码将从缓存请求新数据，并 （可选） 从内存刷新旧的数据。</span><span class="sxs-lookup"><span data-stu-id="3e345-135">When the user scrolls new rows into view, your code requests new data from the cache and optionally flushes old data from memory.</span></span>  
  
 <span data-ttu-id="3e345-136">在实现虚拟模式时，你将需要跟踪新行回滚新行添加到需要在数据模型且时。</span><span class="sxs-lookup"><span data-stu-id="3e345-136">When you are implementing virtual mode, you will need to track when a new row is needed in the data model and when to rollback the addition of the new row.</span></span> <span data-ttu-id="3e345-137">此功能的正确实现将取决于数据模型的实现以及数据模型中; 的事务语义是否提交作用域是单元格或行级别。</span><span class="sxs-lookup"><span data-stu-id="3e345-137">The exact implementation of this functionality will depend on the implementation of the data model and the transaction semantics of the data model; whether commit scope is at the cell or row level.</span></span>  
  
 <span data-ttu-id="3e345-138">有关虚拟模式的详细信息，请参阅[Windows 窗体 DataGridView 控件中的虚拟模式](../../../../docs/framework/winforms/controls/virtual-mode-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="3e345-138">For more information about virtual mode, see [Virtual Mode in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/virtual-mode-in-the-windows-forms-datagridview-control.md).</span></span> <span data-ttu-id="3e345-139">有关演示如何使用虚拟模式事件示例，请参阅[演练： 在 Windows 窗体 DataGridView 控件中实现虚拟模式](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="3e345-139">For an example that shows how to use virtual mode events, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3e345-140">请参阅</span><span class="sxs-lookup"><span data-stu-id="3e345-140">See Also</span></span>  
 <xref:System.Windows.Forms.DataGridView>  
 <xref:System.Windows.Forms.DataGridView.DataSource%2A?displayProperty=nameWithType>  
 <xref:System.Windows.Forms.DataGridView.VirtualMode%2A?displayProperty=nameWithType>  
 <xref:System.Windows.Forms.BindingSource>  
 <xref:System.Windows.Forms.DataGridViewColumn.DataPropertyName%2A?displayProperty=nameWithType>  
 [<span data-ttu-id="3e345-141">在 Windows 窗体 DataGridView 控件中显示数据</span><span class="sxs-lookup"><span data-stu-id="3e345-141">Displaying Data in the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/displaying-data-in-the-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="3e345-142">Windows 窗体 DataGridView 控件中的列类型</span><span class="sxs-lookup"><span data-stu-id="3e345-142">Column Types in the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/column-types-in-the-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="3e345-143">演练：创建未绑定 Windows 窗体 DataGridView 控件</span><span class="sxs-lookup"><span data-stu-id="3e345-143">Walkthrough: Creating an Unbound Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/walkthrough-creating-an-unbound-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="3e345-144">如何：将数据绑定到 Windows 窗体 DataGridView 控件</span><span class="sxs-lookup"><span data-stu-id="3e345-144">How to: Bind Data to the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/how-to-bind-data-to-the-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="3e345-145">Windows 窗体 DataGridView 控件中的虚拟模式</span><span class="sxs-lookup"><span data-stu-id="3e345-145">Virtual Mode in the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/virtual-mode-in-the-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="3e345-146">演练：在 Windows 窗体 DataGridView 控件中实现虚拟模式</span><span class="sxs-lookup"><span data-stu-id="3e345-146">Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md)
