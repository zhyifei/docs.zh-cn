---
title: 分布式应用程序安全
ms.date: 03/30/2017
helpviewer_keywords:
- distributed application security [WCF]
- security [WCF], transfer
ms.assetid: 53928a10-e474-46d0-ab90-5f98f8d7b668
author: BrucePerlerMS
ms.openlocfilehash: dfefa94db2bd286cb92a7fe09e5c4addb52ba8c8
ms.sourcegitcommit: 213292dfbb0c37d83f62709959ff55c50af5560d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/25/2018
ms.locfileid: "47090537"
---
# <a name="distributed-application-security"></a><span data-ttu-id="cb790-102">分布式应用程序安全</span><span class="sxs-lookup"><span data-stu-id="cb790-102">Distributed Application Security</span></span>
<span data-ttu-id="cb790-103">Windows Communication Foundation (WCF) 安全分为三个主要功能区域： 传输安全、 访问控制和审核。</span><span class="sxs-lookup"><span data-stu-id="cb790-103">Windows Communication Foundation (WCF) security is broken into three major functional areas: transfer security, access control, and auditing.</span></span> <span data-ttu-id="cb790-104">传输安全提供完整性、保密性和身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-104">Transfer security provides integrity, confidentiality, and authentication.</span></span> <span data-ttu-id="cb790-105">传输安全由传送安全、消息安全或 `TransportWithMessageCredential` 实现。</span><span class="sxs-lookup"><span data-stu-id="cb790-105">Transfer security is provided by one of the following: transport security, message security, or `TransportWithMessageCredential`.</span></span>  
  
 <span data-ttu-id="cb790-106">WCF 消息安全性的概述，请参阅[安全性概述](../../../../docs/framework/wcf/feature-details/security-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="cb790-106">For an overview of WCF message security, see [Security Overview](../../../../docs/framework/wcf/feature-details/security-overview.md).</span></span> <span data-ttu-id="cb790-107">有关 WCF 安全中的其他两个参数的详细信息，请参阅[授权](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)并[审核](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)。</span><span class="sxs-lookup"><span data-stu-id="cb790-107">For more information about the other two pieces of WCF security, see [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md) and [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
## <a name="transfer-security-scenarios"></a><span data-ttu-id="cb790-108">传输安全方案</span><span class="sxs-lookup"><span data-stu-id="cb790-108">Transfer Security Scenarios</span></span>  
 <span data-ttu-id="cb790-109">使用 WCF 传输安全的常见方案包括：</span><span class="sxs-lookup"><span data-stu-id="cb790-109">Common scenarios that employ WCF transfer security include the following:</span></span>  
  
-   <span data-ttu-id="cb790-110">使用 Windows 确保传输安全。</span><span class="sxs-lookup"><span data-stu-id="cb790-110">Secure transfer using Windows.</span></span> <span data-ttu-id="cb790-111">WCF 客户端和服务部署在 Windows 域 （或 Windows 林） 中。</span><span class="sxs-lookup"><span data-stu-id="cb790-111">A WCF client and service are deployed in a Windows domain (or a Windows forest).</span></span> <span data-ttu-id="cb790-112">消息包含个人数据，因此要求客户端和服务相互进行身份验证，要求实现消息完整性和消息保密性。</span><span class="sxs-lookup"><span data-stu-id="cb790-112">The messages contain personal data, so requirements include mutual authentication of the client and service, message integrity, and message confidentiality.</span></span> <span data-ttu-id="cb790-113">此外，还需要有已发生特定事务的证明，例如，消息的接收方应记录签名信息。</span><span class="sxs-lookup"><span data-stu-id="cb790-113">In addition, proof is required that a particular transaction occurred, for example, the receiver of the message should record the signature information.</span></span>  
  
-   <span data-ttu-id="cb790-114">使用 `UserName` 和 HTTPS 确保传输安全。</span><span class="sxs-lookup"><span data-stu-id="cb790-114">Secure transfer using `UserName` and HTTPS.</span></span> <span data-ttu-id="cb790-115">WCF 客户端和服务需要一些开发，以便通过 Internet 工作。</span><span class="sxs-lookup"><span data-stu-id="cb790-115">A WCF client and service need to be developed to work across the Internet.</span></span> <span data-ttu-id="cb790-116">客户端凭据根据数据库（其中的内容为用户名/密码对）进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-116">The client credentials authenticate against a database of user name/password pairs.</span></span> <span data-ttu-id="cb790-117">服务是用受信任的安全套接字层 (SSL) 证书部署在一个 HTTPS 地址的。</span><span class="sxs-lookup"><span data-stu-id="cb790-117">The service is deployed at an HTTPS address using a trusted Secure Sockets Layer (SSL) certificate.</span></span> <span data-ttu-id="cb790-118">由于消息是通过 Internet 传输的，因此，客户端和服务需要相互进行身份验证，并且必须在传输过程中保持消息的保密性和完整性。</span><span class="sxs-lookup"><span data-stu-id="cb790-118">Because the messages travel over the Internet, the client and service need to be mutually authenticated, and the messages' confidentiality and integrity must be preserved during transfer.</span></span>  
  
-   <span data-ttu-id="cb790-119">使用证书确保传输安全。</span><span class="sxs-lookup"><span data-stu-id="cb790-119">Secure transfer using certificates.</span></span> <span data-ttu-id="cb790-120">WCF 客户端和服务需要一些开发，以便通过公共 internet 工作。</span><span class="sxs-lookup"><span data-stu-id="cb790-120">A WCF client and service need to be developed to work over the public internet.</span></span> <span data-ttu-id="cb790-121">客户端和服务都具有可用于确保消息安全的证书。</span><span class="sxs-lookup"><span data-stu-id="cb790-121">The client and service both have certificates that can be used to secure the messages.</span></span> <span data-ttu-id="cb790-122">客户端和服务通过 Internet 进行相互通信，执行要求消息完整性、保密性和相互身份验证的重要事务。</span><span class="sxs-lookup"><span data-stu-id="cb790-122">The client and service use the Internet to communicate with each other and to perform high-value transactions that require message integrity, confidentiality, and mutual authentication.</span></span>  
  
## <a name="integrity-confidentiality-and-authentication"></a><span data-ttu-id="cb790-123">完整性、保密性和身份验证</span><span class="sxs-lookup"><span data-stu-id="cb790-123">Integrity, Confidentiality, and Authentication</span></span>  
 <span data-ttu-id="cb790-124">三项功能 — 完整性、保密性和身份验证 — 合称为传输安全。</span><span class="sxs-lookup"><span data-stu-id="cb790-124">Three functions—integrity, confidentiality and authentication—are together called transfer security.</span></span> <span data-ttu-id="cb790-125">传输安全提供的这些功能，有助于减轻对分布式应用程序的威胁。</span><span class="sxs-lookup"><span data-stu-id="cb790-125">Transfer security provides the functions that help to mitigate the threats to a distributed application.</span></span> <span data-ttu-id="cb790-126">下表简要介绍构成传输安全的三项功能。</span><span class="sxs-lookup"><span data-stu-id="cb790-126">The following table briefly describes the three functions that make up transfer security.</span></span>  
  
|<span data-ttu-id="cb790-127">函数</span><span class="sxs-lookup"><span data-stu-id="cb790-127">Function</span></span>|<span data-ttu-id="cb790-128">描述</span><span class="sxs-lookup"><span data-stu-id="cb790-128">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="cb790-129">完整性</span><span class="sxs-lookup"><span data-stu-id="cb790-129">Integrity</span></span>|<span data-ttu-id="cb790-130">*完整性*是确保数据是完整且准确的尤其是在它从一点移动到另一个，并可能是已读取的很多参与者。</span><span class="sxs-lookup"><span data-stu-id="cb790-130">*Integrity* is the assurance that data is complete and accurate, especially after it has traversed from one point to another, and possibly been read by many actors.</span></span> <span data-ttu-id="cb790-131">完整性必须得到维护，以免数据被篡改，这通常是由消息的数字签名实现的。</span><span class="sxs-lookup"><span data-stu-id="cb790-131">Integrity must be maintained to prevent tampering with the data, and is usually achieved by digital signing of a message.</span></span>|  
|<span data-ttu-id="cb790-132">保密性</span><span class="sxs-lookup"><span data-stu-id="cb790-132">Confidentiality</span></span>|<span data-ttu-id="cb790-133">*保密性*是不按预期读取器以外的任何人读取一个消息的保证。</span><span class="sxs-lookup"><span data-stu-id="cb790-133">*Confidentiality* is the assurance that a message has not been read by anyone other than the intended reader.</span></span> <span data-ttu-id="cb790-134">例如，信用卡号在通过 Internet 发送时必须保密。</span><span class="sxs-lookup"><span data-stu-id="cb790-134">For example, a credit card number must be kept confidential as it is sent over the Internet.</span></span> <span data-ttu-id="cb790-135">保密性通常是用公钥/私钥方案进行数据加密实现的。</span><span class="sxs-lookup"><span data-stu-id="cb790-135">Confidentiality is often provided by the encryption of data using a public key/private key scheme.</span></span>|  
|<span data-ttu-id="cb790-136">身份验证</span><span class="sxs-lookup"><span data-stu-id="cb790-136">Authentication</span></span>|<span data-ttu-id="cb790-137">*身份验证*的已声明标识验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-137">*Authentication* is the verification of a claimed identity.</span></span> <span data-ttu-id="cb790-138">例如，当使用银行帐户时，必须只允许帐户的实际所有者取款。</span><span class="sxs-lookup"><span data-stu-id="cb790-138">For example, when using a bank account, it is imperative that only the actual owner of the account be allowed to withdraw funds.</span></span> <span data-ttu-id="cb790-139">有多种方式可以实现身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-139">Authentication can be provided by a variety of means.</span></span> <span data-ttu-id="cb790-140">一个常用方法是使用用户/密码系统。</span><span class="sxs-lookup"><span data-stu-id="cb790-140">One common method is the user/password system.</span></span> <span data-ttu-id="cb790-141">第二个方法是使用第三方提供的 X.509 证书。</span><span class="sxs-lookup"><span data-stu-id="cb790-141">A second is the use of an X.509 certificate that is provided by a third party.</span></span>|  
  
## <a name="security-modes"></a><span data-ttu-id="cb790-142">安全模式</span><span class="sxs-lookup"><span data-stu-id="cb790-142">Security Modes</span></span>  
 <span data-ttu-id="cb790-143">WCF 有多种传输安全模式下表所述。</span><span class="sxs-lookup"><span data-stu-id="cb790-143">WCF has several modes of transfer security, which are described in the following table.</span></span>  
  
|<span data-ttu-id="cb790-144">模式</span><span class="sxs-lookup"><span data-stu-id="cb790-144">Mode</span></span>|<span data-ttu-id="cb790-145">描述</span><span class="sxs-lookup"><span data-stu-id="cb790-145">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="cb790-146">无</span><span class="sxs-lookup"><span data-stu-id="cb790-146">None</span></span>|<span data-ttu-id="cb790-147">传输层和消息层都不提供安全措施。</span><span class="sxs-lookup"><span data-stu-id="cb790-147">No security is provided at the transport layer or at the message layer.</span></span> <span data-ttu-id="cb790-148">预定义绑定都不使用此模式默认情况下除外[ \<basicHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)元素或使用代码时，<xref:System.ServiceModel.BasicHttpBinding>类。</span><span class="sxs-lookup"><span data-stu-id="cb790-148">None of the predefined bindings use this mode by default except the [\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element or, when using code, the <xref:System.ServiceModel.BasicHttpBinding> class.</span></span>|  
|<span data-ttu-id="cb790-149">传输</span><span class="sxs-lookup"><span data-stu-id="cb790-149">Transport</span></span>|<span data-ttu-id="cb790-150">使用安全传送（如 HTTPS）实现完整性、保密性和相互身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-150">Uses a secure transport such as HTTPS for integrity, confidentiality, and mutual authentication.</span></span>|  
|<span data-ttu-id="cb790-151">消息</span><span class="sxs-lookup"><span data-stu-id="cb790-151">Message</span></span>|<span data-ttu-id="cb790-152">使用 SOAP 消息安全实现完整性、保密性和相互身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-152">Uses SOAP-message security for integrity, confidentiality, and mutual authentication.</span></span> <span data-ttu-id="cb790-153">SOAP 消息是按照 WS-Security 标准获得保护的。</span><span class="sxs-lookup"><span data-stu-id="cb790-153">SOAP messages are secured according to the WS-Security standards.</span></span>|  
|<span data-ttu-id="cb790-154">混合模式</span><span class="sxs-lookup"><span data-stu-id="cb790-154">Mixed Mode</span></span>|<span data-ttu-id="cb790-155">使用传送安全实现完整性、保密性和服务器身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-155">Uses transport security for integrity, confidentiality, and server authentication.</span></span> <span data-ttu-id="cb790-156">使用消息安全（WS-Security 和其他标准）实现客户端身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-156">Uses message security (WS-Security and other standards) for client authentication.</span></span><br /><br /> <span data-ttu-id="cb790-157">（此模式的枚举值是 `TransportWithMessageCredential`。）</span><span class="sxs-lookup"><span data-stu-id="cb790-157">(This enumeration for this mode is `TransportWithMessageCredential`.)</span></span>|  
|<span data-ttu-id="cb790-158">消息和传送</span><span class="sxs-lookup"><span data-stu-id="cb790-158">Both</span></span>|<span data-ttu-id="cb790-159">在传送级别和消息级别都执行保护和身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-159">Performs protection and authentication at both levels.</span></span> <span data-ttu-id="cb790-160">此模式是仅适用于[ \<netMsmqBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md)元素。</span><span class="sxs-lookup"><span data-stu-id="cb790-160">This mode is available only in the [\<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) element.</span></span>|  
  
## <a name="credentials-and-transfer-security"></a><span data-ttu-id="cb790-161">凭据和传输安全</span><span class="sxs-lookup"><span data-stu-id="cb790-161">Credentials and Transfer Security</span></span>  
 <span data-ttu-id="cb790-162">一个*凭据*是用于证实已声明的标识或功能的数据。</span><span class="sxs-lookup"><span data-stu-id="cb790-162">A *credential* is data that is presented to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="cb790-163">提交凭据涉及出示数据以及数据的所有权证明。</span><span class="sxs-lookup"><span data-stu-id="cb790-163">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="cb790-164">WCF 支持多种传输和消息安全级别的凭据类型。</span><span class="sxs-lookup"><span data-stu-id="cb790-164">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="cb790-165">可以指定凭据的 WCF 绑定的类型。</span><span class="sxs-lookup"><span data-stu-id="cb790-165">You can specify a type of credential for a WCF binding.</span></span>  
  
 <span data-ttu-id="cb790-166">在许多国家和地区，驾驶执照就是凭据的一个示例。</span><span class="sxs-lookup"><span data-stu-id="cb790-166">In many countries or regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="cb790-167">该执照中包含表示个人身份和能力的数据。</span><span class="sxs-lookup"><span data-stu-id="cb790-167">A license contains data representing one's identity and capabilities.</span></span> <span data-ttu-id="cb790-168">它以持有人照片的形式包含所有权证明。</span><span class="sxs-lookup"><span data-stu-id="cb790-168">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="cb790-169">该执照由受信任的颁发机构颁发，通常是获得许可的政府部门。</span><span class="sxs-lookup"><span data-stu-id="cb790-169">The license is issued by a trusted authority, usually a governmental licensing department.</span></span> <span data-ttu-id="cb790-170">该执照采用密封形式且包含一张全息图，表明它未经改动或伪造。</span><span class="sxs-lookup"><span data-stu-id="cb790-170">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="cb790-171">作为示例，请考虑两种类型的支持在 WCF 中的凭据： 用户名和 (X.509) 证书凭据。</span><span class="sxs-lookup"><span data-stu-id="cb790-171">As an example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="cb790-172">对于用户名凭据，用户名表示已声明标识，密码表示所有权证明。</span><span class="sxs-lookup"><span data-stu-id="cb790-172">For the user name credential, the user name represents the claimed identity and the password presents the proof of possession.</span></span> <span data-ttu-id="cb790-173">这种情况下，受信任的颁发机构则是验证用户名和密码的系统。</span><span class="sxs-lookup"><span data-stu-id="cb790-173">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="cb790-174">在证书凭据中，主题名称、主题备用名称或证书中的特定字段可用于表示已声明标识和/或功能。</span><span class="sxs-lookup"><span data-stu-id="cb790-174">In the certificate credential, the subject name, subject alternative name, or specific fields within the certificate can be used to represent the claimed identity and/or capabilities.</span></span> <span data-ttu-id="cb790-175">凭据中的数据所有权证明的建立，是用关联私钥生成签名实现的。</span><span class="sxs-lookup"><span data-stu-id="cb790-175">Proof of possession of the data in the credential is established by using the associated private key to generate a signature.</span></span>  
  
 <span data-ttu-id="cb790-176">传输安全和指定的凭据，请参阅有关编程的详细信息[绑定与安全](../../../../docs/framework/wcf/feature-details/bindings-and-security.md)并[安全行为](../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md)。</span><span class="sxs-lookup"><span data-stu-id="cb790-176">For more information about programming transfer security and specifying credentials, see [Bindings and Security](../../../../docs/framework/wcf/feature-details/bindings-and-security.md) and [Security Behaviors](../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md).</span></span>  
  
### <a name="transport-client-credential-types"></a><span data-ttu-id="cb790-177">传送客户端凭据类型</span><span class="sxs-lookup"><span data-stu-id="cb790-177">Transport Client Credential Types</span></span>  
 <span data-ttu-id="cb790-178">下表列出了在创建使用传输安全的应用程序时可能使用的值。</span><span class="sxs-lookup"><span data-stu-id="cb790-178">The following table shows the possible values used when creating an application that uses transfer security.</span></span> <span data-ttu-id="cb790-179">在代码或绑定设置中，可以使用这些值。</span><span class="sxs-lookup"><span data-stu-id="cb790-179">You can use these values in either code or binding settings.</span></span>  
  
|<span data-ttu-id="cb790-180">设置</span><span class="sxs-lookup"><span data-stu-id="cb790-180">Setting</span></span>|<span data-ttu-id="cb790-181">描述</span><span class="sxs-lookup"><span data-stu-id="cb790-181">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="cb790-182">无</span><span class="sxs-lookup"><span data-stu-id="cb790-182">None</span></span>|<span data-ttu-id="cb790-183">指定客户端不需要提供任何凭据。</span><span class="sxs-lookup"><span data-stu-id="cb790-183">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="cb790-184">这相当于匿名客户端。</span><span class="sxs-lookup"><span data-stu-id="cb790-184">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="cb790-185">Basic</span><span class="sxs-lookup"><span data-stu-id="cb790-185">Basic</span></span>|<span data-ttu-id="cb790-186">指定基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-186">Specifies basic authentication.</span></span>  <span data-ttu-id="cb790-187">有关其他信息，请参见 RFC2617，"[HTTP 身份验证： 基本和摘要式身份验证](https://go.microsoft.com/fwlink/?LinkId=88313)。"</span><span class="sxs-lookup"><span data-stu-id="cb790-187">For additional information, see RFC2617, "[HTTP Authentication: Basic and Digest Authentication](https://go.microsoft.com/fwlink/?LinkId=88313)."</span></span>|  
|<span data-ttu-id="cb790-188">摘要</span><span class="sxs-lookup"><span data-stu-id="cb790-188">Digest</span></span>|<span data-ttu-id="cb790-189">指定摘要式身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-189">Specifies digest authentication.</span></span>  <span data-ttu-id="cb790-190">有关其他信息，请参见 RFC2617，"[HTTP 身份验证： 基本和摘要式身份验证](https://go.microsoft.com/fwlink/?LinkId=88313)。"</span><span class="sxs-lookup"><span data-stu-id="cb790-190">For additional information, see RFC2617, "[HTTP Authentication: Basic and Digest Authentication](https://go.microsoft.com/fwlink/?LinkId=88313)."</span></span>|  
|<span data-ttu-id="cb790-191">Ntlm</span><span class="sxs-lookup"><span data-stu-id="cb790-191">Ntlm</span></span>|<span data-ttu-id="cb790-192">指定在 Windows 域中使用 SSPI 协商进行 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-192">Specifies Windows authentication using SSPI negotiation on a Windows domain.</span></span><br /><br /> <span data-ttu-id="cb790-193">要使用 SSPI 协商，就需要使用 Kerberos 协议或 NT LanMan (NTLM)。</span><span class="sxs-lookup"><span data-stu-id="cb790-193">SSPI negotiation results in using either the Kerberos protocol or NT LanMan (NTLM).</span></span>|  
|<span data-ttu-id="cb790-194">Windows</span><span class="sxs-lookup"><span data-stu-id="cb790-194">Windows</span></span>|<span data-ttu-id="cb790-195">指定在 Windows 域中使用 SSPI 进行 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-195">Specifies Windows authentication using SSPI on a Windows domain.</span></span> <span data-ttu-id="cb790-196">SSPI 选择 Kerberos 协议或 NTLM 作为身份验证服务。</span><span class="sxs-lookup"><span data-stu-id="cb790-196">SSPI picks from either the Kerberos protocol or NTLM as authentication service.</span></span><br /><br /> <span data-ttu-id="cb790-197">SSPI 首先尝试 Kerberos 协议；如果失败，则使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="cb790-197">SSPI tries Kerberos protocol first; if that fails, it then uses NTLM.</span></span>|  
|<span data-ttu-id="cb790-198">证书</span><span class="sxs-lookup"><span data-stu-id="cb790-198">Certificate</span></span>|<span data-ttu-id="cb790-199">使用证书（通常是 X.509）执行客户端身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-199">Performs client authentication using a certificate, typically X.509.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="cb790-200">消息客户端凭据类型</span><span class="sxs-lookup"><span data-stu-id="cb790-200">Message Client Credential Types</span></span>  
 <span data-ttu-id="cb790-201">下表列出了在创建使用消息安全的应用程序时可能使用的值。</span><span class="sxs-lookup"><span data-stu-id="cb790-201">The following table shows the possible values used when creating an application that uses message security.</span></span> <span data-ttu-id="cb790-202">在代码或绑定设置中，可以使用这些值。</span><span class="sxs-lookup"><span data-stu-id="cb790-202">You can use these values in either code or binding settings.</span></span>  
  
|<span data-ttu-id="cb790-203">设置</span><span class="sxs-lookup"><span data-stu-id="cb790-203">Setting</span></span>|<span data-ttu-id="cb790-204">描述</span><span class="sxs-lookup"><span data-stu-id="cb790-204">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="cb790-205">无</span><span class="sxs-lookup"><span data-stu-id="cb790-205">None</span></span>|<span data-ttu-id="cb790-206">允许服务与匿名客户端交互。</span><span class="sxs-lookup"><span data-stu-id="cb790-206">Allows the service to interact with anonymous clients.</span></span>|  
|<span data-ttu-id="cb790-207">Windows</span><span class="sxs-lookup"><span data-stu-id="cb790-207">Windows</span></span>|<span data-ttu-id="cb790-208">允许在 Windows 凭据的已通过身份验证的上下文中执行 SOAP 消息交换。</span><span class="sxs-lookup"><span data-stu-id="cb790-208">Allows SOAP message exchanges to occur under the authenticated context of a Windows credential.</span></span> <span data-ttu-id="cb790-209">使用 SSPI 协商机制选择 Kerberos 协议或 NTLM 作为身份验证服务。</span><span class="sxs-lookup"><span data-stu-id="cb790-209">Uses SSPI negotiation mechanism to pick from either the Kerberos protocol or NTLM as an authentication service.</span></span>|  
|<span data-ttu-id="cb790-210">用户名</span><span class="sxs-lookup"><span data-stu-id="cb790-210">Username</span></span>|<span data-ttu-id="cb790-211">允许服务可以要求使用用户名凭据对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-211">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="cb790-212">请注意，WCF 不允许使用的用户名，例如生成签名或加密数据的任何加密操作。</span><span class="sxs-lookup"><span data-stu-id="cb790-212">Note that WCF does not allow any cryptographic operations with the user name, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="cb790-213">在这种情况下，WCF 强制执行传输的安全性时使用用户名凭据。</span><span class="sxs-lookup"><span data-stu-id="cb790-213">As such, WCF enforces that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="cb790-214">证书</span><span class="sxs-lookup"><span data-stu-id="cb790-214">Certificate</span></span>|<span data-ttu-id="cb790-215">允许服务要求使用证书对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-215">Allows the service to require that the client be authenticated using a certificate.</span></span>|  
|[!INCLUDE[infocard](../../../../includes/infocard-md.md)]|<span data-ttu-id="cb790-216">允许服务要求使用 [!INCLUDE[infocard](../../../../includes/infocard-md.md)] 对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="cb790-216">Allows the service to require that the client be authenticated using an [!INCLUDE[infocard](../../../../includes/infocard-md.md)].</span></span>|  
  
### <a name="programming-credentials"></a><span data-ttu-id="cb790-217">凭据编程</span><span class="sxs-lookup"><span data-stu-id="cb790-217">Programming Credentials</span></span>  
 <span data-ttu-id="cb790-218">对于每个客户端凭据类型，WCF 编程模型，可指定凭据值和凭据验证程序使用服务行为和通道行为。</span><span class="sxs-lookup"><span data-stu-id="cb790-218">For each of the client credential types, the WCF programming model allows you to specify the credential values and credential validators by using service behaviors and channel behaviors.</span></span>  
  
 <span data-ttu-id="cb790-219">WCF 安全有两种凭据类型： 服务凭据行为和通道凭据行为。</span><span class="sxs-lookup"><span data-stu-id="cb790-219">WCF security has two types of credentials: service credential behaviors and channel credential behaviors.</span></span> <span data-ttu-id="cb790-220">WCF 中的凭据行为指定实际数据，即用于满足安全要求通过绑定表示凭据。</span><span class="sxs-lookup"><span data-stu-id="cb790-220">Credential behaviors in WCF specify the actual data, namely, credentials used to meet the security requirements expressed through bindings.</span></span> <span data-ttu-id="cb790-221">在 WCF 中，客户端类是操作调用和消息之间进行转换的运行时组件。</span><span class="sxs-lookup"><span data-stu-id="cb790-221">In WCF, a client class is the run-time component that converts between operation invocation and messages.</span></span> <span data-ttu-id="cb790-222">所有客户端都是从 <xref:System.ServiceModel.ClientBase%601> 类继承的。</span><span class="sxs-lookup"><span data-stu-id="cb790-222">All clients inherit from the <xref:System.ServiceModel.ClientBase%601> class.</span></span> <span data-ttu-id="cb790-223">通过基类的 <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> 属性，可以指定不同的客户端凭据值。</span><span class="sxs-lookup"><span data-stu-id="cb790-223">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the base class allows you to specify various values of client credentials.</span></span>  
  
 <span data-ttu-id="cb790-224">在 WCF 中，服务行为是应用于实现服务协定 （接口） 以编程方式控制服务的类的特性。</span><span class="sxs-lookup"><span data-stu-id="cb790-224">In WCF, service behaviors are attributes applied to the class implementing a service contract (interface) to programmatically control the service.</span></span> <span data-ttu-id="cb790-225">使用 <xref:System.ServiceModel.Description.ServiceCredentials> 类，可以为服务凭据指定证书，也可以为不同的客户端凭据类型指定客户端验证设置。</span><span class="sxs-lookup"><span data-stu-id="cb790-225">The <xref:System.ServiceModel.Description.ServiceCredentials> class allows you to specify certificates for service credential and client validation settings for various client credential types.</span></span>  
  
### <a name="negotiation-model-for-message-security"></a><span data-ttu-id="cb790-226">消息安全的协商模型</span><span class="sxs-lookup"><span data-stu-id="cb790-226">Negotiation Model for Message Security</span></span>  
 <span data-ttu-id="cb790-227">在消息安全模式中，通过执行传输安全，可以在客户端带外配置服务凭据。</span><span class="sxs-lookup"><span data-stu-id="cb790-227">The message security mode allows you to perform transfer security so that the service credential is configured at the client out of band.</span></span> <span data-ttu-id="cb790-228">例如，如果使用的是存储在 Windows 证书存储区中的证书，则必须使用一个工具，如 Microsoft 管理控制台 (MMC) 单元。</span><span class="sxs-lookup"><span data-stu-id="cb790-228">For example, if you are using a certificate stored in the Windows certificate store, you must use a tool such as a Microsoft Management Console (MMC) snap-in.</span></span>  
  
 <span data-ttu-id="cb790-229">在消息安全模式中，通过执行传输安全，还可以与客户端交换服务凭据，作为初始协商的一部分。</span><span class="sxs-lookup"><span data-stu-id="cb790-229">The message security mode also allows you to perform transfer security so that the service credential is exchanged with the client as part of an initial negotiation.</span></span> <span data-ttu-id="cb790-230">若要启用协商，请将 <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> 属性设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="cb790-230">To enable negotiation, set the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> property to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cb790-231">请参阅</span><span class="sxs-lookup"><span data-stu-id="cb790-231">See Also</span></span>  
 [<span data-ttu-id="cb790-232">终结点创建概述</span><span class="sxs-lookup"><span data-stu-id="cb790-232">Endpoint Creation Overview</span></span>](../../../../docs/framework/wcf/endpoint-creation-overview.md)  
 [<span data-ttu-id="cb790-233">系统提供的绑定</span><span class="sxs-lookup"><span data-stu-id="cb790-233">System-Provided Bindings</span></span>](../../../../docs/framework/wcf/system-provided-bindings.md)  
 [<span data-ttu-id="cb790-234">安全性概述</span><span class="sxs-lookup"><span data-stu-id="cb790-234">Security Overview</span></span>](../../../../docs/framework/wcf/feature-details/security-overview.md)  
 [<span data-ttu-id="cb790-235">Windows Server App Fabric 的安全模型</span><span class="sxs-lookup"><span data-stu-id="cb790-235">Security Model for Windows Server App Fabric</span></span>](https://go.microsoft.com/fwlink/?LinkID=201279&clcid=0x409)
