---
title: "传输安全概述"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
ms.assetid: 00959326-aa9d-44d0-af61-54933d4adc7f
caps.latest.revision: "23"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.openlocfilehash: 8e35634f60ff68a07c199cf6f3893e741b631a08
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/21/2017
---
# <a name="transport-security-overview"></a><span data-ttu-id="e3821-102">传输安全概述</span><span class="sxs-lookup"><span data-stu-id="e3821-102">Transport Security Overview</span></span>
<span data-ttu-id="e3821-103">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] 中的传输安全机制取决于使用的绑定和传输。</span><span class="sxs-lookup"><span data-stu-id="e3821-103">Transport security mechanisms in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] depend on the binding and transport being used.</span></span> <span data-ttu-id="e3821-104">例如，当使用 <xref:System.ServiceModel.WSHttpBinding> 类时，传输为 HTTP，保证传输安全的主要机制为 HTTP 上的安全套接字层 (SSL) （通常称为 HTTPS）。</span><span class="sxs-lookup"><span data-stu-id="e3821-104">For example, when using the <xref:System.ServiceModel.WSHttpBinding> class, the transport is HTTP, and the primary mechanism for securing the transport is Secure Sockets Layer (SSL) over HTTP, commonly called HTTPS.</span></span> <span data-ttu-id="e3821-105">本主题讨论 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 系统提供的绑定中使用的主要传输安全机制。</span><span class="sxs-lookup"><span data-stu-id="e3821-105">This topic discusses the major transport security mechanisms used in the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] system-provided bindings.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e3821-106">将 SSL 安全与 .NET Framework 3.5 及更高版本一起使用时，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 客户端将同时使用其证书存储区中的中间证书和 SSL 协商期间收到的中间证书，对服务的证书执行证书链验证。</span><span class="sxs-lookup"><span data-stu-id="e3821-106">When SSL security is used with .NET Framework 3.5 and later an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="e3821-107">.NET Framework 3.0 仅使用本地证书存储区中安装的中间证书。</span><span class="sxs-lookup"><span data-stu-id="e3821-107">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="e3821-108">当使用传输安全时， <!--zz <xref:System.Treading.Thread.CurrentPrincipal%2A> --> `CurrentPrincipal`属性可能会被覆盖。</span><span class="sxs-lookup"><span data-stu-id="e3821-108">When transport security is used, the <!--zz <xref:System.Treading.Thread.CurrentPrincipal%2A> --> `CurrentPrincipal` property may be overwritten.</span></span> <span data-ttu-id="e3821-109">要防止此类情况发生集<!--zz <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.PrincipalPermission%2A> -->`PrincipalPermission`为 None。</span><span class="sxs-lookup"><span data-stu-id="e3821-109">To prevent this from happening set the <!--zz <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.PrincipalPermission%2A> --> `PrincipalPermission` to None.</span></span> <span data-ttu-id="e3821-110"><xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> 是可对服务说明设置的服务行为。</span><span class="sxs-lookup"><span data-stu-id="e3821-110"><xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> is a service behavior that can be set on the service description.</span></span>  
  
## <a name="basichttpbinding"></a><span data-ttu-id="e3821-111">BasicHttpBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-111">BasicHttpBinding</span></span>  
 <span data-ttu-id="e3821-112">默认情况下，<xref:System.ServiceModel.BasicHttpBinding> 类不提供安全性。</span><span class="sxs-lookup"><span data-stu-id="e3821-112">By default, the <xref:System.ServiceModel.BasicHttpBinding> class does not provide security.</span></span> <span data-ttu-id="e3821-113">此绑定旨在提供与不实现安全机制的 Web 服务提供程序的互操作性。</span><span class="sxs-lookup"><span data-stu-id="e3821-113">This binding is designed for interoperability with Web service providers that do not implement security.</span></span> <span data-ttu-id="e3821-114">但可以通过将 <xref:System.ServiceModel.BasicHttpSecurity.Mode%2A> 属性设置为 <xref:System.ServiceModel.BasicHttpSecurityMode.None> 以外的值来启用安全。</span><span class="sxs-lookup"><span data-stu-id="e3821-114">However, you can switch on security by setting the <xref:System.ServiceModel.BasicHttpSecurity.Mode%2A> property to any value except <xref:System.ServiceModel.BasicHttpSecurityMode.None>.</span></span> <span data-ttu-id="e3821-115">若要启用传输安全，请将该属性设置为 <xref:System.ServiceModel.BasicHttpSecurityMode.Transport>。</span><span class="sxs-lookup"><span data-stu-id="e3821-115">To enable transport security, set the property to <xref:System.ServiceModel.BasicHttpSecurityMode.Transport>.</span></span>  
  
### <a name="interoperation-with-iis"></a><span data-ttu-id="e3821-116">与 IIS 的互操作</span><span class="sxs-lookup"><span data-stu-id="e3821-116">Interoperation with IIS</span></span>  
 <span data-ttu-id="e3821-117"><xref:System.ServiceModel.BasicHttpBinding> 类主要用于与现有的 Web 服务和由 Internet 信息服务 (IIS) 承载的许多服务进行互操作。</span><span class="sxs-lookup"><span data-stu-id="e3821-117">The <xref:System.ServiceModel.BasicHttpBinding> class is primarily used to interoperate with existing Web services, and many of those services are hosted by Internet Information Services (IIS).</span></span> <span data-ttu-id="e3821-118">因此，此绑定的传输安全旨在实现与 IIS 站点的无缝互操作。</span><span class="sxs-lookup"><span data-stu-id="e3821-118">Consequently, the transport security for this binding is designed for seamless interoperation with IIS sites.</span></span> <span data-ttu-id="e3821-119">通过将安全模式设置为 <xref:System.ServiceModel.BasicHttpSecurityMode.Transport>，然后设置客户端凭据类型可以实现这一目的。</span><span class="sxs-lookup"><span data-stu-id="e3821-119">This is done by setting the security mode to <xref:System.ServiceModel.BasicHttpSecurityMode.Transport> and then setting the client credential type.</span></span> <span data-ttu-id="e3821-120">凭据类型值对应于 IIS 目录安全机制。</span><span class="sxs-lookup"><span data-stu-id="e3821-120">The credential type values correspond to IIS directory security mechanisms.</span></span> <span data-ttu-id="e3821-121">下面的代码演示如何设置模式以及如何将凭据类型设置为 Windows。</span><span class="sxs-lookup"><span data-stu-id="e3821-121">The following code shows the mode being set and the credential type set to Windows.</span></span> <span data-ttu-id="e3821-122">当客户端和服务器在同一个 Windows 域中时，您可以使用此配置。</span><span class="sxs-lookup"><span data-stu-id="e3821-122">You can use this configuration when both client and server are on the same Windows domain.</span></span>  
  
 [!code-csharp[c_ProgrammingSecurity#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_programmingsecurity/cs/source.cs#10)] 
 [!code-vb[c_ProgrammingSecurity#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_programmingsecurity/vb/source.vb#10)]  
  
 <span data-ttu-id="e3821-123">或在配置中：</span><span class="sxs-lookup"><span data-stu-id="e3821-123">Or, in configuration:</span></span>  
  
```xml  
<bindings>  
  <basicHttpBinding>  
    <binding name="SecurityByTransport">  
      <security mode="Transport">  
        <transport clientCredentialType="Windows" />  
       </security>  
     </binding>  
  </basicHttpBinding>  
</bindings>  
```  
  
 <span data-ttu-id="e3821-124">以下几节讨论其他客户端凭据类型。</span><span class="sxs-lookup"><span data-stu-id="e3821-124">The following sections discuss other client credential types.</span></span>  
  
#### <a name="basic"></a><span data-ttu-id="e3821-125">Basic</span><span class="sxs-lookup"><span data-stu-id="e3821-125">Basic</span></span>  
 <span data-ttu-id="e3821-126">这对应于 IIS 中的基本身份验证方法。</span><span class="sxs-lookup"><span data-stu-id="e3821-126">This corresponds to the Basic authentication method in IIS.</span></span> <span data-ttu-id="e3821-127">使用此模式时，必须为 IIS 服务器配置 Windows 用户帐户和适当的 NTFS 文件系统权限。</span><span class="sxs-lookup"><span data-stu-id="e3821-127">When using this mode, the IIS server must be configured with Windows user accounts and appropriate NTFS file system permissions.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-128">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]，请参阅[启用基本身份验证和配置领域名](http://go.microsoft.com/fwlink/?LinkId=88592)。</span><span class="sxs-lookup"><span data-stu-id="e3821-128"> [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Enabling Basic Authentication and Configuring the Realm Name](http://go.microsoft.com/fwlink/?LinkId=88592).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-129">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]，请参阅[IIS 7.0 Beta： 配置基本身份验证](http://go.microsoft.com/fwlink/?LinkId=88593)。</span><span class="sxs-lookup"><span data-stu-id="e3821-129"> [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configure Basic Authentication](http://go.microsoft.com/fwlink/?LinkId=88593).</span></span>  
  
#### <a name="certificate"></a><span data-ttu-id="e3821-130">证书</span><span class="sxs-lookup"><span data-stu-id="e3821-130">Certificate</span></span>  
 <span data-ttu-id="e3821-131">IIS 有一个要求客户端使用证书进行登录的选项。</span><span class="sxs-lookup"><span data-stu-id="e3821-131">IIS has an option to require clients to log on with a certificate.</span></span> <span data-ttu-id="e3821-132">此功能还可以使 IIS 将客户端证书映射到 Windows 帐户。</span><span class="sxs-lookup"><span data-stu-id="e3821-132">The feature also enables IIS to map a client certificate to a Windows account.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-133">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]，请参阅[在 IIS 6.0 中启用客户端证书](http://go.microsoft.com/fwlink/?LinkId=88594)。</span><span class="sxs-lookup"><span data-stu-id="e3821-133"> [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Enabling Client Certificates in IIS 6.0](http://go.microsoft.com/fwlink/?LinkId=88594).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-134">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]，请参阅[IIS 7.0 Beta： 在 IIS 7.0 中配置服务器证书](http://go.microsoft.com/fwlink/?LinkId=88595)。</span><span class="sxs-lookup"><span data-stu-id="e3821-134"> [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configuring Server Certificates in IIS 7.0](http://go.microsoft.com/fwlink/?LinkId=88595).</span></span>  
  
#### <a name="digest"></a><span data-ttu-id="e3821-135">摘要</span><span class="sxs-lookup"><span data-stu-id="e3821-135">Digest</span></span>  
 <span data-ttu-id="e3821-136">摘要式身份验证类似于基本身份验证，但其具有以哈希形式而不是明文形式发送凭据的优点。</span><span class="sxs-lookup"><span data-stu-id="e3821-136">Digest authentication is similar to Basic authentication, but offers the advantage of sending the credentials as a hash, instead of in clear text.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-137">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]，请参阅[摘要式身份验证在 IIS 6.0 中](http://go.microsoft.com/fwlink/?LinkID=88443)。</span><span class="sxs-lookup"><span data-stu-id="e3821-137"> [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Digest Authentication in IIS 6.0](http://go.microsoft.com/fwlink/?LinkID=88443).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-138">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]，请参阅[IIS 7.0 Beta： 配置摘要式身份验证](http://go.microsoft.com/fwlink/?LinkId=88596)。</span><span class="sxs-lookup"><span data-stu-id="e3821-138"> [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configure Digest Authentication](http://go.microsoft.com/fwlink/?LinkId=88596).</span></span>  
  
#### <a name="windows"></a><span data-ttu-id="e3821-139">Windows</span><span class="sxs-lookup"><span data-stu-id="e3821-139">Windows</span></span>  
 <span data-ttu-id="e3821-140">这对应于 IIS 中的集成 Windows 身份验证。</span><span class="sxs-lookup"><span data-stu-id="e3821-140">This corresponds to integrated Windows authentication in IIS.</span></span> <span data-ttu-id="e3821-141">设置为此值时，还需要服务器位于使用 Kerberos 协议作为其域控制器的 Windows 域中。</span><span class="sxs-lookup"><span data-stu-id="e3821-141">When set to this value, the server is also expected to exist on a Windows domain that uses the Kerberos protocol as its domain controller.</span></span> <span data-ttu-id="e3821-142">如果服务器不在支持 Kerberos 的域中，或者如果 Kerberos 系统失败，您可以使用下一节中说明的 NT LAN Manager (NTLM) 值。</span><span class="sxs-lookup"><span data-stu-id="e3821-142">If the server is not on a Kerberos-backed domain, or if the Kerberos system fails, you can use the NT LAN Manager (NTLM) value described in the next section.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-143">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]，请参阅[集成 Windows 身份验证在 IIS 6.0 中](http://go.microsoft.com/fwlink/?LinkId=88597)。</span><span class="sxs-lookup"><span data-stu-id="e3821-143"> [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Integrated Windows Authentication in IIS 6.0](http://go.microsoft.com/fwlink/?LinkId=88597).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-144">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]，请参阅[IIS 7.0 Beta： 在 IIS 7.0 中配置服务器证书](http://go.microsoft.com/fwlink/?LinkId=88595)。</span><span class="sxs-lookup"><span data-stu-id="e3821-144"> [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configuring Server Certificates in IIS 7.0](http://go.microsoft.com/fwlink/?LinkId=88595).</span></span>  
  
#### <a name="ntlm"></a><span data-ttu-id="e3821-145">NTLM</span><span class="sxs-lookup"><span data-stu-id="e3821-145">NTLM</span></span>  
 <span data-ttu-id="e3821-146">这使服务器可以在 Kerberos 协议失败时使用 NTLM 进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="e3821-146">This enables the server to use NTLM for authentication if the Kerberos protocol fails.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-147">配置中的 IIS [!INCLUDE[iis601](../../../../includes/iis601-md.md)]，请参阅[强制 NTLM 身份验证](http://go.microsoft.com/fwlink/?LinkId=88598)。</span><span class="sxs-lookup"><span data-stu-id="e3821-147"> configuring IIS in [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Forcing NTLM Authentication](http://go.microsoft.com/fwlink/?LinkId=88598).</span></span> <span data-ttu-id="e3821-148">对于 [!INCLUDE[iisver](../../../../includes/iisver-md.md)]，Windows 身份验证包括 NTLM 身份验证。</span><span class="sxs-lookup"><span data-stu-id="e3821-148">For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the Windows authentication includes NTLM authentication.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="e3821-149">[IIS 7.0 Beta： 在 IIS 7.0 中配置服务器证书](http://go.microsoft.com/fwlink/?LinkID=88595)。</span><span class="sxs-lookup"><span data-stu-id="e3821-149"> [IIS 7.0 Beta: Configuring Server Certificates in IIS 7.0](http://go.microsoft.com/fwlink/?LinkID=88595).</span></span>  
  
## <a name="wshttpbinding"></a><span data-ttu-id="e3821-150">WsHttpBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-150">WsHttpBinding</span></span>  
 <span data-ttu-id="e3821-151"><xref:System.ServiceModel.WSHttpBinding> 类专用于与实现 WS* 规范的服务进行互操作。</span><span class="sxs-lookup"><span data-stu-id="e3821-151">The <xref:System.ServiceModel.WSHttpBinding> class is designed for interoperation with services that implement WS-* specifications.</span></span> <span data-ttu-id="e3821-152">此绑定的传输安全为 HTTP 上的安全套接字层 (SSL)，即 HTTPS。</span><span class="sxs-lookup"><span data-stu-id="e3821-152">The transport security for this binding is Secure Sockets Layer (SSL) over HTTP, or HTTPS.</span></span> <span data-ttu-id="e3821-153">若要创建使用 SSL 的 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 应用程序，请使用 IIS 承载该应用程序。</span><span class="sxs-lookup"><span data-stu-id="e3821-153">To create an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application that uses SSL, use IIS to host the application.</span></span> <span data-ttu-id="e3821-154">或者，如果您要创建自承载的应用程序，请使用 HttpCfg.exe 工具将 X.509 证书绑定到计算机上的特定端口。</span><span class="sxs-lookup"><span data-stu-id="e3821-154">Alternatively, if you are creating a self-hosted application, use the HttpCfg.exe tool to bind an X.509 certificate to a specific port on a computer.</span></span> <span data-ttu-id="e3821-155">端口号作为 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 应用程序的一部分以终结点地址的形式进行指定。</span><span class="sxs-lookup"><span data-stu-id="e3821-155">The port number is specified as part of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application as an endpoint address.</span></span> <span data-ttu-id="e3821-156">使用传输模式时，终结点地址必须包括 HTTPS 协议，否则运行时将引发异常。</span><span class="sxs-lookup"><span data-stu-id="e3821-156">When using transport mode, the endpoint address must include the HTTPS protocol or an exception will be thrown at run time.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="e3821-157">[HTTP 传输安全](../../../../docs/framework/wcf/feature-details/http-transport-security.md)。</span><span class="sxs-lookup"><span data-stu-id="e3821-157"> [HTTP Transport Security](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span></span>  
  
 <span data-ttu-id="e3821-158">对于客户端身份验证，请将 <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A> 类的 <xref:System.ServiceModel.HttpTransportSecurity> 属性设置为 <xref:System.ServiceModel.HttpClientCredentialType> 枚举值之一。</span><span class="sxs-lookup"><span data-stu-id="e3821-158">For client authentication, set the <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A> property of the <xref:System.ServiceModel.HttpTransportSecurity> class to one of the <xref:System.ServiceModel.HttpClientCredentialType> enumeration values.</span></span> <span data-ttu-id="e3821-159">枚举值与 <xref:System.ServiceModel.BasicHttpBinding> 的客户端凭据类型等同，并由 IIS 服务承载。</span><span class="sxs-lookup"><span data-stu-id="e3821-159">The enumeration values are identical to the client credential types for <xref:System.ServiceModel.BasicHttpBinding> and are designed to be hosted with IIS services.</span></span>  
  
 <span data-ttu-id="e3821-160">下面的示例演示与 Windows 的客户端凭据类型一起使用的绑定。</span><span class="sxs-lookup"><span data-stu-id="e3821-160">The following example shows the binding being used with a client credential type of Windows.</span></span>  
  
 [!code-csharp[c_ProgrammingSecurity#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_programmingsecurity/cs/source.cs#11)]
 [!code-vb[c_ProgrammingSecurity#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_programmingsecurity/vb/source.vb#11)]  
  
## <a name="wsdualhttpbinding"></a><span data-ttu-id="e3821-161">WSDualHttpBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-161">WSDualHttpBinding</span></span>  
 <span data-ttu-id="e3821-162">此绑定只提供消息级别的安全，不提供传输级别的安全。</span><span class="sxs-lookup"><span data-stu-id="e3821-162">This binding provides only message-level security, not transport-level security.</span></span>  
  
## <a name="nettcpbinding"></a><span data-ttu-id="e3821-163">NetTcpBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-163">NetTcpBinding</span></span>  
 <span data-ttu-id="e3821-164"><xref:System.ServiceModel.NetTcpBinding> 类使用 TCP 进行消息传输。</span><span class="sxs-lookup"><span data-stu-id="e3821-164">The <xref:System.ServiceModel.NetTcpBinding> class uses TCP for message transport.</span></span> <span data-ttu-id="e3821-165">通过实现 TCP 上的传输层安全性 (TLS) 为传输模式提供安全。</span><span class="sxs-lookup"><span data-stu-id="e3821-165">Security for the transport mode is provided by implementing Transport Layer Security (TLS) over TCP.</span></span> <span data-ttu-id="e3821-166">由操作系统提供 TLS 实现。</span><span class="sxs-lookup"><span data-stu-id="e3821-166">The TLS implementation is provided by the operating system.</span></span>  
  
 <span data-ttu-id="e3821-167">也可以通过将 <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A> 类的 <xref:System.ServiceModel.TcpTransportSecurity> 属性设置为 <xref:System.ServiceModel.TcpClientCredentialType> 值之一来指定客户端的凭据类型，如下面的代码所示。</span><span class="sxs-lookup"><span data-stu-id="e3821-167">You can also specify the client's credential type by setting the <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A> property of the <xref:System.ServiceModel.TcpTransportSecurity> class to one of the <xref:System.ServiceModel.TcpClientCredentialType> values, as shown in the following code.</span></span>  
  
 [!code-csharp[c_ProgrammingSecurity#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_programmingsecurity/cs/source.cs#12)]
 [!code-vb[c_ProgrammingSecurity#12](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_programmingsecurity/vb/source.vb#12)]  
  
#### <a name="client"></a><span data-ttu-id="e3821-168">客户端</span><span class="sxs-lookup"><span data-stu-id="e3821-168">Client</span></span>  
 <span data-ttu-id="e3821-169">在客户端，必须使用 <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> 类的 <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> 方法指定证书。</span><span class="sxs-lookup"><span data-stu-id="e3821-169">On the client, you must specify a certificate using the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e3821-170">如果您要使用 Windows 安全性，则不需要证书。</span><span class="sxs-lookup"><span data-stu-id="e3821-170">If you are using Windows security, a certificate is not required.</span></span>  
  
 <span data-ttu-id="e3821-171">下面的代码使用唯一标识证书的证书指纹。</span><span class="sxs-lookup"><span data-stu-id="e3821-171">The following code uses the thumbprint of the certificate, which uniquely identifies it.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-172">证书，请参阅[使用证书](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)。</span><span class="sxs-lookup"><span data-stu-id="e3821-172"> certificates, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
 [!code-csharp[c_ProgrammingSecurity#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_programmingsecurity/cs/source.cs#13)]
 [!code-vb[c_ProgrammingSecurity#13](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_programmingsecurity/vb/source.vb#13)]  
  
 <span data-ttu-id="e3821-173">或者，在客户端的配置中指定的证书使用[ \<c a t e >](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) behaviors 部分中的元素。</span><span class="sxs-lookup"><span data-stu-id="e3821-173">Alternatively, specify the certificate in the client's configuration using a [\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) element in the behaviors section.</span></span>  
  
```xml  
<behaviors>  
  <behavior>  
   <clientCredentials>  
     <clientCertificate findValue= "101010101010101010101010101010000000000"   
      storeLocation="LocalMachine" storeName="My"   
      X509FindType="FindByThumbPrint"/>  
     </clientCertificate>  
   </clientCredentials>  
 </behavior>  
</behaviors>    
```  
  
## <a name="netnamedpipebinding"></a><span data-ttu-id="e3821-174">NetNamedPipeBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-174">NetNamedPipeBinding</span></span>  
 <span data-ttu-id="e3821-175"><xref:System.ServiceModel.NetNamedPipeBinding> 类用于进行有效的计算机内通信；也就是说，虽然可以在同一网络上的两台计算机之间创建命名管道通道，但进程是在同一台计算机上运行的。</span><span class="sxs-lookup"><span data-stu-id="e3821-175">The <xref:System.ServiceModel.NetNamedPipeBinding> class is designed for efficient intra-machine communication; that is, for processes running on the same computer, although named pipe channels can be created between two computers on the same network.</span></span> <span data-ttu-id="e3821-176">此绑定只提供传输级别的安全。</span><span class="sxs-lookup"><span data-stu-id="e3821-176">This binding provides only transport-level security.</span></span> <span data-ttu-id="e3821-177">在创建使用此绑定的应用程序时，终结点地址必须包括“net.pipe”作为终结点地址的协议。</span><span class="sxs-lookup"><span data-stu-id="e3821-177">When creating applications using this binding, the endpoint addresses must include "net.pipe" as the protocol of the endpoint address.</span></span>  
  
## <a name="wsfederationhttpbinding"></a><span data-ttu-id="e3821-178">WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-178">WSFederationHttpBinding</span></span>  
 <span data-ttu-id="e3821-179">使用传输安全时，此绑定与已颁发的令牌 (<xref:System.ServiceModel.WSFederationHttpSecurityMode.TransportWithMessageCredential>) 一起使用 HTTP 上的 SSL（称为 HTTPS）。</span><span class="sxs-lookup"><span data-stu-id="e3821-179">When using transport security, this binding uses SSL over HTTP, known as HTTPS with an issued token (<xref:System.ServiceModel.WSFederationHttpSecurityMode.TransportWithMessageCredential>).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-180">联合应用程序，请参阅[联合身份验证和颁发令牌](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="e3821-180"> federation applications, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>  
  
## <a name="netpeertcpbinding"></a><span data-ttu-id="e3821-181">NetPeerTcpBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-181">NetPeerTcpBinding</span></span>  
 <span data-ttu-id="e3821-182"><xref:System.ServiceModel.NetPeerTcpBinding> 类是旨在使用对等网络功能进行有效通信的一种安全传输。</span><span class="sxs-lookup"><span data-stu-id="e3821-182">The <xref:System.ServiceModel.NetPeerTcpBinding> class is a secure transport that is designed for efficient communication using the peer-to-peer networking feature.</span></span> <span data-ttu-id="e3821-183">TCP 是协议，这与类和绑定的名称相一致。</span><span class="sxs-lookup"><span data-stu-id="e3821-183">As indicated by the name of the class and binding, TCP is the protocol.</span></span> <span data-ttu-id="e3821-184">当安全模式设置为“传输”时，绑定将实现 TCP 上的 TLS。</span><span class="sxs-lookup"><span data-stu-id="e3821-184">When the security mode is set to Transport, the binding implements TLS over TCP.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e3821-185">对等功能，请参阅[对等网络](../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)。</span><span class="sxs-lookup"><span data-stu-id="e3821-185"> the peer-to-peer feature, see [Peer-to-Peer Networking](../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md).</span></span>  
  
## <a name="msmqintegrationbinding-and-netmsmqbinding"></a><span data-ttu-id="e3821-186">MsmqIntegrationBinding 和 NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="e3821-186">MsmqIntegrationBinding and NetMsmqBinding</span></span>  
 <span data-ttu-id="e3821-187">有关完整的传输介绍安全与消息队列 （以前称为 MSMQ），请参阅[使用传输安全保护消息](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md)。</span><span class="sxs-lookup"><span data-stu-id="e3821-187">For a complete discussion of transport security with Message Queuing (previously called MSMQ), see [Securing Messages Using Transport Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e3821-188">另请参阅</span><span class="sxs-lookup"><span data-stu-id="e3821-188">See Also</span></span>  
 [<span data-ttu-id="e3821-189">WCF 安全编程</span><span class="sxs-lookup"><span data-stu-id="e3821-189">Programming WCF Security</span></span>](../../../../docs/framework/wcf/feature-details/programming-wcf-security.md)
