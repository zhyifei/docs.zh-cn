---
title: "防火墙说明 | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
ms.assetid: a7dc429f-65ac-4faf-974a-77d5fb977fe1
caps.latest.revision: 32
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 32
---
# 防火墙说明
必须在防火墙中启用若干端口或程序，[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] 示例才能运行。其中许多示例使用范围 8000\-8003 中的端口和端口 9000 进行通信。防火墙默认情况下会打开，阻止对这些端口进行访问。若要针对这些示例启用防火墙，请完成以下过程之一，具体情况取决于您的要求和安全环境：  
  
-   选项 1：在运行时以交互方式启用示例。不预先更改防火墙配置，并继续开始生成和运行示例的过程。当示例运行时，将出现**“Windows 安全警报”**对话框。然后，可以通过交互方式将所讨论的示例程序添加到取消阻止列表。对于此过程，您可能必须随后重新启动示例。  
  
-   选项 2：预先启用示例程序。启动**“Windows 防火墙”**控制面板小程序，并启用计划运行的示例程序。您必须首先生成这些程序，以生成它们的可执行文件。可以在以下过程中找到更详细的说明。  
  
-   选项 3：预先启用端口范围。启动**“Windows 防火墙”**控制面板小程序，并启用示例所使用的端口 80、443、8000\-8003 和 9000。可以在以下过程中找到更详细的说明。相对于其他选项而言，此选项的安全性较差，因为它允许任何程序（而不仅仅是示例）使用这些端口。  
  
 如果不确定要使用哪个过程，请选择第一个选项。如果运行其他供应商提供的防火墙，您可能需要进行类似的更改。  
  
> [!IMPORTANT]
>  更改防火墙配置会对安全产生影响。建议您记录所做的更改，并在使用完示例后移除这些更改。  
  
### 预先启用示例程序  
  
1.  生成示例。  
  
2.  单击**“开始”**，单击**“运行”**，并键入 `firewall.cpl`。这将打开**“Windows 防火墙”**控制面板小程序。  
  
    > [!NOTE]
    >  必须具有更改防火墙设置的权限，才能运行需要能够通过 Windows 防火墙进行通信的示例。如果某些防火墙设置不可用，并且您的计算机连接到域，则系统管理员可以通过组策略控制这些设置。  
  
3.  完成以下特定于操作系统的步骤之一，允许程序通过 Windows 防火墙：  
  
    -   在 Windows 7 或 Windows Server 2008 r2 上，单击**“允许程序或功能通过 Windows 防火墙”**。单击**“更改设置”**，允许**“其他程序…”\[Another Program…\]**。  
  
    -   在 [!INCLUDE[wv](../../../../includes/wv-md.md)] 或 [!INCLUDE[lserver](../../../../includes/lserver-md.md)] 上，单击**“允许程序通过 Windows 防火墙”**。  
  
4.  在**“例外”**选项卡上，单击**“添加程序”**。  
  
5.  单击**“浏览”**按钮，并选择计划运行的示例的可执行文件。  
  
6.  重复步骤 4 和 5，直至添加了计划运行的所有示例的可执行文件。  
  
7.  单击**“确定”**关闭防火墙小程序。  
  
### 预先启用端口范围  
  
1.  单击**“开始”**，单击**“运行”**，并键入 `firewall.cpl`。这将打开**“Windows 防火墙”**控制面板小程序。  
  
2.  在 Windows 7 或 Windows Server 2008 R2 上，按以下步骤操作。  
  
    1.  单击 Windows 防火墙窗口左列中的**“高级设置”**。  
  
    2.  单击左列中的**“入站规则”**。  
  
    3.  单击右列中的**“新规则”\[New Rules\]**。  
  
    4.  选择**“端口”**，然后单击**“下一步”**。  
  
    5.  选择**“TCP”**，然后在**“特定本地端口”**字段中输入 `8000, 8001, 8002, 8003, 9000, 80, 443`。  
  
    6.  单击**“下一步”**。  
  
    7.  选择**“允许连接”**，然后单击**“下一步”**。  
  
    8.  选择**“域”**和**“私有”**，然后单击**“下一步”**。  
  
    9. 将此规则命名为 `WCF-WF 4.0 Samples`，然后单击**“完成”**。  
  
    10. 单击**“出站规则”**，然后重复步骤 c 到 h。  
  
3.  在 [!INCLUDE[wv](../../../../includes/wv-md.md)] 或 [!INCLUDE[lserver](../../../../includes/lserver-md.md)] 上，按以下步骤操作。  
  
    1.  单击**“允许程序通过 Windows 防火墙”**。  
  
    2.  在**“例外”**选项卡上，单击**“添加端口”**。  
  
    3.  输入名称，输入 8000 作为端口号，然后选择**“TCP”**选项。  
  
    4.  单击**“更改范围”**按钮，选择**“仅我的网络\(子网\)”**选项，然后单击**“确定”**。  
  
    5.  为端口 8001、8002、8003、9000、80 和 443 重复步骤 b 到 d。  
  
4.  单击**“确定”**关闭防火墙小程序。  
  
> [!NOTE]
>  使用完示例后，请移除任何防火墙例外。为此，请打开**“Windows 防火墙”**控制面板小程序，并移除在前面的过程中添加的任何程序或端口项。