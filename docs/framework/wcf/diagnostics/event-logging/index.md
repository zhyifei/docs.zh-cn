---
title: WCF 中的事件日志记录
ms.date: 03/30/2017
helpviewer_keywords:
- event logging [WCF]
ms.assetid: aac0530d-f44c-45a1-bada-e30e0677b41f
ms.openlocfilehash: 0c74b93be026007a5593372c938cf73e08fafb15
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/07/2019
ms.locfileid: "70797806"
---
# <a name="event-logging-in-wcf"></a><span data-ttu-id="e8ac6-102">WCF 中的事件日志记录</span><span class="sxs-lookup"><span data-stu-id="e8ac6-102">Event Logging in WCF</span></span>
<span data-ttu-id="e8ac6-103">Windows Communication Foundation （WCF）跟踪 Windows 事件日志中的内部事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-103">Windows Communication Foundation (WCF) traces internal events in the Windows event log.</span></span>  
  
## <a name="viewing-event-logs"></a><span data-ttu-id="e8ac6-104">查看事件日志</span><span class="sxs-lookup"><span data-stu-id="e8ac6-104">Viewing Event Logs</span></span>  
 <span data-ttu-id="e8ac6-105">默认情况下自动启用事件日志记录，并且没有禁用它的机制。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-105">Event logging is enabled automatically by default, and there is no mechanism to disable it.</span></span> <span data-ttu-id="e8ac6-106">可以使用事件查看器查看 WCF 记录的事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-106">Events logged by WCF can be viewed using the Event Viewer.</span></span> <span data-ttu-id="e8ac6-107">若要启动此工具，请单击 "**开始**"，单击 "**控制面板**"，双击 "**管理工具**"，然后双击 "**事件查看器**"。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-107">To launch this tool, click **Start**, click **Control Panel**, double-click **Administrative Tools**, and then double-click **Event Viewer**.</span></span>  
  
### <a name="application-event-log"></a><span data-ttu-id="e8ac6-108">应用程序事件日志</span><span class="sxs-lookup"><span data-stu-id="e8ac6-108">Application Event Log</span></span>  
 <span data-ttu-id="e8ac6-109">**应用程序事件日志**包含 WCF 生成的大多数事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-109">The **Application Event Log** contains most of the events generated by WCF.</span></span> <span data-ttu-id="e8ac6-110">大多数项都指示未能为应用程序启用某个功能。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-110">Most of the entries indicate that a particular feature failed to start up for an application.</span></span> <span data-ttu-id="e8ac6-111">示例包括：</span><span class="sxs-lookup"><span data-stu-id="e8ac6-111">Examples include:</span></span>  
  
- <span data-ttu-id="e8ac6-112">消息日志记录/跟踪：跟踪和消息日志记录失败时，WCF 会将事件写入事件日志。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-112">Message Logging/tracing: WCF writes an event to the event log when trace and message logging fails.</span></span> <span data-ttu-id="e8ac6-113">但是，并非每个跟踪故障都会触发事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-113">However, not every trace failure triggers an event.</span></span> <span data-ttu-id="e8ac6-114">为了防止事件日志被完全填充跟踪失败，WCF 为此类事件实现了10分钟的掉电期。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-114">To prevent the event log from being completely filled with traces failures, WCF implements a 10 minute blackout period for such an event.</span></span> <span data-ttu-id="e8ac6-115">这意味着，如果 WCF 将跟踪失败写入事件日志，则至少需要10分钟。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-115">This means that if WCF writes a trace failure to the event log, it will not do so again for at least 10 minutes.</span></span>  
  
- <span data-ttu-id="e8ac6-116">共享侦听器：当 WCF TCP 端口共享服务无法启动时，该服务将记录该事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-116">Shared Listener: The WCF TCP Port Sharing Service logs an event when it fails to start.</span></span>  
  
- <span data-ttu-id="e8ac6-117">CardSpace当服务启动失败时记录事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-117">CardSpace: Logs events when the service fails to start.</span></span>  
  
- <span data-ttu-id="e8ac6-118">严重和错误事件，如启动故障或崩溃</span><span class="sxs-lookup"><span data-stu-id="e8ac6-118">Critical and error events, such as startup failures or crashes</span></span>  
  
- <span data-ttu-id="e8ac6-119">消息日志记录打开：启用消息日志记录时记录事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-119">Message logging turned on: Logs events when message logging is turned on.</span></span> <span data-ttu-id="e8ac6-120">这将通知管理员可能在消息头和正文中记录应用程序特定的敏感信息。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-120">This is to notify the administrator that sensitive, application-specific information may be logged in message headers and bodies.</span></span>  
  
- <span data-ttu-id="e8ac6-121">当设置 `enableLoggingKnownPII` 文件的 `machineSettings` 元素中的 `machine.config` 属性时，将记录一个事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-121">An event is logged when the `enableLoggingKnownPII` attribute in the `machineSettings` element of the `machine.config` file is set.</span></span> <span data-ttu-id="e8ac6-122">此属性指定是否允许计算机上运行的任何应用程序来记录已知的个人身份信息 (PII)。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-122">This attribute specifies if any application running on the machine is permitted to log known personally identifiable information (PII).</span></span>  
  
- <span data-ttu-id="e8ac6-123">如果为特定应用程序将 `logKnownPii` 或 `app.config` 文件中的 `web.config` 属性设置为 `true` 以开启 PII 日志记录，但 `enableLoggingKnownPII` 文件的 `machineSettings` 元素中的 `machine.config` 属性设置为 `false`，则会记录一个事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-123">If the `logKnownPii` attribute in either the `app.config` or `web.config` file is set to `true` for a specific application to turn on PII logging, but the `enableLoggingKnownPII` attribute in the `machineSettings` element of the `machine.config` file is set to `false`, an event is logged.</span></span> <span data-ttu-id="e8ac6-124">此外，如果将 `logKnownPii` 和 `enableLoggingKnownPII` 都设置为 `true`，也会记录一个事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-124">In addition, if both `logKnownPii` and `enableLoggingKnownPII` are set to `true`, and event is logged.</span></span> <span data-ttu-id="e8ac6-125">有关这些配置设置的详细信息，请参阅[配置消息日志记录](../configuring-message-logging.md)主题的 "安全性" 部分。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-125">For more information on these configuration settings, see the Security section of the [Configuring Message Logging](../configuring-message-logging.md) topic.</span></span>  
  
### <a name="security-event-log"></a><span data-ttu-id="e8ac6-126">安全事件日志</span><span class="sxs-lookup"><span data-stu-id="e8ac6-126">Security Event Log</span></span>  
 <span data-ttu-id="e8ac6-127">**安全事件日志**包含由 WCF 记录的安全审核事件。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-127">The **Security Event Log** contains security audit events that are logged by WCF.</span></span>  
  
### <a name="system-event-log"></a><span data-ttu-id="e8ac6-128">系统事件日志</span><span class="sxs-lookup"><span data-stu-id="e8ac6-128">System Event Log</span></span>  
 <span data-ttu-id="e8ac6-129">WCF 不会记录**系统事件日志**中的任何内容。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-129">WCF does not log anything in the **System Event Log**.</span></span>  
  
### <a name="event-log-entries"></a><span data-ttu-id="e8ac6-130">事件日志项</span><span class="sxs-lookup"><span data-stu-id="e8ac6-130">Event Log Entries</span></span>  
 <span data-ttu-id="e8ac6-131">事件的**来源**是生成日志条目的程序集的名称。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-131">The **source** of an event is the name of the assembly that generates the log entry.</span></span>  
  
 <span data-ttu-id="e8ac6-132">事件日志项的类型用于指示事件的严重性。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-132">The type of an event log entry is used to indicate the severity of an event.</span></span> <span data-ttu-id="e8ac6-133">每个事件必须属于一种类型，应用程序在报告事件时将指示该类型。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-133">Each event must be of a single type, which the application indicates when it reports the event.</span></span> <span data-ttu-id="e8ac6-134">事件查看器使用该类型来确定在日志的列表视图中显示哪一个图标。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-134">The Event Viewer uses this type to determine which icon to display in the list view of the log.</span></span> <span data-ttu-id="e8ac6-135">有关事件日志项的不同事件类型，请参见 <xref:System.Diagnostics.EventLogEntryType>。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-135">For the different event type of an event log entry, see <xref:System.Diagnostics.EventLogEntryType>.</span></span>  
  
 <span data-ttu-id="e8ac6-136">在事件查看器中查看事件时单击 "详细信息" 时，事件查看器可能会通过 Internet 发送信息。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-136">When you click "more information" when viewing an event in the Event Viewer, the Event Viewer may send information across the Internet.</span></span> <span data-ttu-id="e8ac6-137">有关更多信息，请参见事件查看器帮助。</span><span class="sxs-lookup"><span data-stu-id="e8ac6-137">For more information, see the Event Viewer help.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e8ac6-138">请参阅</span><span class="sxs-lookup"><span data-stu-id="e8ac6-138">See also</span></span>

- [<span data-ttu-id="e8ac6-139">管理和诊断</span><span class="sxs-lookup"><span data-stu-id="e8ac6-139">Administration and Diagnostics</span></span>](../index.md)
- [<span data-ttu-id="e8ac6-140">事件常规参考</span><span class="sxs-lookup"><span data-stu-id="e8ac6-140">Events General Reference</span></span>](events-general-reference.md)
