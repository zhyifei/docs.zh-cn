---
title: "使用 WIF 3.5 至 WIF 4.5 构建的应用程序迁移指南"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 7a32fe6e-5f68-4693-9371-19411fa8063c
caps.latest.revision: 12
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 151a46a1d0f5ae5ae58508bdb3cab5bbb86f07ef
ms.contentlocale: zh-cn
ms.lasthandoff: 08/21/2017

---
# <a name="guidelines-for-migrating-an-application-built-using-wif-35-to-wif-45"></a><span data-ttu-id="48f33-102">使用 WIF 3.5 至 WIF 4.5 构建的应用程序迁移指南</span><span class="sxs-lookup"><span data-stu-id="48f33-102">Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5</span></span>
## <a name="applies-to"></a><span data-ttu-id="48f33-103">适用于</span><span class="sxs-lookup"><span data-stu-id="48f33-103">Applies To</span></span>  
  
-   <span data-ttu-id="48f33-104">Microsoft® Windows® Identity Foundation (WIF) 3.5 和 4.5。</span><span class="sxs-lookup"><span data-stu-id="48f33-104">Microsoft® Windows® Identity Foundation (WIF) 3.5 and 4.5.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="48f33-105">概述</span><span class="sxs-lookup"><span data-stu-id="48f33-105">Overview</span></span>  
 <span data-ttu-id="48f33-106">Windows Identity Foundation (WIF) 最初发布于 .NET 3.5 SP1 的使用阶段。</span><span class="sxs-lookup"><span data-stu-id="48f33-106">Windows Identity Foundation (WIF) was originally released in the .NET 3.5 SP1 timeframe.</span></span> <span data-ttu-id="48f33-107">那个版本的 WIF 称为 WIF 3.5。</span><span class="sxs-lookup"><span data-stu-id="48f33-107">That version of WIF is referred to as WIF 3.5.</span></span> <span data-ttu-id="48f33-108">它作为单独的运行时和 SDK 发布，这意味着启用 WIF 的应用程序在其上运行的每台计算机需要安装有 WIF 运行时，并且开发人员需要下载并安装 WIF SDK 以获取用于支持开发启用 WIF 的应用程序的 Visual Studio 模板和工具。</span><span class="sxs-lookup"><span data-stu-id="48f33-108">It was released as a separate runtime and SDK, which meant that every computer on which a WIF-enabled application ran had to have the WIF runtime installed and developers had to download and install the WIF SDK to get the Visual Studio templates and tooling that enabled development of WIF-enabled applications.</span></span> <span data-ttu-id="48f33-109">从 .NET 4.5 开始，WIF 已完全集成到 .NET Framework 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-109">Beginning with .NET 4.5, WIF has been fully integrated into the .NET Framework.</span></span> <span data-ttu-id="48f33-110">因此不再需要单独的运行时，并且可以使用 Visual Studio 扩展管理器在 Visual Studio 2012 中安装 WIF 工具。</span><span class="sxs-lookup"><span data-stu-id="48f33-110">A separate runtime is no longer needed and the WIF tooling can be installed in Visual Studio 2012 by using the Visual Studio Extensions Manager.</span></span> <span data-ttu-id="48f33-111">此版本的 WIF 称为 WIF 4.5。</span><span class="sxs-lookup"><span data-stu-id="48f33-111">This version of WIF is referred to as WIF 4.5.</span></span>  
  
 <span data-ttu-id="48f33-112">WIF 到 .NET 的集成需要对 WIF API 图面做出一些更改。</span><span class="sxs-lookup"><span data-stu-id="48f33-112">The integration of WIF into .NET necessitated several changes in the WIF API surface.</span></span> <span data-ttu-id="48f33-113">WIF 4.5 包括新的命名空间、配置元素的一些更改以及适用于 Visual Studio 的新工具。</span><span class="sxs-lookup"><span data-stu-id="48f33-113">WIF 4.5 includes new namespaces, some changes to configuration elements, and new tooling for Visual Studio.</span></span> <span data-ttu-id="48f33-114">本主题提供可用于帮助将使用 WIF 3.5 生成的应用程序迁移到 WIF 4.5 的指南。</span><span class="sxs-lookup"><span data-stu-id="48f33-114">This topic provides guidance that you can use to help you migrate applications built using WIF 3.5 to WIF 4.5.</span></span> <span data-ttu-id="48f33-115">在某些情况下，可能需要在运行 Windows 8 或 Windows Server 2012 的计算机上运行使用 WIF 3.5 生成的旧版应用程序。</span><span class="sxs-lookup"><span data-stu-id="48f33-115">There may be scenarios in which you need to run legacy applications built using WIF 3.5 on computers that are running Windows 8 or Windows Server 2012.</span></span> <span data-ttu-id="48f33-116">本主题也提供有关如何为这些操作系统启用 WIF 3.5 的指南。</span><span class="sxs-lookup"><span data-stu-id="48f33-116">This topic also provides guidance about how to enable WIF 3.5 for these operating systems.</span></span>  
  
## <a name="changes-required-for-wif-45"></a><span data-ttu-id="48f33-117">针对 WIF 4.5 所需的更改</span><span class="sxs-lookup"><span data-stu-id="48f33-117">Changes Required for WIF 4.5</span></span>  
 <span data-ttu-id="48f33-118">本部分介绍将 WIF 3.5 应用程序迁移到 WIF 4.5 所需进行的更改。</span><span class="sxs-lookup"><span data-stu-id="48f33-118">This section describes the changes that are required to migrate a WIF 3.5 application to WIF 4.5.</span></span>  
  
### <a name="assembly-and-namespace-changes"></a><span data-ttu-id="48f33-119">程序集和命名空间更改</span><span class="sxs-lookup"><span data-stu-id="48f33-119">Assembly and Namespace Changes</span></span>  
 <span data-ttu-id="48f33-120">在 WIF 3.5 中，所有的 WIF 类都包含在 `Microsoft.IdentityModel` 程序集 (microsoft.identitymicrosoft.identitymodel.dll) 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-120">In WIF 3.5, all of the WIF classes were contained in the `Microsoft.IdentityModel` assembly (microsoft.identitymicrosoft.identitymodel.dll).</span></span> <span data-ttu-id="48f33-121">在 WIF 4.5 中，已将 WIF 类拆分在以下程序集中：`mscorlib` (mscorlib.dll)、`System.IdentityModel` (System.IdentityModel.dll)、`System.IdentityModel.Services` (System.IdentityModel.Services.dll) 和 `System.ServiceModel` (System.ServiceModel.dll)。</span><span class="sxs-lookup"><span data-stu-id="48f33-121">In WIF 4.5, the WIF classes have been split across the following assemblies: `mscorlib` (mscorlib.dll), `System.IdentityModel` (System.IdentityModel.dll), `System.IdentityModel.Services` (System.IdentityModel.Services.dll), and `System.ServiceModel` (System.ServiceModel.dll).</span></span>  
  
 <span data-ttu-id="48f33-122">WIF 3.5 类都包含在其中一个 `Microsoft.IdentityModel` 命名空间中；例如，`Microsoft.IdentityModel`、`Microsoft.IdentityModel.Tokens` 和 `Microsoft.IdentityModel.Web` 等。</span><span class="sxs-lookup"><span data-stu-id="48f33-122">The WIF 3.5 classes were all contained in one of the `Microsoft.IdentityModel` namespaces; for example, `Microsoft.IdentityModel`, `Microsoft.IdentityModel.Tokens`, `Microsoft.IdentityModel.Web`, and so on.</span></span> <span data-ttu-id="48f33-123">在 WIF 4.5 中，WIF 类现已分布在 [System.IdentityModel](http://go.microsoft.com/fwlink/?LinkId=272004) 命名空间、<xref:System.Security.Claims?displayProperty=fullName> 命名空间和 <xref:System.ServiceModel.Security?displayProperty=fullName> 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="48f33-123">In WIF 4.5, the WIF classes are now spread across the [System.IdentityModel](http://go.microsoft.com/fwlink/?LinkId=272004) namespaces, the <xref:System.Security.Claims?displayProperty=fullName> namespace, and the <xref:System.ServiceModel.Security?displayProperty=fullName> namespace.</span></span> <span data-ttu-id="48f33-124">除此重组外，一些 WIF 3.5 类已被放置在 WIF 4.5 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-124">In addition to this reorganization, some WIF 3.5 classes have been dropped in WIF 4.5.</span></span>  
  
 <span data-ttu-id="48f33-125">下表显示了一些更重要的 WIF 4.5 命名空间以及它们所包含的类的类型。</span><span class="sxs-lookup"><span data-stu-id="48f33-125">The following table shows some of the more important WIF 4.5 namespaces and the kind of classes they contain.</span></span> <span data-ttu-id="48f33-126">有关命名空间在 WIF 3.5 和 WIF 4.5 之间的映射关系以及有关已被放置在 WIF 4.5 中的命名空间和类的详细信息，请参阅 [WIF 3.5 和 WIF 4.5 之间的命名空间映射](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md)。</span><span class="sxs-lookup"><span data-stu-id="48f33-126">For more detailed information about how namespaces map between WIF 3.5 and WIF 4.5 and about namespaces and classes that have been dropped in WIF 4.5, see [Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md).</span></span>  
  
|<span data-ttu-id="48f33-127">WIF 4.5 命名空间</span><span class="sxs-lookup"><span data-stu-id="48f33-127">WIF 4.5 Namespace</span></span>|<span data-ttu-id="48f33-128">描述</span><span class="sxs-lookup"><span data-stu-id="48f33-128">Description</span></span>|  
|-----------------------|-----------------|  
|<xref:System.IdentityModel?displayProperty=fullName>|<span data-ttu-id="48f33-129">包含表示 cookie 转换、安全令牌服务和专业 XML 字典读取器的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-129">Contains classes that represent cookie transforms, security token services, and specialized XML dictionary readers.</span></span> <span data-ttu-id="48f33-130">包含来自以下 WIF 3.5 命名空间的类：`Microsoft.IdentityModel`、`Microsoft.IdentityModel.SecurityTokenService` 和 `Microsoft.IdentityModel.Threading`。</span><span class="sxs-lookup"><span data-stu-id="48f33-130">Contains classes from the following WIF 3.5 namespaces: `Microsoft.IdentityModel`, `Microsoft.IdentityModel.SecurityTokenService`, and `Microsoft.IdentityModel.Threading`.</span></span>|  
|<xref:System.Security.Claims?displayProperty=fullName>|<span data-ttu-id="48f33-131">包含表示声明、基于声明的标识、基于声明的主体和其他基于声明的标识模型项目的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-131">Contains classes that represent claims, claims-based identities, claims based principals, and other claims based identity model artifacts.</span></span> <span data-ttu-id="48f33-132">包含来自 `Microsoft.IdentityModel.Claims` 命名空间的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-132">Contains classes from the `Microsoft.IdentityModel.Claims` namespace.</span></span>|  
|<xref:System.IdentityModel.Tokens?displayProperty=fullName>|<span data-ttu-id="48f33-133">包含表示安全令牌、安全令牌处理程序和其他安全令牌项目的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-133">Contains classes that represent security tokens, security token handlers, and other security token artifacts.</span></span> <span data-ttu-id="48f33-134">包含来自以下 WIF 3.5 命名空间的类：`Microsoft.IdentityModel.Tokens`、`Microsoft.IdentityModel.Tokens.Saml11` 和 `Microsoft.IdentityModel.Tokens.Saml2`。</span><span class="sxs-lookup"><span data-stu-id="48f33-134">Contains classes from the following WIF 3.5 namespaces: `Microsoft.IdentityModel.Tokens`, `Microsoft.IdentityModel.Tokens.Saml11`, and `Microsoft.IdentityModel.Tokens.Saml2`.</span></span>|  
|<xref:System.IdentityModel.Services?displayProperty=fullName>|<span data-ttu-id="48f33-135">包含被动（WS 联合身份验证）方案中使用的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-135">Contains classes that are used in passive (WS-Federation) scenarios.</span></span> <span data-ttu-id="48f33-136">包含来自 `Microsoft.IdentityModel.Web` 命名空间的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-136">Contains classes from the `Microsoft.IdentityModel.Web` namespace.</span></span>|  
|<xref:System.ServiceModel.Security?displayProperty=fullName>|<span data-ttu-id="48f33-137">表示 WCF 协定、通道、服务主机和主动 (WS-Trust) 方案中使用的其他项目的类现在都在此命名空间中。</span><span class="sxs-lookup"><span data-stu-id="48f33-137">Classes that represent WCF contracts, channels, service hosts and other artifacts that are used in active (WS-Trust) scenarios are now in this namespace.</span></span> <span data-ttu-id="48f33-138">在 WIF 3.5 中，这些类位于 `Microsoft.IdentityModel.Protocols.WSTrust` 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="48f33-138">In WIF 3.5 , these classes were in the `Microsoft.IdentityModel.Protocols.WSTrust` namespace.</span></span>|  
  
> [!IMPORTANT]
>  <span data-ttu-id="48f33-139">以下 `System.IdentityModel` 命名空间包含实现 WCF 基于声明的标识模型的类：<xref:System.IdentityModel.Claims?displayProperty=fullName>、<xref:System.IdentityModel.Policy?displayProperty=fullName> 和 <xref:System.IdentityModel.Selectors?displayProperty=fullName>。</span><span class="sxs-lookup"><span data-stu-id="48f33-139">The following `System.IdentityModel` namespaces contain classes that implement the WCF claims-based identity model: <xref:System.IdentityModel.Claims?displayProperty=fullName>, <xref:System.IdentityModel.Policy?displayProperty=fullName>, and <xref:System.IdentityModel.Selectors?displayProperty=fullName>.</span></span> <span data-ttu-id="48f33-140">WCF 基于声明的标识模型已被 WIF 取代。</span><span class="sxs-lookup"><span data-stu-id="48f33-140">The WCF claims-based identity model is superseded by WIF.</span></span> <span data-ttu-id="48f33-141">在基于 WIF 生成解决方案时，不应该使用这三个命名空间中的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-141">You should not use classes in these three namespaces when building solutions based on WIF.</span></span>  
  
### <a name="changes-due-to-net-integration"></a><span data-ttu-id="48f33-142">因 .NET 集成而进行的更改</span><span class="sxs-lookup"><span data-stu-id="48f33-142">Changes Due to .NET Integration</span></span>  
 <span data-ttu-id="48f33-143">WIF 现已集成到 .NET Framework 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-143">WIF is now integrated into the .NET Framework.</span></span> <span data-ttu-id="48f33-144">大多数 .NET 标识和主体类现在都派生自 <xref:System.Security.Claims.ClaimsIdentity?displayProperty=fullName> 和 <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=fullName>。</span><span class="sxs-lookup"><span data-stu-id="48f33-144">Most .NET identity and principal classes now derive from <xref:System.Security.Claims.ClaimsIdentity?displayProperty=fullName> and <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=fullName>.</span></span> <span data-ttu-id="48f33-145">在 WIF 4.5 中进行了以下更改：</span><span class="sxs-lookup"><span data-stu-id="48f33-145">The results in the following changes in WIF 4.5:</span></span>  
  
-   <span data-ttu-id="48f33-146">表示声明、标识和主体的 WIF 类现存在于 <xref:System.Security.Claims?displayProperty=fullName> 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="48f33-146">WIF classes that represent claims, identities, and principals now exist in the <xref:System.Security.Claims?displayProperty=fullName> namespace.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="48f33-147"><xref:System.IdentityModel.Claims?displayProperty=fullName> 命名空间包含表示 WCF 基于声明的标识模型中的项目的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-147">The <xref:System.IdentityModel.Claims?displayProperty=fullName> namespace contains classes that represent artifacts in the WCF claims-based identity model.</span></span> <span data-ttu-id="48f33-148">许多这些类拥有与 WIF 类相同的名称，如 `Claims`。</span><span class="sxs-lookup"><span data-stu-id="48f33-148">Many of these classes have names that are the same as WIF classes; for example, `Claims`.</span></span> <span data-ttu-id="48f33-149">在基于 WIF 生成解决方案时，请不要使用这些类。</span><span class="sxs-lookup"><span data-stu-id="48f33-149">Do not use these classes when building solutions based on WIF.</span></span>  
  
-   <span data-ttu-id="48f33-150">.NET 标识和主体类现在直接派生自 <xref:System.Security.Claims.ClaimsIdentity?displayProperty=fullName> 和 <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=fullName>，表示基于声明的标识和主体。</span><span class="sxs-lookup"><span data-stu-id="48f33-150">.NET identity and principal classes now derive directly from <xref:System.Security.Claims.ClaimsIdentity?displayProperty=fullName> and <xref:System.Security.Claims.ClaimsPrincipal?displayProperty=fullName>, which represent claims-based identities and principals.</span></span> <span data-ttu-id="48f33-151">因此，不再需要 WIF 3.5 接口 `IClaimsIdentity` 和 `IClaimsPrincipal`，并且 WIF 4.5 中也不再支持这两个接口。</span><span class="sxs-lookup"><span data-stu-id="48f33-151">For this reason, the WIF 3.5 interfaces `IClaimsIdentity` and `IClaimsPrincipal` are no longer needed and are not available in WIF 4.5.</span></span>  
  
-   <span data-ttu-id="48f33-152">因为 .NET 标识和主体类（如 <xref:System.Security.Principal.WindowsIdentity?displayProperty=fullName> 和 <xref:System.Security.Principal.WindowsPrincipal?displayProperty=fullName>）现在派生自 <xref:System.Security.Claims.ClaimsIdentity> 和 <xref:System.Security.Claims.ClaimsPrincipal>，所以它们内置有声明功能。</span><span class="sxs-lookup"><span data-stu-id="48f33-152">Because.NET identity and principal classes such as <xref:System.Security.Principal.WindowsIdentity?displayProperty=fullName> and <xref:System.Security.Principal.WindowsPrincipal?displayProperty=fullName> now derive from <xref:System.Security.Claims.ClaimsIdentity> and <xref:System.Security.Claims.ClaimsPrincipal>, they have claims functionality built-in.</span></span> <span data-ttu-id="48f33-153">因此，不再需要之前存在于 WIF 3.5 中特定于声明的标识和主体类（如 `WindowsClaimsIdentity` 和 `WindowsClaimsPrincipal`），并且它们也不存在于 WIF 4.5 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-153">For this reason, claims-specific identity and principal classes such as `WindowsClaimsIdentity` and `WindowsClaimsPrincipal` that were present in WIF 3.5 are no longer needed and do not exist in WIF 4.5.</span></span>  
  
### <a name="other-changes-to-wif-functionality"></a><span data-ttu-id="48f33-154">对 WIF 功能的其他更改</span><span class="sxs-lookup"><span data-stu-id="48f33-154">Other Changes to WIF Functionality</span></span>  
 <span data-ttu-id="48f33-155">除命名空间更改和由于与 .NET 集成而进行的更改之外，还在 WIF 4.5 中进行了以下 WIF 功能的常规更改。</span><span class="sxs-lookup"><span data-stu-id="48f33-155">In addition to the namespace changes and the changes due to integration with .NET, the following general changes to WIF functionality occur in WIF 4.5.</span></span>  
  
-   <span data-ttu-id="48f33-156">删除了 `Microsoft.IdentityModel.ExceptionMapper` 类，它提供使你能够将异常映射到特定 SOAP 错误的功能。</span><span class="sxs-lookup"><span data-stu-id="48f33-156">The `Microsoft.IdentityModel.ExceptionMapper` class, which provided functionality that enabled you to map exceptions to specific SOAP Faults, is removed.</span></span>  
  
-   <span data-ttu-id="48f33-157">大幅度地减少了异常图面。</span><span class="sxs-lookup"><span data-stu-id="48f33-157">The exception surface has been greatly reduced.</span></span>  
  
-   <span data-ttu-id="48f33-158">删除了许多定义协议或特定于 WS-* 的常数的类，例如 `Microsoft.IdentityModel.WSAddressing10Constants` 类，它定义与 WS-Addressing 1.0 相关的常数的。</span><span class="sxs-lookup"><span data-stu-id="48f33-158">Many of the classes that defined protocol or WS-* specific constants have been removed; for example, the `Microsoft.IdentityModel.WSAddressing10Constants` class, which defined constants related to WS-Addressing 1.0.</span></span>  
  
-   <span data-ttu-id="48f33-159">删除了 `Microsoft.IdentityModel.WindowsTokenService` 命名空间中的声明为 Windows 令牌服务 (c2wts) 以及其关联的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-159">The Claims to Windows Token Service (c2wts) and its associated classes in the `Microsoft.IdentityModel.WindowsTokenService` namespace are removed.</span></span>  
  
### <a name="wif-configuration-changes"></a><span data-ttu-id="48f33-160">WIF 配置更改</span><span class="sxs-lookup"><span data-stu-id="48f33-160">WIF Configuration Changes</span></span>  
 <span data-ttu-id="48f33-161">配置文件中的许多更改是由 WIF 4.5 中的命名空间更新所造成的。</span><span class="sxs-lookup"><span data-stu-id="48f33-161">Many of the changes in the configuration file have been caused by namespace updates in WIF 4.5.</span></span> <span data-ttu-id="48f33-162">例如，以 `<httpModules>` 部分中的以下 WIF 3.5 条目为例，将 WS 联合身份验证管理器添加到应用程序：</span><span class="sxs-lookup"><span data-stu-id="48f33-162">For example, consider the following WIF 3.5 entry in the `<httpModules>` section to add the WS-Federation Authentication Manager to an application:</span></span>  
  
```xml  
<add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=abcd … 5678" />  
```  
  
 <span data-ttu-id="48f33-163">WIF 4.5 中更新了此条目来包括新的命名空间和程序集版本：</span><span class="sxs-lookup"><span data-stu-id="48f33-163">This entry has been updated in WIF 4.5 to include the new namespaces and assembly version:</span></span>  
  
```xml  
<add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=abcd … 5678"/>  
```  
  
 <span data-ttu-id="48f33-164">以下列表枚举了针对 WIF 4.5 的配置文件进行的主要更改。</span><span class="sxs-lookup"><span data-stu-id="48f33-164">The following list enumerates the major changes to the configuration file for WIF 4.5.</span></span>  
  
-   <span data-ttu-id="48f33-165">`<microsoft.identityModel>` 部分现在为 [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) 部分。</span><span class="sxs-lookup"><span data-stu-id="48f33-165">The `<microsoft.identityModel>` section is now the [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) section.</span></span>  
  
-   <span data-ttu-id="48f33-166">`<service>` 元素现在为 [\<identityConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) 元素。</span><span class="sxs-lookup"><span data-stu-id="48f33-166">The `<service>` element is now the [\<identityConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element.</span></span>  
  
-   <span data-ttu-id="48f33-167">已将新的部分 [\<system.identityModel.services>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md) 添加到在被动（WS 联合身份验证）方案中控制行为的特定设置。</span><span class="sxs-lookup"><span data-stu-id="48f33-167">A new section, [\<system.identityModel.services>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md), has been added to specify settings that control behavior in passive (WS-Federation) scenarios.</span></span>  
  
-   <span data-ttu-id="48f33-168">已将 [\<federationConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md) 元素及其子元素从 WIF 3.5 中的 `<service>` 元素移动到新的 `<system.identityModel.services>` 元素。</span><span class="sxs-lookup"><span data-stu-id="48f33-168">The [\<federationConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md) element and its child elements have been moved from the `<service>` element in WIF 3.5 to the new `<system.identityModel.services>` element .</span></span>  
  
-   <span data-ttu-id="48f33-169">可以直接在 WIF 3.5 中的 `<service>` 元素下在服务级别处指定的多个元素已被限制为在 [\<securityTokenHandlerConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md) 元素下指定。</span><span class="sxs-lookup"><span data-stu-id="48f33-169">Several elements that could be specified at the service-level directly under the `<service>` element in WIF 3.5 have been restricted to being specified under the [\<securityTokenHandlerConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md) element.</span></span> <span data-ttu-id="48f33-170">（出于后向兼容性目的，仍可以在 WIF 4.5 中的 [\<identityConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) 元素下指定它们。）</span><span class="sxs-lookup"><span data-stu-id="48f33-170">(They may still be specified under the [\<identityConfiguration>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element in WIF 4.5 for backward compatibility.)</span></span>  
  
 <span data-ttu-id="48f33-171">有关 WIF 4.5 配置元素的完整列表，请参阅 [WIF 配置架构](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/index.md)。</span><span class="sxs-lookup"><span data-stu-id="48f33-171">For a complete list of the WIF 4.5 configuration elements, see [WIF Configuration Schema](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/index.md).</span></span>  
  
### <a name="visual-studio-tooling-changes"></a><span data-ttu-id="48f33-172">Visual Studio 工具更改</span><span class="sxs-lookup"><span data-stu-id="48f33-172">Visual Studio Tooling Changes</span></span>  
 <span data-ttu-id="48f33-173">WIF 3.5 SDK 提供独立的 Federation Utility (FedUtil.exe (FedUtil))，用于将启用 WIF 的应用程序中的标识管理外包给安全令牌服务 (STS)。</span><span class="sxs-lookup"><span data-stu-id="48f33-173">The WIF 3.5 SDK offered a stand-alone federation utility, FedUtil.exe (FedUtil), that you could use to outsource identity management in WIF-enabled applications to a security token service (STS).</span></span> <span data-ttu-id="48f33-174">此工具将 WIF 设置添加到应用程序配置文件，使应用程序能够从一个或多个 STS 获取安全令牌，并通过“添加 STS 服务引用”按钮出现在 Visual Studio 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-174">This tool added WIF settings to the application configuration file to enable the application to get security tokens from one or more STSs, and was surfaced in Visual Studio through the **Add STS Service Reference** button.</span></span> <span data-ttu-id="48f33-175">FedUtil 不随附 WIF 4.5。</span><span class="sxs-lookup"><span data-stu-id="48f33-175">FedUtil does not ship with WIF 4.5.</span></span> <span data-ttu-id="48f33-176">相反，WIF 4.5 支持名为用于 Visual Studio 2012 的标识和访问工具的新 Visual Studio 扩展，可用于通过将标识管理外包给 STS 所需的 WIF 设置修改应用程序的配置文件。</span><span class="sxs-lookup"><span data-stu-id="48f33-176">Instead, WIF 4.5 supports a new Visual Studio extension named the Identity and Access Tool for Visual Studio 2012 that you can use to modify your application’s configuration file with the WIF settings required to outsource identity management to an STS.</span></span> <span data-ttu-id="48f33-177">标识和访问工具也实现了名为本地 STS 的 STS，可用于测试启用 WIF 的应用程序。</span><span class="sxs-lookup"><span data-stu-id="48f33-177">The Identity and Access Tool also implements an STS called Local STS that you can use to test your WIF-enabled applications.</span></span> <span data-ttu-id="48f33-178">在许多情况下，使用此功能便无需生成自定义 STS，通常需要在 WIF 3.5 中生成此 STS 以测试正在开发的解决方案。</span><span class="sxs-lookup"><span data-stu-id="48f33-178">In many cases, this feature obviates the need to build custom STSs that were often necessary in WIF 3.5 to test solutions under development.</span></span> <span data-ttu-id="48f33-179">因此，Visual Studio 2012 中不再支持此类 STS 模板；然而，支持 STS 开发的类仍然在 WIF 4.5 中可用。</span><span class="sxs-lookup"><span data-stu-id="48f33-179">For this reason, the STS templates are no longer supported in Visual Studio 2012; however, the classes that support the development of STSs are still available in WIF 4.5.</span></span>  
  
 <span data-ttu-id="48f33-180">可以从 Visual Studio 中的扩展和更新管理器安装标识和访问工具，或者从代码库中的以下页面进行下载：[代码库上用于 Visual Studio 2012 的标识和访问工具](http://go.microsoft.com/fwlink/?LinkID=245849)。</span><span class="sxs-lookup"><span data-stu-id="48f33-180">You can install the Identity and Access Tool from the Extensions and Updates Manager in Visual Studio or you can download it from the following page on Code Gallery: [Identity and Access Tool for Visual Studio 2012 on Code Gallery](http://go.microsoft.com/fwlink/?LinkID=245849).</span></span> <span data-ttu-id="48f33-181">下表中汇总了 Visual Studio 工具更改：</span><span class="sxs-lookup"><span data-stu-id="48f33-181">The Visual Studio tooling changes are summarized in the following list:</span></span>  
  
-   <span data-ttu-id="48f33-182">删除了“添加 STS 服务引用”功能。</span><span class="sxs-lookup"><span data-stu-id="48f33-182">The Add STS Service Reference functionality is removed.</span></span> <span data-ttu-id="48f33-183">替换为了标识和访问工具。</span><span class="sxs-lookup"><span data-stu-id="48f33-183">The replacement is the Identity and Access Tool.</span></span>  
  
-   <span data-ttu-id="48f33-184">删除了 Visual Studio STS 模板。</span><span class="sxs-lookup"><span data-stu-id="48f33-184">The Visual Studio STS templates are removed.</span></span> <span data-ttu-id="48f33-185">可以使用通过标识和访问工具所提供的本地 STS 来测试使用 WIF 开发的标识解决方案。</span><span class="sxs-lookup"><span data-stu-id="48f33-185">You can use the Local STS that is available through the Identity and Access Tool to test identity solutions that you develop with WIF.</span></span> <span data-ttu-id="48f33-186">可以修改本地 STS 配置以自定义其服务的声明。</span><span class="sxs-lookup"><span data-stu-id="48f33-186">The Local STS configuration can be modified to customize the claims that it serves.</span></span>  
  
-   <span data-ttu-id="48f33-187">WIF 4.5 中不提供独立的 Federation Utility (FedUtil)。</span><span class="sxs-lookup"><span data-stu-id="48f33-187">The stand-alone Federation Utility (FedUtil) is not available in WIF 4.5.</span></span> <span data-ttu-id="48f33-188">可以使用标识和访问工具修改配置文件，以将标识管理外包给 STS。</span><span class="sxs-lookup"><span data-stu-id="48f33-188">You can use the Identity and Access Tool to modify your configuration files to outsource identity management to an STS.</span></span>  
  
 <span data-ttu-id="48f33-189">有关标识和访问工具的详细信息，请参阅[用于 Visual Studio 2012 的标识和访问工具](../../../docs/framework/security/identity-and-access-tool-for-vs.md)</span><span class="sxs-lookup"><span data-stu-id="48f33-189">For more information about the Identity and Access Tool, see [Identity and Access Tool for Visual Studio 2012](../../../docs/framework/security/identity-and-access-tool-for-vs.md)</span></span>  
  
<a name="BKMK_ToolingChanges"></a>   
### <a name="passive-ws-federation-scenarios"></a><span data-ttu-id="48f33-190">被动（WS 联合身份验证）方案：</span><span class="sxs-lookup"><span data-stu-id="48f33-190">Passive (WS-Federation) Scenarios:</span></span>  
  
-   <span data-ttu-id="48f33-191">已将支持被动方案的类移动到 <xref:System.IdentityModel.Services?displayProperty=fullName> 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="48f33-191">Classes that support passive scenarios have been moved to the <xref:System.IdentityModel.Services?displayProperty=fullName> namespace.</span></span> <span data-ttu-id="48f33-192">在 WIF 3.5 中，这些类位于 `Microsoft.IdentityModel.Web` 命名空间中。</span><span class="sxs-lookup"><span data-stu-id="48f33-192">In WIF 3.5 these classes were in the `Microsoft.IdentityModel.Web` namespace.</span></span>  
  
-   <span data-ttu-id="48f33-193">已将 `Microsoft.IdentityModel.Web.Configuration` 命名空间中的类移动到 <xref:System.IdentityModel.Services.Configuration?displayProperty=fullName> 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-193">The classes in the `Microsoft.IdentityModel.Web.Configuration` namespace have been moved to <xref:System.IdentityModel.Services.Configuration?displayProperty=fullName>.</span></span> <span data-ttu-id="48f33-194">这些类表示被动方案中特定于配置的对象。</span><span class="sxs-lookup"><span data-stu-id="48f33-194">These classes represent objects specific to configuration in passive scenarios.</span></span>  
  
-   <span data-ttu-id="48f33-195">不再支持 `FederatedPasssiveSignInControl`；在 WIF 4.5 中删除了 `Microsoft.IdentityModel.Web.Controls` 命名空间中的所有类。</span><span class="sxs-lookup"><span data-stu-id="48f33-195">The `FederatedPasssiveSignInControl` is no longer supported; all classes in the `Microsoft.IdentityModel.Web.Controls` namespace have been removed from WIF 4.5.</span></span>  
  
-   <span data-ttu-id="48f33-196">WS 联合身份验证模块 (<xref:System.IdentityModel.Services.WSFederationAuthenticationModule>) 注销功能与 WIF 3.5 中的不同。</span><span class="sxs-lookup"><span data-stu-id="48f33-196">The WS-Federation Authentication Module (<xref:System.IdentityModel.Services.WSFederationAuthenticationModule>) sign-out functionality is different than WIF 3.5.</span></span> <span data-ttu-id="48f33-197">有关 WIF 4.5 中注销工作原理的详细信息，请参阅 <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> 类主题。</span><span class="sxs-lookup"><span data-stu-id="48f33-197">For more details about how sign-out works in WIF 4.5, see the <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> class topic.</span></span>  
  
### <a name="active-wcfws-trust-scenarios"></a><span data-ttu-id="48f33-198">主动 (WCF/WS-Trust) 方案：</span><span class="sxs-lookup"><span data-stu-id="48f33-198">Active (WCF/WS-Trust) Scenarios:</span></span>  
  
-   <span data-ttu-id="48f33-199">在 WIF 4.5 中，`Microsoft.IdentityModel.Protocols.WSTrust` 命名空间主要被拆分为两个命名空间。</span><span class="sxs-lookup"><span data-stu-id="48f33-199">The `Microsoft.IdentityModel.Protocols.WSTrust` namespace has been split mainly into two namespaces in WIF 4.5.</span></span> <span data-ttu-id="48f33-200">表示特定于 WS-Trust 协议的项目的类现位于 <xref:System.IdentityModel.Protocols.WSTrust?displayProperty=fullName> 中。</span><span class="sxs-lookup"><span data-stu-id="48f33-200">Classes that represent artifacts that are specific to the WS-Trust protocol are now in <xref:System.IdentityModel.Protocols.WSTrust?displayProperty=fullName>.</span></span> <span data-ttu-id="48f33-201">这包括如 <xref:System.IdentityModel.Protocols.WSTrust.RequestSecurityToken> 等类。</span><span class="sxs-lookup"><span data-stu-id="48f33-201">This includes classes like <xref:System.IdentityModel.Protocols.WSTrust.RequestSecurityToken>.</span></span> <span data-ttu-id="48f33-202">已将表示在 WCF 应用程序中使用 WS-Trust 所涉及的服务协定、通道、服务主机和其他项目的类移动到 <xref:System.ServiceModel.Security?displayProperty=fullName> 中，例如 <xref:System.ServiceModel.Security.IWSTrust13AsyncContract> 接口。</span><span class="sxs-lookup"><span data-stu-id="48f33-202">Classes that represent service contracts, channels, service hosts and other artifacts that are involved in using WS-Trust in WCF applications have been moved to <xref:System.ServiceModel.Security?displayProperty=fullName>; for example, the <xref:System.ServiceModel.Security.IWSTrust13AsyncContract> interface.</span></span>  
  
-   <span data-ttu-id="48f33-203">极大地简化了为使用 WIF 而对 WCF 应用程序进行的配置。</span><span class="sxs-lookup"><span data-stu-id="48f33-203">Configuring a WCF application to use WIF has been greatly simplified.</span></span> <span data-ttu-id="48f33-204">之前必须将 `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement` 添加为行为扩展，随后使用此功能通过指定 `<federatedServiceHostConfiguration>` 元素将 WIF 楔入服务行为。</span><span class="sxs-lookup"><span data-stu-id="48f33-204">Previously the `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement` had to be added as a behavior extension and this functionality was then used to wedge WIF into the service behavior by specifying a `<federatedServiceHostConfiguration>` element.</span></span> <span data-ttu-id="48f33-205">WIF 4.5 已更紧密地与 WCF 集成。</span><span class="sxs-lookup"><span data-stu-id="48f33-205">WIF 4.5 has been more tightly integrated with WCF.</span></span> <span data-ttu-id="48f33-206">现在，通过在 `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` 元素上指定 `useIdentityConfiguration` 特性可以在 WCF 服务上启用 WIF，如下列 XML 中所示：</span><span class="sxs-lookup"><span data-stu-id="48f33-206">Now you enable WIF on a WCF service by specifying the `useIdentityConfiguration` attribute on the `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` element as in the following XML:</span></span>  
  
    ```xml  
    <serviceCredentials useIdentityConfiguration="true">  
        <!--Certificate added by Identity And Access VS Package.  Subject='CN=localhost', Issuer='CN=localhost'. Make sure you have this certificate installed. The Identity and Access tool does not install this certificate.-->  
        <serviceCertificate findValue="CN=localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectDistinguishedName" />  
    </serviceCredentials>  
    ```  
  
-   <span data-ttu-id="48f33-207">在 WIF 4.5 中，必须在服务主机上指定由主动 (WCF) 服务使用的服务证书。</span><span class="sxs-lookup"><span data-stu-id="48f33-207">In WIF 4.5 the service certificate used by an active (WCF) service must be specified on the service host.</span></span> <span data-ttu-id="48f33-208">在配置中，可以通过 `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>`/`<serviceCertificate>` 元素来执行此操作，如之前的示例所示。</span><span class="sxs-lookup"><span data-stu-id="48f33-208">In configuration, you can do this through the `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>`/`<serviceCertificate>` element as shown in the preceding example.</span></span> <span data-ttu-id="48f33-209">在 WIF 3.5 中，可以通过 WIF `<service>` 元素的 `<serviceCertificate>` 子元素指定服务证书。</span><span class="sxs-lookup"><span data-stu-id="48f33-209">In WIF 3.5 the service certificate could be specified through the `<serviceCertificate>` child element of the WIF `<service>` element.</span></span> <span data-ttu-id="48f33-210">WIF 4.5 中不存在此功能；请改为在 `<serviceCredentials>` 元素下指定 `<serviceCertificate>` 元素。</span><span class="sxs-lookup"><span data-stu-id="48f33-210">This functionality does not exist in WIF 4.5; specify the `<serviceCertificate>` element under the `<serviceCredentials>` element instead.</span></span>  
  
-   <span data-ttu-id="48f33-211">用于将 WIF 3.5 楔入 WCF 的类不再存在。</span><span class="sxs-lookup"><span data-stu-id="48f33-211">The classes used to wedge WIF 3.5 into WCF no longer exist.</span></span> <span data-ttu-id="48f33-212">这包括 `Microsoft.IdentityModel.Tokens` 命名空间中的以下类：`FederatedSecurityTokenManager`、`FederatedServiceCredentials`、`IdentityModelServiceAuthorizationManager` 和 `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement` 类。</span><span class="sxs-lookup"><span data-stu-id="48f33-212">This includes the following classes in the `Microsoft.IdentityModel.Tokens` namespace: `FederatedSecurityTokenManager`, `FederatedServiceCredentials`, and `IdentityModelServiceAuthorizationManager`, as well as the `Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement` class.</span></span>  
  
## <a name="enabling-wif-35-in-windows-8"></a><span data-ttu-id="48f33-213">在 Windows 8 中启用 WIF 3.5</span><span class="sxs-lookup"><span data-stu-id="48f33-213">Enabling WIF 3.5 in Windows 8</span></span>  
 <span data-ttu-id="48f33-214">由于 WIF 4.5 是 .NET 4.5 的一部分，所以它在运行 Windows 8 和 Windows Server 2012 的计算机上自动启用，并且使用 WIF 4.5 生成的应用程序将默认在 Windows 8 和 Windows Server 2012 下运行。</span><span class="sxs-lookup"><span data-stu-id="48f33-214">Because WIF 4.5 is part of .NET 4.5, it is automatically enabled on computers running Windows 8 and Windows Server 2012 and applications that are built using WIF 4.5 will run under Windows 8 or Windows Server 2012 by default.</span></span> <span data-ttu-id="48f33-215">然而，你可能需要在运行 Windows 8 或 Windows Server 2012 的计算机上运行使用 WIF 3.5 生成的应用程序。</span><span class="sxs-lookup"><span data-stu-id="48f33-215">However, you may need to run applications that were built using WIF 3.5 on a computer that is running Windows 8 or Windows Server 2012.</span></span> <span data-ttu-id="48f33-216">在此情况下，需要在目标计算机上启用 WIF 3.5。</span><span class="sxs-lookup"><span data-stu-id="48f33-216">In this case, you need to enable WIF 3.5 on the target computer.</span></span> <span data-ttu-id="48f33-217">在运行 Windows 8 的计算机上，可以使用部署映像服务和管理 (DISM) 工具来实现这点。</span><span class="sxs-lookup"><span data-stu-id="48f33-217">On a computer running Windows 8, you can do this by using the Deployment Image Servicing and Management (DISM) tool.</span></span> <span data-ttu-id="48f33-218">在运行 Windows Server 2012 的计算机上，可以使用 DISM 工具，或使用 Windows PowerShell `Add-WindowsFeature` cmdlet。</span><span class="sxs-lookup"><span data-stu-id="48f33-218">On a computer running Windows Server 2012, you can use the DISM tool or you can use the Windows PowerShell `Add-WindowsFeature` cmdlet.</span></span> <span data-ttu-id="48f33-219">在这两种情况下，可以在命令行或从 Windows PowerShell 环境内部调用适当的命令。</span><span class="sxs-lookup"><span data-stu-id="48f33-219">In both cases, the appropriate commands can be invoked either at the command line or from inside the Windows PowerShell environment.</span></span>  
  
 <span data-ttu-id="48f33-220">以下命令将演示如何从命令行或 Windows PowerShell 环境内部使用 DISM 工具。</span><span class="sxs-lookup"><span data-stu-id="48f33-220">The following commands show how to use the DISM tool from either the command line or from inside the Windows PowerShell environment.</span></span> <span data-ttu-id="48f33-221">默认情况下，DISM PowerShell 模块包含在 Windows 8 和 Windows Server 2012 中，无需进行导入操作。</span><span class="sxs-lookup"><span data-stu-id="48f33-221">By default, the DISM PowerShell module is included in Windows 8 and Windows Server 2012 and does not need to be imported.</span></span> <span data-ttu-id="48f33-222">有关将 DISM 用于 Windows PowerShell 的详细信息，请参阅[如何在 Windows PowerShell 中使用 DISM](http://go.microsoft.com/fwlink/?LinkId=254419)。</span><span class="sxs-lookup"><span data-stu-id="48f33-222">For more information about using DISM with Windows PowerShell, see [How to Use DISM in Windows PowerShell](http://go.microsoft.com/fwlink/?LinkId=254419).</span></span>  
  
 <span data-ttu-id="48f33-223">使用 DISM 启用 WIF 3.5：</span><span class="sxs-lookup"><span data-stu-id="48f33-223">To enable WIF 3.5 using DISM:</span></span>  
  
```  
dism /online /enable-feature:windows-identity-foundation  
```  
  
 <span data-ttu-id="48f33-224">使用 DISM 禁用 WIF 3.5：</span><span class="sxs-lookup"><span data-stu-id="48f33-224">To disable WIF 3.5 using DISM:</span></span>  
  
```  
dism /online /disable-feature:windows-identity-foundation  
```  
  
 <span data-ttu-id="48f33-225">检查已使用 DISM 启用或禁用的功能：</span><span class="sxs-lookup"><span data-stu-id="48f33-225">To check which features are enabled or disabled using DISM:</span></span>  
  
```  
dism /online /get-features  
```  
  
 <span data-ttu-id="48f33-226">或者，在运行 Windows Server 2012 的计算机上，可以使用 Windows PowerShell `Add-WindowsFeature` cmdlet 来启用 WIF 3.5。</span><span class="sxs-lookup"><span data-stu-id="48f33-226">Alternatively, on computers running Windows Server 2012, you can enable WIF 3.5 by using the Windows PowerShell `Add-WindowsFeature` cmdlet.</span></span> <span data-ttu-id="48f33-227">若要通过命令行执行此操作，可以输入以下命令：</span><span class="sxs-lookup"><span data-stu-id="48f33-227">To do so from the command line, you can enter the following command:</span></span>  
  
```  
powershell "add-windowsfeature windows-identity-foundation"  
```  
  
 <span data-ttu-id="48f33-228">从 Windows PowerShell 环境内部可以直接输入命令：</span><span class="sxs-lookup"><span data-stu-id="48f33-228">From inside the Windows PowerShell environment, you can enter the command directly:</span></span>  
  
```  
add-windowsfeature windows-identity-foundation  
```  
  
> [!NOTE]
>  <span data-ttu-id="48f33-229">由于 WIF 3.5 和 WIF 4.5 中有许多类共享相同的名称，所以在同时使用 WIF 3.5 和 WIF 4.5 时，请确保使用完全限定的类名或使用命名空间别名，以区分 WIF 3.5 和 WIF 4.5 中的类。</span><span class="sxs-lookup"><span data-stu-id="48f33-229">Because many of the classes in WIF 3.5 and WIF 4.5 share the same names, when you are using both WIF 3.5 and WIF 4.5 together, be sure to either use fully qualified class names or use namespace aliases to distinguish between classes in WIF 3.5 and WIF 4.5.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="48f33-230">另请参阅</span><span class="sxs-lookup"><span data-stu-id="48f33-230">See Also</span></span>  
 <span data-ttu-id="48f33-231">[WIF 配置架构](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/index.md) </span><span class="sxs-lookup"><span data-stu-id="48f33-231">[WIF Configuration Schema](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/index.md) </span></span>  
 <span data-ttu-id="48f33-232">[WIF 3.5 和 WIF 4.5 之间的命名空间映射](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md) </span><span class="sxs-lookup"><span data-stu-id="48f33-232">[Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md) </span></span>  
 <span data-ttu-id="48f33-233">[Windows Identity Foundation 4.5 中的新增功能](../../../docs/framework/security/whats-new-in-wif.md) </span><span class="sxs-lookup"><span data-stu-id="48f33-233">[What's New in Windows Identity Foundation 4.5](../../../docs/framework/security/whats-new-in-wif.md) </span></span>  
 [<span data-ttu-id="48f33-234">Identity and Access Tool for Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="48f33-234">Identity and Access Tool for Visual Studio 2012</span></span>](../../../docs/framework/security/identity-and-access-tool-for-vs.md)

