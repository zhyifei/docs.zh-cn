---
title: 依赖属性概述
description: 由 WPF 属性系统支持的属性称为依赖属性。 本概述介绍 WPF 属性系统以及依赖属性的功能。
ms.date: 06/06/2018
dev_langs:
- csharp
- vb
helpviewer_keywords:
- properties [WPF], attached
- properties [WPF], overview
- styles [WPF]
- attached properties [WPF]
- data binding [WPF]
- dependency properties [WPF]
- resources [WPF], references to
ms.assetid: d119d00c-3afb-48d6-87a0-c4da4f83dee5
ms.openlocfilehash: 36370eb54e75df9bf2bf8eb9e073bbbee995e287
ms.sourcegitcommit: d955cb4c681d68cf301d410925d83f25172ece86
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/07/2018
ms.locfileid: "34827002"
---
# <a name="dependency-properties-overview"></a><span data-ttu-id="b08a6-104">依赖属性概述</span><span class="sxs-lookup"><span data-stu-id="b08a6-104">Dependency properties overview</span></span>

<span data-ttu-id="b08a6-105">Windows Presentation Foundation (WPF) 提供一组服务，这些服务可用于扩展类型的[属性](../../../standard/base-types/common-type-system.md#Properties)的功能。</span><span class="sxs-lookup"><span data-stu-id="b08a6-105">Windows Presentation Foundation (WPF) provides a set of services that can be used to extend the functionality of a type's [property](../../../standard/base-types/common-type-system.md#Properties).</span></span> <span data-ttu-id="b08a6-106">这些服务通常统称为 WPF 属性系统。</span><span class="sxs-lookup"><span data-stu-id="b08a6-106">Collectively, these services are typically referred to as the WPF property system.</span></span> <span data-ttu-id="b08a6-107">由 WPF 属性系统支持的属性称为依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-107">A property that is backed by the WPF property system is known as a dependency property.</span></span> <span data-ttu-id="b08a6-108">本概述介绍 WPF 属性系统以及依赖属性的功能。</span><span class="sxs-lookup"><span data-stu-id="b08a6-108">This overview describes the WPF property system and the capabilities of a dependency property.</span></span> <span data-ttu-id="b08a6-109">这包括如何在 XAML 和在代码中使用现有依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-109">This includes how to use existing dependency properties in XAML and in code.</span></span> <span data-ttu-id="b08a6-110">本概述还介绍依赖属性所特有的方面（如依赖属性元数据），并说明如何在自定义类中创建自己的依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-110">This overview also introduces specialized aspects of dependency properties, such as dependency property metadata, and how to create your own dependency property in a custom class.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b08a6-111">系统必备</span><span class="sxs-lookup"><span data-stu-id="b08a6-111">Prerequisites</span></span>
<span data-ttu-id="b08a6-112">本主题假设你在 .NET 类型系统和面向对象的编程方面有一些基础知识。</span><span class="sxs-lookup"><span data-stu-id="b08a6-112">This topic assumes that you have some basic knowledge of the .NET type system and object-oriented programming.</span></span> <span data-ttu-id="b08a6-113">为了能理解本主题中的示例，还应了解 XAML 并知道如何编写 WPF 应用程序。</span><span class="sxs-lookup"><span data-stu-id="b08a6-113">In order to follow the examples in this topic, you should also understand XAML and know how to write WPF applications.</span></span> <span data-ttu-id="b08a6-114">有关详细信息，请参阅[演练：我的第一个 WPF 桌面应用程序](../../../../docs/framework/wpf/getting-started/walkthrough-my-first-wpf-desktop-application.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-114">For more information, see [Walkthrough: My first WPF desktop application](../../../../docs/framework/wpf/getting-started/walkthrough-my-first-wpf-desktop-application.md).</span></span>  
  
## <a name="dependency-properties-and-clr-properties"></a><span data-ttu-id="b08a6-115">依赖属性和 CLR 属性</span><span class="sxs-lookup"><span data-stu-id="b08a6-115">Dependency properties and CLR properties</span></span>
 <span data-ttu-id="b08a6-116">在 WPF 中，属性通常公开为标准 .NET [属性](../../../standard/base-types/common-type-system.md#Properties)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-116">In WPF, properties are typically exposed as standard .NET [properties](../../../standard/base-types/common-type-system.md#Properties).</span></span> <span data-ttu-id="b08a6-117">在基本级别，可以直接与这些属性交互，而不必了解它们是以依赖属性的形式实现的。</span><span class="sxs-lookup"><span data-stu-id="b08a6-117">At a basic level, you could interact with these properties directly and never know that they are implemented as a dependency property.</span></span> <span data-ttu-id="b08a6-118">但是，应当熟悉 WPF 属性系统的部分或全部功能，以便利用这些功能。</span><span class="sxs-lookup"><span data-stu-id="b08a6-118">However, you should become familiar with some or all of the features of the WPF property system, so that you can take advantage of these features.</span></span>

<span data-ttu-id="b08a6-119">依赖属性的用途在于提供一种方法来基于其他输入的值计算属性值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-119">The purpose of dependency properties is to provide a way to compute the value of a property based on the value of other inputs.</span></span> <span data-ttu-id="b08a6-120">这些其他输入可能包括系统属性（如主题和用户首选项）、实时属性确定机制（如数据绑定和动画/情节提要）、重用模板（如资源和样式）或者通过与元素树中其他元素的父子关系来公开的值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-120">These other inputs might include system properties such as themes and user preference, just-in-time property determination mechanisms such as data binding and animations/storyboards, multiple-use templates such as resources and styles, or values known through parent-child relationships with other elements in the element tree.</span></span> <span data-ttu-id="b08a6-121">另外，可以通过实现依赖属性来提供独立验证、默认值、监视其他属性的更改的回叫以及可以基于可能的运行时信息来强制指定属性值的系统。</span><span class="sxs-lookup"><span data-stu-id="b08a6-121">In addition, a dependency property can be implemented to provide self-contained validation, default values, callbacks that monitor changes to other properties, and a system that can coerce property values based on potentially runtime information.</span></span> <span data-ttu-id="b08a6-122">派生类还可以通过重写依赖属性元数据（而不是重写现有属性的实际实现或者创建新属性）来更改现有属性的某些具体特征。</span><span class="sxs-lookup"><span data-stu-id="b08a6-122">Derived classes can also change some specific characteristics of an existing property by overriding dependency property metadata, rather than overriding the actual implementation of existing properties or creating new properties.</span></span>

<span data-ttu-id="b08a6-123">在 SDK 参考中，可以根据某个属性的托管引用页上是否存在“依赖属性信息”部分来确定该属性是否为依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-123">In the SDK reference, you can identify which property is a dependency property by the presence of the Dependency Property Information section on the managed reference page for that property.</span></span> <span data-ttu-id="b08a6-124">“依赖属性信息”部分包括一个指向该依赖属性的 <xref:System.Windows.DependencyProperty> 标识符字段的链接，还包括一个为该属性设置的元数据选项列表、每个类的重写信息以及其他详细信息。</span><span class="sxs-lookup"><span data-stu-id="b08a6-124">The Dependency Property Information section includes a link to the <xref:System.Windows.DependencyProperty> identifier field for that dependency property, and also includes a list of the metadata options that are set for that property, per-class override information, and other details.</span></span>

## <a name="dependency-properties-back-clr-properties"></a><span data-ttu-id="b08a6-125">依赖属性支持 CLR 属性</span><span class="sxs-lookup"><span data-stu-id="b08a6-125">Dependency properties back CLR properties</span></span>
<span data-ttu-id="b08a6-126">依赖属性和 WPF 属性系统通过提供一个支持属性的类型来扩展属性功能，这是使用专用字段支持该属性的标准模式的替代实现方法。</span><span class="sxs-lookup"><span data-stu-id="b08a6-126">Dependency properties and the WPF property system extend property functionality by providing a type that backs a property, as an alternative implementation to the standard pattern of backing the property with a private field.</span></span> <span data-ttu-id="b08a6-127">此类型的名称为 <xref:System.Windows.DependencyProperty>。</span><span class="sxs-lookup"><span data-stu-id="b08a6-127">The name of this type is <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="b08a6-128">定义 WPF 属性系统的另一个重要类型是 <xref:System.Windows.DependencyObject>。</span><span class="sxs-lookup"><span data-stu-id="b08a6-128">The other important type that defines the WPF property system is <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="b08a6-129"><xref:System.Windows.DependencyObject> 定义可以注册和拥有依赖属性的基类。</span><span class="sxs-lookup"><span data-stu-id="b08a6-129"><xref:System.Windows.DependencyObject> defines the base class that can register and own a dependency property.</span></span>

<span data-ttu-id="b08a6-130">下面列出了与依赖属性一起使用的术语：</span><span class="sxs-lookup"><span data-stu-id="b08a6-130">The following lists the terminology that is used with dependency properties:</span></span>

- <span data-ttu-id="b08a6-131">**依赖属性：**<xref:System.Windows.DependencyProperty> 支持的属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-131">**Dependency property:** A property that is backed by a <xref:System.Windows.DependencyProperty>.</span></span>

- <span data-ttu-id="b08a6-132">**依赖属性标识符：** 一个 <xref:System.Windows.DependencyProperty> 实例，在注册依赖属性时以返回值形式获取它，之后将其存储为类的静态成员。</span><span class="sxs-lookup"><span data-stu-id="b08a6-132">**Dependency property identifier:** A <xref:System.Windows.DependencyProperty> instance, which is obtained as a return value when registering a dependency property, and then stored as a static member of a class.</span></span> <span data-ttu-id="b08a6-133">对于与 WPF 属性系统交互的许多 API，此标识符用作一个参数。</span><span class="sxs-lookup"><span data-stu-id="b08a6-133">This identifier is used as a parameter for many of the APIs that interact with the WPF property system.</span></span>

- <span data-ttu-id="b08a6-134">**CLR“包装器”：** 属性的实际 get 和 set 实现。</span><span class="sxs-lookup"><span data-stu-id="b08a6-134">**CLR "wrapper":** The actual get and set implementations for the property.</span></span> <span data-ttu-id="b08a6-135">这些实现通过在 <xref:System.Windows.DependencyObject.GetValue%2A> 和 <xref:System.Windows.DependencyObject.SetValue%2A> 调用中使用依赖属性标识符来并入依赖属性标识符，从而使用 WPF 属性系统为属性提供支持。</span><span class="sxs-lookup"><span data-stu-id="b08a6-135">These implementations incorporate the dependency property identifier by using it in the <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> calls, thus providing the backing for the property using the WPF property system.</span></span>

<span data-ttu-id="b08a6-136">下面的示例定义 `IsSpinning` 依赖属性，并说明 <xref:System.Windows.DependencyProperty> 标识符与它所支持的属性之间的关系。</span><span class="sxs-lookup"><span data-stu-id="b08a6-136">The following example defines the `IsSpinning` dependency property, and shows the relationship of the <xref:System.Windows.DependencyProperty> identifier to the property that it backs.</span></span>

[!code-csharp[PropertiesOvwSupport#DPFormBasic](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#dpformbasic)]
[!code-vb[PropertiesOvwSupport#DPFormBasic](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#dpformbasic)]  
  
<span data-ttu-id="b08a6-137">属性及其支持性 <xref:System.Windows.DependencyProperty> 字段的命名约定非常重要。</span><span class="sxs-lookup"><span data-stu-id="b08a6-137">The naming convention of the property and its backing <xref:System.Windows.DependencyProperty> field is important.</span></span> <span data-ttu-id="b08a6-138">字段总是与属性同名，但其后面追加了 `Property` 后缀。</span><span class="sxs-lookup"><span data-stu-id="b08a6-138">The name of the field is always the name of the property, with the suffix `Property` appended.</span></span> <span data-ttu-id="b08a6-139">有关此约定及其原因的详细信息，请参阅[自定义依赖属性](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-139">For more information about this convention and the reasons for it, see [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span></span>  

## <a name="setting-property-values"></a><span data-ttu-id="b08a6-140">设置属性值</span><span class="sxs-lookup"><span data-stu-id="b08a6-140">Setting property values</span></span>
<span data-ttu-id="b08a6-141">可以在代码或 XAML 中设置属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-141">You can set properties either in code or in XAML.</span></span>

### <a name="setting-property-values-in-xaml"></a><span data-ttu-id="b08a6-142">在 XAML 中设置属性值</span><span class="sxs-lookup"><span data-stu-id="b08a6-142">Setting property values in XAML</span></span> 
<span data-ttu-id="b08a6-143">下面的 XAML 示例将按钮的背景色指定为红色。</span><span class="sxs-lookup"><span data-stu-id="b08a6-143">The following XAML example specifies the background color of a button as red.</span></span> <span data-ttu-id="b08a6-144">此示例演示这样一种情况：在所生成的代码中，WPF XAML 分析器将 XAML 属性的简单字符串值类型转换为 WPF 类型（一个 <xref:System.Windows.Media.Color>，通过 <xref:System.Windows.Media.SolidColorBrush> 实现）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-144">This example illustrates a case where the simple string value for a XAML attribute is type-converted by the WPF XAML parser into a WPF type (a <xref:System.Windows.Media.Color>, by way of a <xref:System.Windows.Media.SolidColorBrush>) in the generated code.</span></span>

[!code-xaml[PropertiesOvwSupport#MostBasicProperty](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml#mostbasicproperty)]

<span data-ttu-id="b08a6-145">XAML 支持多种设置属性的语法格式。</span><span class="sxs-lookup"><span data-stu-id="b08a6-145">XAML supports a variety of syntax forms for setting properties.</span></span> <span data-ttu-id="b08a6-146">要对特定的属性使用哪种语法取决于该属性所使用的值类型以及其他因素（例如，是否存在类型转换器）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-146">Which syntax to use for a particular property will depend on the value type that a property uses, as well as other factors such as the presence of a type converter.</span></span> <span data-ttu-id="b08a6-147">有关属性设置的 XAML 语法的详细信息，请参阅 [XAML 概述 (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) 和 [XAML 语法详述](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-147">For more information on XAML syntax for property setting, see [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) and [XAML Syntax In Detail](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md).</span></span>

<span data-ttu-id="b08a6-148">作为非属性语法的示例，下面的 XAML 示例显示了另一种按钮背景。</span><span class="sxs-lookup"><span data-stu-id="b08a6-148">As an example of non-attribute syntax, the following XAML example shows another button background.</span></span> <span data-ttu-id="b08a6-149">这一次不是设置简单的纯色，而是将背景设置为图像，用一个元素表示该图像并将该图像的源指定为嵌套元素的属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-149">This time rather than setting a simple solid color, the background is set to an image, with an element representing that image and the source of that image specified as an attribute of the nested element.</span></span> <span data-ttu-id="b08a6-150">这是属性元素语法的示例。</span><span class="sxs-lookup"><span data-stu-id="b08a6-150">This is an example of property element syntax.</span></span>

[!code-xaml[PropertiesOvwSupport#PESyntaxProperty](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml#pesyntaxproperty)]

### <a name="setting-properties-in-code"></a><span data-ttu-id="b08a6-151">在代码中设置属性</span><span class="sxs-lookup"><span data-stu-id="b08a6-151">Setting properties in code</span></span>
 <span data-ttu-id="b08a6-152">在代码中设置依赖属性值通常只是调用由 [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]“包装器”公开的 set 实现。</span><span class="sxs-lookup"><span data-stu-id="b08a6-152">Setting dependency property values in code is typically just a call to the set implementation exposed by the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] "wrapper".</span></span>

[!code-csharp[PropertiesOvwSupport#ProceduralPropertySet](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml.cs#proceduralpropertyset)]
[!code-vb[PropertiesOvwSupport#ProceduralPropertySet](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page1.xaml.vb#proceduralpropertyset)]

<span data-ttu-id="b08a6-153">获取属性值实质上也是在调用 get“包装器”实现：</span><span class="sxs-lookup"><span data-stu-id="b08a6-153">Getting a property value is also essentially a call to the get "wrapper" implementation:</span></span>

[!code-csharp[PropertiesOvwSupport#ProceduralPropertyGet](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/Page1.xaml.cs#proceduralpropertyget)]
 [!code-vb[PropertiesOvwSupport#ProceduralPropertyGet](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page1.xaml.vb#proceduralpropertyget)]

<span data-ttu-id="b08a6-154">还可以直接调用属性系统 [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] <xref:System.Windows.DependencyObject.GetValue%2A> 和 <xref:System.Windows.DependencyObject.SetValue%2A>。</span><span class="sxs-lookup"><span data-stu-id="b08a6-154">You can also call the property system [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A> directly.</span></span> <span data-ttu-id="b08a6-155">如果使用的是现有属性，则上述操作通常不是必需的（使用包装器会更方便，并能够更好地向开发人员工具公开属性），但是在某些情况下适合直接调用 [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="b08a6-155">This is not typically necessary if you are using existing properties (the wrappers are more convenient, and provide better exposure of the property for developer tools), but calling the [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] directly is appropriate for certain scenarios.</span></span>

<span data-ttu-id="b08a6-156">还可以在 XAML 中设置属性，然后通过代码隐藏在代码中访问这些属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-156">Properties can be also set in XAML and then accessed later in code, through code-behind.</span></span> <span data-ttu-id="b08a6-157">有关详细信息，请参阅 [WPF 中的代码隐藏和 XAML](../../../../docs/framework/wpf/advanced/code-behind-and-xaml-in-wpf.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-157">For details, see [Code-Behind and XAML in WPF](../../../../docs/framework/wpf/advanced/code-behind-and-xaml-in-wpf.md).</span></span>

## <a name="property-functionality-provided-by-a-dependency-property"></a><span data-ttu-id="b08a6-158">由依赖属性提供的属性功能</span><span class="sxs-lookup"><span data-stu-id="b08a6-158">Property functionality provided by a dependency property</span></span>
<span data-ttu-id="b08a6-159">依赖属性提供用来扩展属性功能的功能，这与字段支持的属性相反。</span><span class="sxs-lookup"><span data-stu-id="b08a6-159">A dependency property provides functionality that extends the functionality of a property as opposed to a property that is backed by a field.</span></span> <span data-ttu-id="b08a6-160">通常，此类功能代表或支持以下特定功能之一：</span><span class="sxs-lookup"><span data-stu-id="b08a6-160">Often, such functionality represents or supports one of the following specific features:</span></span>

- [<span data-ttu-id="b08a6-161">资源</span><span class="sxs-lookup"><span data-stu-id="b08a6-161">Resources</span></span>](#resources)

- [<span data-ttu-id="b08a6-162">数据绑定</span><span class="sxs-lookup"><span data-stu-id="b08a6-162">Data binding</span></span>](#data-binding)

- [<span data-ttu-id="b08a6-163">样式</span><span class="sxs-lookup"><span data-stu-id="b08a6-163">Styles</span></span>](#styles)

- [<span data-ttu-id="b08a6-164">动画</span><span class="sxs-lookup"><span data-stu-id="b08a6-164">Animations</span></span>](#animations)

- [<span data-ttu-id="b08a6-165">元数据重写</span><span class="sxs-lookup"><span data-stu-id="b08a6-165">Metadata overrides</span></span>](#metadata-overrides)

- [<span data-ttu-id="b08a6-166">属性值继承</span><span class="sxs-lookup"><span data-stu-id="b08a6-166">Property value inheritance</span></span>](#property-value-inheritance)

- [<span data-ttu-id="b08a6-167">WPF 设计器集成</span><span class="sxs-lookup"><span data-stu-id="b08a6-167">WPF Designer integration</span></span>](#wpf-designer-integration)

### <a name="resources"></a><span data-ttu-id="b08a6-168">资源</span><span class="sxs-lookup"><span data-stu-id="b08a6-168">Resources</span></span>
<span data-ttu-id="b08a6-169">依赖属性值可以通过引用资源来设置。</span><span class="sxs-lookup"><span data-stu-id="b08a6-169">A dependency property value can be set by referencing a resource.</span></span> <span data-ttu-id="b08a6-170">资源通常指定为页面根元素或应用程序的 `Resources` 属性值（通过这些位置可以非常方便地访问资源）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-170">Resources are typically specified as the `Resources` property value of a page root element, or of the application (these locations enable the most convenient access to the resource).</span></span> <span data-ttu-id="b08a6-171">以下示例演示如何定义 <xref:System.Windows.Media.SolidColorBrush> 资源。</span><span class="sxs-lookup"><span data-stu-id="b08a6-171">The following example shows how to define a <xref:System.Windows.Media.SolidColorBrush> resource.</span></span>

[!code-xaml[PropertiesOvwSupport#ResourcesResource](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page2.xaml#resourcesresource)]

<span data-ttu-id="b08a6-172">在定义该资源之后，可以引用该资源并使用它来提供属性值：</span><span class="sxs-lookup"><span data-stu-id="b08a6-172">Once the resource is defined, you can reference the resource and use it to provide a property value:</span></span>

[!code-xaml[PropertiesOvwSupport#ResourcesReference](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page2.xaml#resourcesreference)]

<span data-ttu-id="b08a6-173">这个特定资源称为 [DynamicResource 标记扩展](../../../../docs/framework/wpf/advanced/dynamicresource-markup-extension.md)（在 WPF XAML 中，可以使用静态或动态资源引用）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-173">This particular resource is referenced as a [DynamicResource Markup Extension](../../../../docs/framework/wpf/advanced/dynamicresource-markup-extension.md) (in WPF XAML, you can use either a static or dynamic resource reference).</span></span> <span data-ttu-id="b08a6-174">若要使用动态资源引用，必须设置为依赖属性，因此它专门是由 WPF 属性系统启用的动态资源引用用法。</span><span class="sxs-lookup"><span data-stu-id="b08a6-174">To use a dynamic resource reference, you must be setting to a dependency property, so it is specifically the dynamic resource reference usage that is enabled by the WPF property system.</span></span> <span data-ttu-id="b08a6-175">有关详细信息，请参阅 [XAML 资源](../../../../docs/framework/wpf/advanced/xaml-resources.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-175">For more information, see [XAML Resources](../../../../docs/framework/wpf/advanced/xaml-resources.md).</span></span>

> [!NOTE]
> <span data-ttu-id="b08a6-176">资源被视为本地值，这意味着，如果设置另一个本地值，该资源引用将被消除。</span><span class="sxs-lookup"><span data-stu-id="b08a6-176">Resources are treated as a local value, which means that if you set another local value, you will eliminate the resource reference.</span></span> <span data-ttu-id="b08a6-177">有关详细信息，请参阅[依赖属性值优先级](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-177">For more information, see [Dependency Property Value Precedence](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md).</span></span>

### <a name="data-binding"></a><span data-ttu-id="b08a6-178">数据绑定</span><span class="sxs-lookup"><span data-stu-id="b08a6-178">Data binding</span></span>
<span data-ttu-id="b08a6-179">依赖属性可以通过数据绑定来引用值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-179">A dependency property can reference a value through data binding.</span></span> <span data-ttu-id="b08a6-180">数据绑定通过特定标记扩展语法（在 XAML 中）或 <xref:System.Windows.Data.Binding> 对象（在代码中）起作用。</span><span class="sxs-lookup"><span data-stu-id="b08a6-180">Data binding works through a specific markup extension syntax in XAML, or the <xref:System.Windows.Data.Binding> object in code.</span></span> <span data-ttu-id="b08a6-181">使用数据绑定，最终属性值的确定将延迟到运行时，在运行时，将从数据源获取属性值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-181">With data binding, the final property value determination is deferred until run time, at which time the value is obtained from a data source.</span></span>

<span data-ttu-id="b08a6-182">以下示例使用在 XAML 中声明的绑定来设置 <xref:System.Windows.Controls.Button> 的 <xref:System.Windows.Controls.ContentControl.Content%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-182">The following example sets the <xref:System.Windows.Controls.ContentControl.Content%2A> property for a <xref:System.Windows.Controls.Button>, using a binding declared in XAML.</span></span> <span data-ttu-id="b08a6-183">该绑定使用继承的数据上下文和 <xref:System.Windows.Data.XmlDataProvider> 数据源（未显示）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-183">The binding uses an inherited data context and an <xref:System.Windows.Data.XmlDataProvider> data source (not shown).</span></span> <span data-ttu-id="b08a6-184">绑定本身通过数据源中的 <xref:System.Windows.Data.Binding.XPath%2A> 指定所需的源属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-184">The binding itself specifies the desired source property by <xref:System.Windows.Data.Binding.XPath%2A> within the data source.</span></span>

[!code-xaml[PropertiesOvwSupport#BasicInlineBinding](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#basicinlinebinding)]

> [!NOTE]
> <span data-ttu-id="b08a6-185">绑定被视为本地值，这意味着，如果设置另一个本地值，该绑定将被消除。</span><span class="sxs-lookup"><span data-stu-id="b08a6-185">Bindings are treated as a local value, which means that if you set another local value, you will eliminate the binding.</span></span> <span data-ttu-id="b08a6-186">有关详细信息，请参阅[依赖属性值优先级](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-186">For details, see [Dependency Property Value Precedence](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md).</span></span>

<span data-ttu-id="b08a6-187">为了生成数据绑定操作的 <xref:System.Windows.DependencyObject> 源属性值的更改通知，依赖属性或 <xref:System.Windows.DependencyObject> 类本身不支持 <xref:System.ComponentModel.INotifyPropertyChanged>。</span><span class="sxs-lookup"><span data-stu-id="b08a6-187">Dependency properties, or the <xref:System.Windows.DependencyObject> class, do not natively support <xref:System.ComponentModel.INotifyPropertyChanged> for purposes of producing notifications of changes in <xref:System.Windows.DependencyObject> source property value for data binding operations.</span></span> <span data-ttu-id="b08a6-188">有关如何创建要用在数据绑定中并且可以向数据绑定目标报告变化的属性的详细信息，请参阅[数据绑定概述](../../../../docs/framework/wpf/data/data-binding-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-188">For more information on how to create properties for use in data binding that can report changes to a data binding target, see [Data Binding Overview](../../../../docs/framework/wpf/data/data-binding-overview.md).</span></span>

### <a name="styles"></a><span data-ttu-id="b08a6-189">样式</span><span class="sxs-lookup"><span data-stu-id="b08a6-189">Styles</span></span>
<span data-ttu-id="b08a6-190">样式和模板是使用依赖属性的两个主要激发方案。</span><span class="sxs-lookup"><span data-stu-id="b08a6-190">Styles and templates are two of the chief motivating scenarios for using dependency properties.</span></span> <span data-ttu-id="b08a6-191">在设置定义应用程序[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] 的属性时，样式尤其有用。</span><span class="sxs-lookup"><span data-stu-id="b08a6-191">Styles are particularly useful for setting properties that define application [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="b08a6-192">在 XAML 中，通常将样式定义为资源。</span><span class="sxs-lookup"><span data-stu-id="b08a6-192">Styles are typically defined as resources in XAML.</span></span> <span data-ttu-id="b08a6-193">样式与属性系统交互，因为它们通常包含特定属性的“资源库”，以及基于另一个属性的实时值更改属性值的“触发器”。</span><span class="sxs-lookup"><span data-stu-id="b08a6-193">Styles interact with the property system because they typically contain "setters" for particular properties, as well as "triggers" that change a property value based on the real-time value for another property.</span></span>

<span data-ttu-id="b08a6-194">以下示例创建非常简单的样式（该样式在 <xref:System.Windows.FrameworkElement.Resources%2A> 字典中定义，未显示），然后将该样式直接应用于 <xref:System.Windows.Controls.Button> 的 <xref:System.Windows.FrameworkElement.Style%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-194">The following example creates a very simple style (which would be defined inside a <xref:System.Windows.FrameworkElement.Resources%2A> dictionary, not shown), then applies that style directly to the <xref:System.Windows.FrameworkElement.Style%2A> property for a <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="b08a6-195">样式中的资源库将带样式 <xref:System.Windows.Controls.Button> 的 <xref:System.Windows.Controls.Control.Background%2A> 属性设置为绿色。</span><span class="sxs-lookup"><span data-stu-id="b08a6-195">The setter within the style sets the <xref:System.Windows.Controls.Control.Background%2A> property for a styled <xref:System.Windows.Controls.Button> to green.</span></span>

[!code-xaml[PropertiesOvwSupport#SimpleStyleDef](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#simplestyledef)]

[!code-xaml[PropertiesOvwSupport#SimpleStyle](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#simplestyle)]

<span data-ttu-id="b08a6-196">有关详细信息，请参阅[样式设置和模板化](../../../../docs/framework/wpf/controls/styling-and-templating.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-196">For more information, see [Styling and Templating](../../../../docs/framework/wpf/controls/styling-and-templating.md).</span></span>

### <a name="animations"></a><span data-ttu-id="b08a6-197">动画</span><span class="sxs-lookup"><span data-stu-id="b08a6-197">Animations</span></span>
<span data-ttu-id="b08a6-198">可以对依赖属性进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="b08a6-198">Dependency properties can be animated.</span></span> <span data-ttu-id="b08a6-199">在应用和运行动画时，经过动画处理的值的操作优先级高于该属性以其他方式具有的任何值（如本地值）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-199">When an animation is applied and is running, the animated value operates at a higher precedence than any value (such as a local value) that the property otherwise has.</span></span>

<span data-ttu-id="b08a6-200">以下示例在 <xref:System.Windows.Controls.Button> 属性上对 <xref:System.Windows.Controls.Control.Background%2A> 进行动画处理（从技术上讲，通过使用属性元素语法将空白 <xref:System.Windows.Media.SolidColorBrush> 指定为 <xref:System.Windows.Controls.Control.Background%2A> 来对 <xref:System.Windows.Controls.Control.Background%2A> 进行动画处理，然后该 <xref:System.Windows.Media.SolidColorBrush> 的 <xref:System.Windows.Media.SolidColorBrush.Color%2A> 属性就是直接动画处理过的属性）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-200">The following example animates the <xref:System.Windows.Controls.Control.Background%2A> on a <xref:System.Windows.Controls.Button> property (technically, the <xref:System.Windows.Controls.Control.Background%2A> is animated by using property element syntax to specify a blank <xref:System.Windows.Media.SolidColorBrush> as the <xref:System.Windows.Controls.Control.Background%2A>, then the <xref:System.Windows.Media.SolidColorBrush.Color%2A> property of that <xref:System.Windows.Media.SolidColorBrush> is the property that is directly animated).</span></span>

[!code-xaml[PropertiesOvwSupport#MiniAnimate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#minianimate)]

<span data-ttu-id="b08a6-201">有关对属性进行动画处理的详细信息，请参阅[动画概述](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)和[情节提要概述](../../../../docs/framework/wpf/graphics-multimedia/storyboards-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-201">For more information on animating properties, see [Animation Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md) and [Storyboards Overview](../../../../docs/framework/wpf/graphics-multimedia/storyboards-overview.md).</span></span>

### <a name="metadata-overrides"></a><span data-ttu-id="b08a6-202">元数据重写</span><span class="sxs-lookup"><span data-stu-id="b08a6-202">Metadata overrides</span></span>
<span data-ttu-id="b08a6-203">在从最初注册依赖属性的类派生时，可以通过重写依赖属性的元数据来更改该属性的某些行为。</span><span class="sxs-lookup"><span data-stu-id="b08a6-203">You can change certain behaviors of a dependency property by overriding the metadata for that property when you derive from the class that originally registers the dependency property.</span></span> <span data-ttu-id="b08a6-204">重写元数据依赖于 <xref:System.Windows.DependencyProperty> 标识符。</span><span class="sxs-lookup"><span data-stu-id="b08a6-204">Overriding metadata relies on the <xref:System.Windows.DependencyProperty> identifier.</span></span> <span data-ttu-id="b08a6-205">重写元数据不需要重新实现属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-205">Overriding metadata does not require re-implementing the property.</span></span> <span data-ttu-id="b08a6-206">元数据的更改由属性系统在本机处理；对于所有从基类继承的属性，每个类都有可能基于每个类型保留元数据。</span><span class="sxs-lookup"><span data-stu-id="b08a6-206">The metadata change is handled natively by the property system; each class potentially holds individual metadata for all properties that are inherited from base classes, on a per-type basis.</span></span>

<span data-ttu-id="b08a6-207">以下示例重写依赖属性 <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> 的元数据。</span><span class="sxs-lookup"><span data-stu-id="b08a6-207">The following example overrides metadata for a dependency property <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>.</span></span> <span data-ttu-id="b08a6-208">重写此特定依赖属性的元数据是某个实现模式的一部分，该模式创建可以使用主题中的默认样式的控件。</span><span class="sxs-lookup"><span data-stu-id="b08a6-208">Overriding this particular dependency property metadata is part of an implementation pattern that creates controls that can use default styles from themes.</span></span>

[!code-csharp[PropertiesOvwSupport#OverrideMetadata](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml.cs#overridemetadata)]
[!code-vb[PropertiesOvwSupport#OverrideMetadata](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page3.xaml.vb#overridemetadata)]

<span data-ttu-id="b08a6-209">有关替代或获取属性元数据的详细信息，请参阅[依赖属性元数据](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-209">For more information about overriding or obtaining property metadata, see [Dependency Property Metadata](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md).</span></span>

### <a name="property-value-inheritance"></a><span data-ttu-id="b08a6-210">属性值继承</span><span class="sxs-lookup"><span data-stu-id="b08a6-210">Property value inheritance</span></span>
<span data-ttu-id="b08a6-211">元素可以从其在对象树中的父级继承依赖属性的值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-211">An element can inherit the value of a dependency property from its parent in the object tree.</span></span>

> [!NOTE]
> <span data-ttu-id="b08a6-212">属性值继承行为并未针对所有依赖属性在全局启用，因为继承的计算时间确实会对性能产生一定的影响。</span><span class="sxs-lookup"><span data-stu-id="b08a6-212">Property value inheritance behavior is not globally enabled for all dependency properties, because the calculation time for inheritance does have some performance impact.</span></span> <span data-ttu-id="b08a6-213">属性值继承通常只有在特定方案指出适合使用属性值继承时才对属性启用。</span><span class="sxs-lookup"><span data-stu-id="b08a6-213">Property value inheritance is typically only enabled for properties where a particular scenario suggests that property value inheritance is appropriate.</span></span> <span data-ttu-id="b08a6-214">可以通过在 SDK 参考中查看某个依赖属性的**依赖属性信息**部分，来确定该依赖属性是否继承属性值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-214">You can determine whether a dependency property inherits by looking at the **Dependency Property Information** section for that dependency property in the SDK reference.</span></span>

<span data-ttu-id="b08a6-215">下面的示例演示一个绑定，并设置指定绑定（在前面的绑定示例中未显示出来）的源的 <xref:System.Windows.FrameworkElement.DataContext%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-215">The following example shows a binding, and sets the <xref:System.Windows.FrameworkElement.DataContext%2A> property that specifies the source of the binding, which was not shown in the earlier binding example.</span></span> <span data-ttu-id="b08a6-216">子对象中的任何后续绑定都无需指定源，它们可以使用父对象 <xref:System.Windows.Controls.StackPanel> 中 <xref:System.Windows.FrameworkElement.DataContext%2A> 的继承值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-216">Any subsequent bindings in child objects do not need to specify the source, they can use the inherited value from <xref:System.Windows.FrameworkElement.DataContext%2A> in the parent <xref:System.Windows.Controls.StackPanel> object.</span></span> <span data-ttu-id="b08a6-217">（或者，子对象可以选择直接在 <xref:System.Windows.Data.Binding> 中指定自己的 <xref:System.Windows.FrameworkElement.DataContext%2A> 或 <xref:System.Windows.Data.Binding.Source%2A>，并且有意不将继承值用于其绑定的数据上下文。）</span><span class="sxs-lookup"><span data-stu-id="b08a6-217">(Alternatively, a child object could instead choose to directly specify its own <xref:System.Windows.FrameworkElement.DataContext%2A> or a <xref:System.Windows.Data.Binding.Source%2A> in the <xref:System.Windows.Data.Binding>, and to deliberately not use the inherited value for data context of its bindings.)</span></span>

[!code-xaml[PropertiesOvwSupport#InheritanceContext](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#inheritancecontext)]

<span data-ttu-id="b08a6-218">有关详细信息，请参阅[属性值继承](../../../../docs/framework/wpf/advanced/property-value-inheritance.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-218">For more information, see [Property Value Inheritance](../../../../docs/framework/wpf/advanced/property-value-inheritance.md).</span></span>

### <a name="wpf-designer-integration"></a><span data-ttu-id="b08a6-219">WPF 设计器集成</span><span class="sxs-lookup"><span data-stu-id="b08a6-219">WPF designer integration</span></span>
<span data-ttu-id="b08a6-220">如果自定义控件具有实现为依赖属性的属性，则它会收到相应的[!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)]支持。</span><span class="sxs-lookup"><span data-stu-id="b08a6-220">A custom control with properties that are implemented as dependency properties will receive appropriate [!INCLUDE[wpfdesigner_current_long](../../../../includes/wpfdesigner-current-long-md.md)] support.</span></span> <span data-ttu-id="b08a6-221">一个示例就是能够在“属性”窗口中编辑直接依赖属性和附加依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-221">One example is the ability to edit direct and attached dependency properties with the **Properties** window.</span></span> <span data-ttu-id="b08a6-222">有关详细信息，请参阅[控件创作概述](../../../../docs/framework/wpf/controls/control-authoring-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-222">For more information, see [Control Authoring Overview](../../../../docs/framework/wpf/controls/control-authoring-overview.md).</span></span>

## <a name="dependency-property-value-precedence"></a><span data-ttu-id="b08a6-223">依赖项属性值优先级</span><span class="sxs-lookup"><span data-stu-id="b08a6-223">Dependency property value precedence</span></span>
<span data-ttu-id="b08a6-224">获取依赖属性的值时，获得的值可能是通过参与 WPF 属性系统的其他任一基于属性的输入而在该属性上设置的。</span><span class="sxs-lookup"><span data-stu-id="b08a6-224">When you get the value of a dependency property, you are potentially obtaining a value that was set on that property through any one of the other property-based inputs that participate in the WPF property system.</span></span> <span data-ttu-id="b08a6-225">由于存在依赖属性值优先级，使得属性获取值的方式的各种方案得以按可预测的方式交互。</span><span class="sxs-lookup"><span data-stu-id="b08a6-225">Dependency property value precedence exists so that a variety of scenarios for how properties obtain their values can interact in a predictable way.</span></span>

<span data-ttu-id="b08a6-226">请看下面的示例。</span><span class="sxs-lookup"><span data-stu-id="b08a6-226">Consider the following example.</span></span> <span data-ttu-id="b08a6-227">该示例包含适用于所有按钮及其 <xref:System.Windows.Controls.Control.Background%2A> 属性的样式，但也会指定一个具有本地设置的 <xref:System.Windows.Controls.Control.Background%2A> 值的按钮。</span><span class="sxs-lookup"><span data-stu-id="b08a6-227">The example includes a style that applies to all buttons and their <xref:System.Windows.Controls.Control.Background%2A> properties, but then also specifies one button with a locally set <xref:System.Windows.Controls.Control.Background%2A> value.</span></span>

> [!NOTE]
> <span data-ttu-id="b08a6-228">SDK 文档在讨论依赖属性时有时会使用“本地值”或“本地设置的值”等术语。</span><span class="sxs-lookup"><span data-stu-id="b08a6-228">The SDK documentation uses the terms "local value" or "locally set value" occasionally when discussing dependency properties.</span></span> <span data-ttu-id="b08a6-229">本地设置的值是指在代码中直接为对象实例设置的属性值，或者在 XAML 中设置为元素特性的属性值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-229">A locally set value is a property value that is set directly on an object instance in code, or as an attribute on an element in XAML.</span></span>  
  
<span data-ttu-id="b08a6-230">原则上，对于第一个按钮，该属性会设置两次，但是仅应用一个值，即具有最高优先级的值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-230">In principle, for the first button, the property is set twice, but only one value applies: the value with the highest precedence.</span></span> <span data-ttu-id="b08a6-231">本地设置的值具有最高优先级（对于正在运行的动画除外，但是在本示例中没有应用动画），因此，对于第一个按钮的背景将使用本地设置的值，而不使用样式资源库值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-231">A locally set value has the highest precedence (except for a running animation, but no animation applies in this example) and thus the locally set value is used instead of the style setter value for the background on the first button.</span></span> <span data-ttu-id="b08a6-232">第二个按钮没有本地值（而且没有其他比样式资源库优先级更高的值），因此该按钮中的背景来自样式资源库。</span><span class="sxs-lookup"><span data-stu-id="b08a6-232">The second button has no local value (and no other value with higher precedence than a style setter) and thus the background in that button comes from the style setter.</span></span>

[!code-xaml[PropertiesOvwSupport#MiniPrecedence](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page3.xaml#miniprecedence)]  

### <a name="why-does-dependency-property-precedence-exist"></a><span data-ttu-id="b08a6-233">为什么存在依赖属性优先级？</span><span class="sxs-lookup"><span data-stu-id="b08a6-233">Why does dependency property precedence exist?</span></span>
<span data-ttu-id="b08a6-234">通常，你不会希望总是应用样式，而且不希望样式遮盖单个元素的哪怕一个本地设置值（否则，通常很难使用样式或元素）。</span><span class="sxs-lookup"><span data-stu-id="b08a6-234">Typically, you would not want styles to always apply and to obscure even a locally set value of an individual element (otherwise, it would be very difficult to use either styles or elements in general).</span></span> <span data-ttu-id="b08a6-235">因此，来自样式的值的操作优先级低于本地设置的值。</span><span class="sxs-lookup"><span data-stu-id="b08a6-235">Therefore, the values that come from styles operate at a lower precedent than a locally set value.</span></span> <span data-ttu-id="b08a6-236">有关依赖属性以及它的有效值可能来自何处的更完整列表，请参阅[依赖属性值优先级](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-236">For a more thorough listing of dependency properties and where a dependency property effective value might come from, see [Dependency Property Value Precedence](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md).</span></span>

> [!NOTE]
> <span data-ttu-id="b08a6-237">在 WPF 元素定义了许多非依赖属性的属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-237">There are a number of properties defined on WPF elements that are not dependency properties.</span></span> <span data-ttu-id="b08a6-238">一般说来，只有在需要支持至少一个由属性系统启用的方案（数据绑定、样式、动画、默认值支持、继承、附加属性或失效）时，才将属性实现为依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-238">By and large, properties were implemented as dependency properties only when there were needs to support at least one of the scenarios enabled by the property system: data binding, styling, animation, default value support, inheritance, attached properties, or invalidation.</span></span>

## <a name="learning-more-about-dependency-properties"></a><span data-ttu-id="b08a6-239">了解有关依赖属性的详细信息</span><span class="sxs-lookup"><span data-stu-id="b08a6-239">Learning more about dependency properties</span></span>  

- <span data-ttu-id="b08a6-240">附加属性是一种支持 XAML 中的专用语法的属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-240">An attached property is a type of property that supports a specialized syntax in XAML.</span></span> <span data-ttu-id="b08a6-241">附加属性通常与[!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] 属性不具有 1:1 对应关系，而且不一定是依赖属性。</span><span class="sxs-lookup"><span data-stu-id="b08a6-241">An attached property often does not have a 1:1 correspondence with a [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] property, and is not necessarily a dependency property.</span></span> <span data-ttu-id="b08a6-242">附加属性的典型用途是使子元素可以向其父元素报告属性值，即使父元素和子元素的类成员列表中均没有该属性也是如此。</span><span class="sxs-lookup"><span data-stu-id="b08a6-242">The typical purpose of a attached property is to allow child elements to report property values to a parent element, even if the parent element and child element do not both possess that property as part of the class members listings.</span></span> <span data-ttu-id="b08a6-243">一种主要情况是使子元素能够告知父元素应如何在 [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 中呈现它们；有关示例，请参阅 <xref:System.Windows.Controls.DockPanel.Dock%2A> 或 <xref:System.Windows.Controls.Canvas.Left%2A>。</span><span class="sxs-lookup"><span data-stu-id="b08a6-243">One primary scenario is to enable child elements to inform the parent how they should be presented in [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]; for an example, see <xref:System.Windows.Controls.DockPanel.Dock%2A> or <xref:System.Windows.Controls.Canvas.Left%2A>.</span></span> <span data-ttu-id="b08a6-244">有关详细信息，请参阅[附加属性概述](../../../../docs/framework/wpf/advanced/attached-properties-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-244">For details, see [Attached Properties Overview](../../../../docs/framework/wpf/advanced/attached-properties-overview.md).</span></span>

- <span data-ttu-id="b08a6-245">组件开发人员或应用程序开发人员可能希望创建自己的依赖属性，以便实现数据绑定或样式支持之类的功能，或者实现对失效和值强制的支持。</span><span class="sxs-lookup"><span data-stu-id="b08a6-245">Component developers or application developers may wish to create their own dependency property, in order to enable capabilities such as data binding or styles support, or for invalidation and value coercion support.</span></span> <span data-ttu-id="b08a6-246">有关详细信息，请参阅[自定义依赖属性](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-246">For details, see [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span></span>

- <span data-ttu-id="b08a6-247">通常，依赖属性应当被视为公共属性，这些公共属性可以由任何具有实例访问权限的调用方访问，或至少可被这样的调用方发现。</span><span class="sxs-lookup"><span data-stu-id="b08a6-247">Dependency properties should generally be considered to be public properties, accessible or at least discoverable by any caller that has access to an instance.</span></span> <span data-ttu-id="b08a6-248">有关详细信息，请参阅[依赖属性的安全性](../../../../docs/framework/wpf/advanced/dependency-property-security.md)。</span><span class="sxs-lookup"><span data-stu-id="b08a6-248">For more information, see [Dependency Property Security](../../../../docs/framework/wpf/advanced/dependency-property-security.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="b08a6-249">请参阅</span><span class="sxs-lookup"><span data-stu-id="b08a6-249">See also</span></span>
 [<span data-ttu-id="b08a6-250">自定义依赖属性</span><span class="sxs-lookup"><span data-stu-id="b08a6-250">Custom Dependency Properties</span></span>](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)  
 [<span data-ttu-id="b08a6-251">只读依赖项属性</span><span class="sxs-lookup"><span data-stu-id="b08a6-251">Read-Only Dependency Properties</span></span>](../../../../docs/framework/wpf/advanced/read-only-dependency-properties.md)  
 [<span data-ttu-id="b08a6-252">XAML 概述 (WPF)</span><span class="sxs-lookup"><span data-stu-id="b08a6-252">XAML Overview (WPF)</span></span>](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)  
 [<span data-ttu-id="b08a6-253">WPF 体系结构</span><span class="sxs-lookup"><span data-stu-id="b08a6-253">WPF Architecture</span></span>](../../../../docs/framework/wpf/advanced/wpf-architecture.md)
