---
title: "技术区概述"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- window regions [WPF]
- Win32 code [WPF], WPF interoperation
- Win32 code [WPF], airspace
- airspace [WPF]
- interoperability [WPF], airspace
- Win32 code [WPF], window regions
ms.assetid: b7cc350f-b9e2-48b1-be14-60f3d853222e
caps.latest.revision: "12"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 6fb2f920928002e4ee374e36f307a537e4af593c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/21/2017
---
# <a name="technology-regions-overview"></a><span data-ttu-id="dd6f2-102">技术区概述</span><span class="sxs-lookup"><span data-stu-id="dd6f2-102">Technology Regions Overview</span></span>
<span data-ttu-id="dd6f2-103">如果在应用程序中使用多种呈现技术（例如 WPF、Win32 或 DirectX），则这些呈现技术必须共享公共顶级窗口中的呈现区域。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-103">If multiple presentation technologies are used in an application, such as WPF, Win32, or DirectX, they must share the rendering areas within a common top-level window.</span></span> <span data-ttu-id="dd6f2-104">本主题介绍可能会对 WPF 互操作应用程序的呈现和输入造成影响的问题。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-104">This topic describes issues that might influence the presentation and input for your WPF interoperation application.</span></span>  
  
## <a name="regions"></a><span data-ttu-id="dd6f2-105">区域</span><span class="sxs-lookup"><span data-stu-id="dd6f2-105">Regions</span></span>  
 <span data-ttu-id="dd6f2-106">在顶级窗口内，可以这么想：每个包含互操作应用程序某个技术的 HWND 都具有自己的区域（也称为“空域”）。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-106">Within a top-level window, you can conceptualize that each HWND that comprises one of the technologies of an interoperation application has its own region (also called "airspace").</span></span> <span data-ttu-id="dd6f2-107">窗口内的每个像素都只属于一个特定 HWND，这构成了该 HWND 的区域。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-107">Each pixel within the window belongs to exactly one HWND, which constitutes the region of that HWND.</span></span> <span data-ttu-id="dd6f2-108">（严格地说，如果有多个 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] HWND，便会有多个 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 区域，但为了便于讨论，可以假定只有一个区域。）</span><span class="sxs-lookup"><span data-stu-id="dd6f2-108">(Strictly speaking, there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] region if there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] HWND, but for purposes of this discussion, you can assume there is only one).</span></span> <span data-ttu-id="dd6f2-109">区域暗含了这样一层含义：应用程序生存期内尝试在该像素之上呈现的所有层或其他窗口都必须是同一呈现级技术的一部分。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-109">The region implies that all layers or other windows that attempt to render above that pixel during application lifetime must be part of the same render-level technology.</span></span> <span data-ttu-id="dd6f2-110">尝试在 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] 上方呈现 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 像素会导致意外结果，应尽量通过互操作 [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] 禁止这种尝试。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-110">Attempting to render [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pixels over [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] leads to undesirable results, and is disallowed as much as possible through the interoperation [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span></span>  
  
### <a name="region-examples"></a><span data-ttu-id="dd6f2-111">区域示例</span><span class="sxs-lookup"><span data-stu-id="dd6f2-111">Region Examples</span></span>  
 <span data-ttu-id="dd6f2-112">下图显示一个混合使用 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]、[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 和 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 的应用程序。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-112">The following illustration shows an application that mixes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)], and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="dd6f2-113">每种技术都使用属于自己的且互不重叠的一组像素，因此不存在区域问题。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-113">Each technology uses its own separate, non-overlapping set of pixels, and there are no region issues.</span></span>  
  
 <span data-ttu-id="dd6f2-114">![不存在空域问题的窗口](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle01.png "MigrationInteropArchitectArticle01")</span><span class="sxs-lookup"><span data-stu-id="dd6f2-114">![A window that does not have airspace issues](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle01.png "MigrationInteropArchitectArticle01")</span></span>  
  
 <span data-ttu-id="dd6f2-115">假设此应用程序使用鼠标指针位置来创建想要在这三个区域中任一区域上方呈现的动画。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-115">Suppose that this application uses the mouse pointer position to create an animation that attempts to render over any of these three regions.</span></span> <span data-ttu-id="dd6f2-116">无论动画本身采用哪一种技术，该技术都会与其他两种技术的区域发生冲突。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-116">No matter which technology was responsible for the animation itself, that technology would violate the region of the other two.</span></span> <span data-ttu-id="dd6f2-117">下图演示在一个 Win32 区域上呈现 WPF 圆形的尝试。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-117">The following illustration shows an attempt to render a WPF circle over a Win32 region.</span></span>  
  
 <span data-ttu-id="dd6f2-118">![互操作示意图](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle02.png "MigrationInteropArchitectArticle02")</span><span class="sxs-lookup"><span data-stu-id="dd6f2-118">![Interop diagram](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle02.png "MigrationInteropArchitectArticle02")</span></span>  
  
 <span data-ttu-id="dd6f2-119">如果尝试在不同技术间使用透明度/Alpha 混合，也会发生冲突。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-119">Another violation is if you try to use transparency/alpha blending between different technologies.</span></span>  <span data-ttu-id="dd6f2-120">在下图中，[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 框与 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] 和 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 区域存在冲突。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-120">In the following illustration, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box violates the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] regions.</span></span> <span data-ttu-id="dd6f2-121">因为该 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 框中的像素是半透明的，所以它们必须由 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 和 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 共同拥有，但这是不可能的。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-121">Because pixels in that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box are semi-transparent, they would have to be owned jointly by both [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], which is not possible.</span></span>  <span data-ttu-id="dd6f2-122">因此，这是另一种冲突情况，且不可生成。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-122">So this is another violation and cannot be built.</span></span>  
  
 <span data-ttu-id="dd6f2-123">![互操作示意图](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle03.png "MigrationInteropArchitectArticle03")</span><span class="sxs-lookup"><span data-stu-id="dd6f2-123">![Interop diagram](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle03.png "MigrationInteropArchitectArticle03")</span></span>  
  
 <span data-ttu-id="dd6f2-124">前面三个示例使用矩形区域，但也可以使用其他形状。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-124">The previous three examples used rectangular regions, but different shapes are possible.</span></span>  <span data-ttu-id="dd6f2-125">例如，区域可以具有一个孔。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-125">For example, a region can have a hole.</span></span> <span data-ttu-id="dd6f2-126">下图显示了一个带有矩形孔的 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] 区域，其大小为 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 和 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 区域的总大小。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-126">The following illustration shows a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region with a rectangular hole this is the size of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] regions combined.</span></span>  
  
 <span data-ttu-id="dd6f2-127">![互操作示意图](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle04.png "MigrationInteropArchitectArticle04")</span><span class="sxs-lookup"><span data-stu-id="dd6f2-127">![Interop diagram](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle04.png "MigrationInteropArchitectArticle04")</span></span>  
  
 <span data-ttu-id="dd6f2-128">区域也可以完全不是矩形，或可以是可由 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HRGN（区域）描述的任何形状。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-128">Regions can also be completely nonrectangular, or any shape describable by a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HRGN (region).</span></span>  
  
 <span data-ttu-id="dd6f2-129">![互操作示意图](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle05.png "MigrationInteropArchitectArticle05")</span><span class="sxs-lookup"><span data-stu-id="dd6f2-129">![Interop diagram](../../../../docs/framework/wpf/advanced/media/migrationinteroparchitectarticle05.png "MigrationInteropArchitectArticle05")</span></span>  
  
## <a name="transparency-and-top-level-windows"></a><span data-ttu-id="dd6f2-130">透明度和顶级窗口</span><span class="sxs-lookup"><span data-stu-id="dd6f2-130">Transparency and Top-Level Windows</span></span>  
 <span data-ttu-id="dd6f2-131">Windows 中的窗口管理器实际上仅处理 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HWND。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-131">The window manager in Windows only really processes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HWNDs.</span></span> <span data-ttu-id="dd6f2-132">因此，每个[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<xref:System.Windows.Window>是 HWND。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-132">Therefore, every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> is an HWND.</span></span> <span data-ttu-id="dd6f2-133"><xref:System.Windows.Window> HWND 必须遵守任何 HWND 的一般规则。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-133">The <xref:System.Windows.Window> HWND must abide by the general rules for any HWND.</span></span> <span data-ttu-id="dd6f2-134">在该 HWND 内，[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 代码可以执行整个 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] 支持的任何操作。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-134">Within that HWND, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] code can do whatever the overall [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] support.</span></span> <span data-ttu-id="dd6f2-135">但是，为实现与桌面上其他 HWND 的交互，[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 必须遵循 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] 处理和呈现规则。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-135">But for interactions with other HWNDs on the desktop, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] must abide by [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] processing and rendering rules.</span></span>  [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="dd6f2-136"> 通过使用 [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] 来支持非矩形窗口，HRGN 用于非矩形窗口，分层窗口用于每像素 Alpha。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-136"> supports non-rectangular windows by using [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]—HRGNs for non-rectangular windows, and layered windows for a per-pixel alpha.</span></span>  
  
 <span data-ttu-id="dd6f2-137">不支持常量 Alpha 和颜色键。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-137">Constant alpha and color keys are not supported.</span></span>  [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]<span data-ttu-id="dd6f2-138"> 分层窗口的功能因平台而异。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-138"> layered window capabilities vary by platform.</span></span>  
  
 <span data-ttu-id="dd6f2-139">分层窗口可通过指定要应用于窗口中每个像素的 Alpha 值来使整个窗口呈现为半透明状。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-139">Layered windows can make the entire window translucent (semi-transparent) by specifying an alpha value to apply to every pixel in the window.</span></span>  <span data-ttu-id="dd6f2-140">（[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] 实际上支持每像素 Alpha，但这在实际的程序中很难应用，因为在此模式下需要自行绘制任何子 HWND，包括对话框和下拉列表）。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-140">([!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] in fact supports per-pixel alpha, but this is very difficult to use in practical programs because in this mode you would need to draw any child HWND yourself, including dialogs and dropdowns).</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="dd6f2-141"> 支持 HRGN；但是，对于此功能，没有相应的托管 [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-141"> supports HRGNs; however, there are no managed [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] for this functionality.</span></span> <span data-ttu-id="dd6f2-142">您可以使用平台调用和<xref:System.Windows.Interop.HwndSource>来调用相关[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-142">You can use platform invoke and <xref:System.Windows.Interop.HwndSource> to call the relevant [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].</span></span> <span data-ttu-id="dd6f2-143">有关详细信息，请参阅[从托管代码调用本机函数](/cpp/dotnet/calling-native-functions-from-managed-code)。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-143">For more information, see [Calling Native Functions from Managed Code](/cpp/dotnet/calling-native-functions-from-managed-code).</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="dd6f2-144"> 分层窗口在不同操作系统上具有不同的功能。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-144"> layered windows have different capabilities on different operating systems.</span></span> <span data-ttu-id="dd6f2-145">这是因为 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 使用 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 进行呈现，而分层窗口主要用于 [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] 呈现，而非 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 呈现。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-145">This is because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] to render, and layered windows were primarily designed for [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] rendering, not [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] rendering.</span></span>  
  
-   [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="dd6f2-146"> 支持 [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] 及更高版本上的硬件加速分层窗口。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-146"> supports hardware accelerated layered windows on [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] and later.</span></span> <span data-ttu-id="dd6f2-147">[!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] 上的硬件加速分层窗口需要 [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)] 的支持，所以该功能将取决于计算机上的 [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)] 的版本。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-147">Hardware accelerated layered windows on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] require support from [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)], so the capabilities will depend on the version of [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)] on that machine.</span></span>  
  
-   [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="dd6f2-148"> 不支持透明度颜色键，因为 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 无法保证准确呈现所请求的颜色，尤其当呈现采用了硬件加速时更是如此。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-148"> does not support transparency color keys, because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] cannot guarantee to render the exact color you requested, particularly when rendering is hardware-accelerated.</span></span>  
  
-   <span data-ttu-id="dd6f2-149">如果应用程序在 [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] 上运行，则 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 图面之上的分层窗口会在 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 应用程序呈现时闪烁。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-149">If your application is running on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)], layered windows on top of [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] surfaces flicker when the [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] application renders.</span></span>  <span data-ttu-id="dd6f2-150">（实际的呈现顺序是：[!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] 隐藏分层窗口，然后 [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] 进行绘制，之后 [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] 重新显示分层窗口。）</span><span class="sxs-lookup"><span data-stu-id="dd6f2-150">(The actual rendering sequence is that [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] hides the layered window, then [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] draws, and then [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] puts the layered window back).</span></span>  <span data-ttu-id="dd6f2-151">非 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 分层窗口也有此限制。</span><span class="sxs-lookup"><span data-stu-id="dd6f2-151">Non-[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows also have this limitation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dd6f2-152">另请参阅</span><span class="sxs-lookup"><span data-stu-id="dd6f2-152">See Also</span></span>  
 [<span data-ttu-id="dd6f2-153">WPF 和 Win32 互操作</span><span class="sxs-lookup"><span data-stu-id="dd6f2-153">WPF and Win32 Interoperation</span></span>](../../../../docs/framework/wpf/advanced/wpf-and-win32-interoperation.md)  
 [<span data-ttu-id="dd6f2-154">演练：在 Win32 中托管 WPF 时钟</span><span class="sxs-lookup"><span data-stu-id="dd6f2-154">Walkthrough: Hosting a WPF Clock in Win32</span></span>](../../../../docs/framework/wpf/advanced/walkthrough-hosting-a-wpf-clock-in-win32.md)  
 [<span data-ttu-id="dd6f2-155">在 WPF 中承载 Win32 内容</span><span class="sxs-lookup"><span data-stu-id="dd6f2-155">Hosting Win32 Content in WPF</span></span>](../../../../docs/framework/wpf/advanced/hosting-win32-content-in-wpf.md)
