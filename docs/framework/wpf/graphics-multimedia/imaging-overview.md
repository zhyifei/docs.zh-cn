---
title: 图像处理概述
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- metadata [WPF], images
- displaying images [WPF]
- Imaging API [WPF]
- image metadata [WPF]
- converting images [WPF]
- encoding image formats [WPF]
- format decoding for images [WPF]
- painting with images [WPF]
- stretching images [WPF]
- images [WPF], about imaging
- format encoding for images [WPF]
- cropping images [WPF]
- decoding image formats [WPF]
- rotating images [WPF]
ms.assetid: 72aad87a-e6f3-4937-94cd-a18b7766e990
caps.latest.revision: 32
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 8715f04f6cdec84e74d53213c0a5a5ff360c7d28
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/30/2018
---
# <a name="imaging-overview"></a><span data-ttu-id="a1c25-102">图像处理概述</span><span class="sxs-lookup"><span data-stu-id="a1c25-102">Imaging Overview</span></span>
<span data-ttu-id="a1c25-103">本主题介绍 [!INCLUDE[TLA#tla_wic](../../../../includes/tlasharptla-wic-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="a1c25-103">This topic provides an introduction to the [!INCLUDE[TLA#tla_wic](../../../../includes/tlasharptla-wic-md.md)].</span></span> <span data-ttu-id="a1c25-104">借助 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]，开发人员可以显示、转换图像和设置图像的格式。</span><span class="sxs-lookup"><span data-stu-id="a1c25-104">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] enables developers to display, transform, and format images.</span></span>  
  
  
<a name="_wpfImaging"></a>   
## <a name="wpf-imaging-component"></a><span data-ttu-id="a1c25-105">WPF 图像处理组件</span><span class="sxs-lookup"><span data-stu-id="a1c25-105">WPF Imaging Component</span></span>  
 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]<span data-ttu-id="a1c25-106"> 使得 [!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)] 内的图像处理功能得到了极大改进。</span><span class="sxs-lookup"><span data-stu-id="a1c25-106"> provides significant enhancements in imaging capabilities within [!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)].</span></span> <span data-ttu-id="a1c25-107">以前，图像处理功能（例如在公共控件上显示位图或使用图像）依赖于 [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] 或 [!INCLUDE[TLA#tla_gdiplus](../../../../includes/tlasharptla-gdiplus-md.md)] 库。</span><span class="sxs-lookup"><span data-stu-id="a1c25-107">Imaging capabilities, such as displaying a bitmap or using an image on a common control were previously reliant upon the [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] or [!INCLUDE[TLA#tla_gdiplus](../../../../includes/tlasharptla-gdiplus-md.md)] libraries.</span></span> <span data-ttu-id="a1c25-108">这些 [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] 提供了基线图像处理功能，但缺乏诸如编解码器扩展性支持和高保真图像支持之类的功能。</span><span class="sxs-lookup"><span data-stu-id="a1c25-108">These [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] provide baseline imaging functionality, but lack features such as support for codec extensibility and high fidelity image support.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]<span data-ttu-id="a1c25-109"> 旨在克服 [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] 和 [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)] 的缺点，并提供一组新的 [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]，以在应用程序内显示和使用图像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-109"> is designed to overcome the shortcomings of [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] and [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)] and provide a new set of [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] to display and use images within your applications.</span></span>  
  
 <span data-ttu-id="a1c25-110">有两种方式可以访问 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]：托管组件和非托管组件。</span><span class="sxs-lookup"><span data-stu-id="a1c25-110">There are two ways to access the [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], a managed component and an unmanaged component.</span></span> <span data-ttu-id="a1c25-111">非托管组件提供以下功能。</span><span class="sxs-lookup"><span data-stu-id="a1c25-111">The unmanaged component provides the following features.</span></span>  
  
-   <span data-ttu-id="a1c25-112">适用于新的或专用图像格式的扩展性模型。</span><span class="sxs-lookup"><span data-stu-id="a1c25-112">Extensibility model for new or proprietary image formats.</span></span>  
  
-   <span data-ttu-id="a1c25-113">对包括 [!INCLUDE[TLA#tla_bmp](../../../../includes/tlasharptla-bmp-md.md)]、[!INCLUDE[TLA#tla_jpegorg](../../../../includes/tlasharptla-jpegorg-md.md)]、[!INCLUDE[TLA#tla_png](../../../../includes/tlasharptla-png-md.md)]、[!INCLUDE[TLA#tla_tiff](../../../../includes/tlasharptla-tiff-md.md)]、[!INCLUDE[TLA#tla_wdp](../../../../includes/tlasharptla-wdp-md.md)]、[!INCLUDE[TLA#tla_gif](../../../../includes/tlasharptla-gif-md.md)] 和图标 (.ico) 在内的本机图像格式增强了性能和安全性。</span><span class="sxs-lookup"><span data-stu-id="a1c25-113">Improved performance and security on native image formats including [!INCLUDE[TLA#tla_bmp](../../../../includes/tlasharptla-bmp-md.md)], [!INCLUDE[TLA#tla_jpegorg](../../../../includes/tlasharptla-jpegorg-md.md)], [!INCLUDE[TLA#tla_png](../../../../includes/tlasharptla-png-md.md)], [!INCLUDE[TLA#tla_tiff](../../../../includes/tlasharptla-tiff-md.md)], [!INCLUDE[TLA#tla_wdp](../../../../includes/tlasharptla-wdp-md.md)], [!INCLUDE[TLA#tla_gif](../../../../includes/tlasharptla-gif-md.md)], and icon (.ico).</span></span>  
  
-   <span data-ttu-id="a1c25-114">高位深图像数据最多保留 8 位/通道（32 位/像素）。</span><span class="sxs-lookup"><span data-stu-id="a1c25-114">Preservation of high bit-depth image data up to 8 bits per channel (32 bits per pixel).</span></span>  
  
-   <span data-ttu-id="a1c25-115">非破坏性图像缩放、剪切和旋转。</span><span class="sxs-lookup"><span data-stu-id="a1c25-115">Nondestructive image scaling, cropping, and rotations.</span></span>  
  
-   <span data-ttu-id="a1c25-116">简化的颜色管理。</span><span class="sxs-lookup"><span data-stu-id="a1c25-116">Simplified color management.</span></span>  
  
-   <span data-ttu-id="a1c25-117">对文件内的专用元数据的支持。</span><span class="sxs-lookup"><span data-stu-id="a1c25-117">Support for in-file, proprietary metadata.</span></span>  
  
-   <span data-ttu-id="a1c25-118">托管组件利用非托管基础结构提供图像与其他 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 功能（如 [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]、动画和图形）的无缝集成。</span><span class="sxs-lookup"><span data-stu-id="a1c25-118">The managed component utilizes the unmanaged infrastructure to provide seamless integration of images with other [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] features such as [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], animation, and graphics.</span></span> <span data-ttu-id="a1c25-119">托管的组件还受益于的 Windows Presentation Foundation (WPF) 映像编解码器扩展性模型可以自动识别中的新图像格式的[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]应用程序。</span><span class="sxs-lookup"><span data-stu-id="a1c25-119">The managed component also benefits from the Windows Presentation Foundation (WPF) imaging codec extensibility model which enables automatic recognition of new image formats in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="a1c25-120">托管的大多数[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)][!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]驻留在<xref:System.Windows.Media.Imaging?displayProperty=nameWithType>命名空间，但几个重要类型，如<xref:System.Windows.Media.ImageBrush>和<xref:System.Windows.Media.ImageDrawing>驻留在<xref:System.Windows.Media?displayProperty=nameWithType>命名空间和<xref:System.Windows.Controls.Image>驻留在<xref:System.Windows.Controls?displayProperty=nameWithType>命名空间。</span><span class="sxs-lookup"><span data-stu-id="a1c25-120">The majority of the managed [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] reside in the <xref:System.Windows.Media.Imaging?displayProperty=nameWithType> namespace, though several important types, such as <xref:System.Windows.Media.ImageBrush> and <xref:System.Windows.Media.ImageDrawing> reside in the <xref:System.Windows.Media?displayProperty=nameWithType> namespace and <xref:System.Windows.Controls.Image> resides in the <xref:System.Windows.Controls?displayProperty=nameWithType> namespace.</span></span>  
  
 <span data-ttu-id="a1c25-121">本主题提供有关托管组件的其他信息。</span><span class="sxs-lookup"><span data-stu-id="a1c25-121">This topic provides additional information about the managed component.</span></span> <span data-ttu-id="a1c25-122">有关非托管 [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] 的详细信息，请参阅[非托管 WPF 图像处理组件](https://msdn.microsoft.com/library/ee719902.aspx)文档。</span><span class="sxs-lookup"><span data-stu-id="a1c25-122">For more information on the unmanaged [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] see the [Unmanaged WPF Imaging Component](https://msdn.microsoft.com/library/ee719902.aspx) documentation.</span></span>  
  
<a name="_imageformats"></a>   
## <a name="wpf-image-formats"></a><span data-ttu-id="a1c25-123">WPF 图像格式</span><span class="sxs-lookup"><span data-stu-id="a1c25-123">WPF Image Formats</span></span>  
 <span data-ttu-id="a1c25-124">编解码器用于对特定媒体格式进行解码或编码。</span><span class="sxs-lookup"><span data-stu-id="a1c25-124">A codec is used to decode or encode a specific media format.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]<span data-ttu-id="a1c25-125"> 包括一个适用于 [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)]、[!INCLUDE[TLA2#tla_jpeg](../../../../includes/tla2sharptla-jpeg-md.md)]、[!INCLUDE[TLA2#tla_png](../../../../includes/tla2sharptla-png-md.md)]、[!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)]、[!INCLUDE[TLA2#tla_wdp](../../../../includes/tla2sharptla-wdp-md.md)]、[!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)] 和 ICON 图像格式的编解码器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-125"> includes a codec  for [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)], [!INCLUDE[TLA2#tla_jpeg](../../../../includes/tla2sharptla-jpeg-md.md)], [!INCLUDE[TLA2#tla_png](../../../../includes/tla2sharptla-png-md.md)], [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)], [!INCLUDE[TLA2#tla_wdp](../../../../includes/tla2sharptla-wdp-md.md)], [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)], and ICON image formats.</span></span> <span data-ttu-id="a1c25-126">利用上述每个编解码器，应用程序可以对其各自的图像格式进行解码（ICON 除外）和编码。</span><span class="sxs-lookup"><span data-stu-id="a1c25-126">Each of these codecs enable applications to decode and, with the exception of ICON, encode their respective image formats.</span></span>  
  
 <span data-ttu-id="a1c25-127"><xref:System.Windows.Media.Imaging.BitmapSource> 是一个重要的类用于解码和编码的映像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-127"><xref:System.Windows.Media.Imaging.BitmapSource> is an important class used in the decoding and encoding of images.</span></span> <span data-ttu-id="a1c25-128">它是 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 管道的基本构建基块，表示具有特定大小和分辨率的单个不变的像素集。</span><span class="sxs-lookup"><span data-stu-id="a1c25-128">It is the basic building block of the [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] pipeline and represents a single, constant set of pixels at a certain size and resolution.</span></span> <span data-ttu-id="a1c25-129">A<xref:System.Windows.Media.Imaging.BitmapSource>可以是单个镇的多个帧图像，也可以是上执行转换的结果<xref:System.Windows.Media.Imaging.BitmapSource>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-129">A <xref:System.Windows.Media.Imaging.BitmapSource> can be an individual frame of a multiple frame image, or it can be the result of a transform performed on a <xref:System.Windows.Media.Imaging.BitmapSource>.</span></span> <span data-ttu-id="a1c25-130">它是许多中使用的主类的父[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]如映像<xref:System.Windows.Media.Imaging.BitmapFrame>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-130">It is the parent of many of the primary classes used in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] imaging such as <xref:System.Windows.Media.Imaging.BitmapFrame>.</span></span>  
  
 <span data-ttu-id="a1c25-131">A<xref:System.Windows.Media.Imaging.BitmapFrame>用于存储实际位图图像格式的数据。</span><span class="sxs-lookup"><span data-stu-id="a1c25-131">A <xref:System.Windows.Media.Imaging.BitmapFrame> is used to store the actual bitmap data of an image format.</span></span> <span data-ttu-id="a1c25-132">许多图像格式仅支持单个<xref:System.Windows.Media.Imaging.BitmapFrame>，尽管格式例如[!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)]和[!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)]支持每个图像的多个帧。</span><span class="sxs-lookup"><span data-stu-id="a1c25-132">Many image formats only support a single <xref:System.Windows.Media.Imaging.BitmapFrame>, although formats such as [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)] and [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] support multiple frames per image.</span></span> <span data-ttu-id="a1c25-133">帧由解码器用作输入数据，并传递到编码器以创建图像文件。</span><span class="sxs-lookup"><span data-stu-id="a1c25-133">Frames are used by decoders as input data and are passed to encoders to create image files.</span></span>  
  
 <span data-ttu-id="a1c25-134">下面的示例演示如何<xref:System.Windows.Media.Imaging.BitmapFrame>从创建<xref:System.Windows.Media.Imaging.BitmapSource>并随后添加到[!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)]映像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-134">The following example demonstrates how a <xref:System.Windows.Media.Imaging.BitmapFrame> is created from a <xref:System.Windows.Media.Imaging.BitmapSource> and then added to a [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] image.</span></span>  
  
 [!code-csharp[BitmapFrameExample#10](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BitmapFrameExample/CSharp/BitmapFrame.cs#10)]
 [!code-vb[BitmapFrameExample#10](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BitmapFrameExample/VB/BitmapFrame.vb#10)]  
  
### <a name="image-format-decoding"></a><span data-ttu-id="a1c25-135">图像格式解码</span><span class="sxs-lookup"><span data-stu-id="a1c25-135">Image Format Decoding</span></span>  
 <span data-ttu-id="a1c25-136">图像解码是指将某种图像格式转换为可以由系统使用的图像数据。</span><span class="sxs-lookup"><span data-stu-id="a1c25-136">Image decoding is the translation of an image format to image data that can be used by the system.</span></span> <span data-ttu-id="a1c25-137">然后，此图像数据可以用于显示、处理或编码为其他格式。</span><span class="sxs-lookup"><span data-stu-id="a1c25-137">The image data can then be used to display, process, or encode to a different format.</span></span> <span data-ttu-id="a1c25-138">根据图像格式选择解码器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-138">Decoder selection is based on the image format.</span></span> <span data-ttu-id="a1c25-139">自动选择编解码器，除非指定了特定解码器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-139">Codec selection is automatic unless a specific decoder is specified.</span></span> <span data-ttu-id="a1c25-140">[在 WPF 中显示图像](#_displayingimages)一节中的示例演示了自动解码。</span><span class="sxs-lookup"><span data-stu-id="a1c25-140">The examples in the [Displaying Images in WPF](#_displayingimages) section demonstrate automatic decoding.</span></span> <span data-ttu-id="a1c25-141">使用非托管 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 界面开发并向系统注册的自定义格式解码器会自动加入到解码器选择队列。</span><span class="sxs-lookup"><span data-stu-id="a1c25-141">Custom format decoders developed using the unmanaged [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] interfaces and registered with the system automatically participate in decoder selection.</span></span> <span data-ttu-id="a1c25-142">这将使得自定义格式可以自动显示在 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 应用程序中。</span><span class="sxs-lookup"><span data-stu-id="a1c25-142">This allows custom formats to be displayed automatically in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="a1c25-143">以下示例演示使用位图解码器对 [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)] 格式图像进行解码。</span><span class="sxs-lookup"><span data-stu-id="a1c25-143">The following example demonstrates the use of a bitmap decoder to decode a [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)] format image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#5](../../../../samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#5)]
 [!code-csharp[BmpBitmapDecoderEncoder#5](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#5)]
 [!code-vb[BmpBitmapDecoderEncoder#5](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#5)]  
  
### <a name="image-format-encoding"></a><span data-ttu-id="a1c25-144">图像格式编码</span><span class="sxs-lookup"><span data-stu-id="a1c25-144">Image Format Encoding</span></span>  
 <span data-ttu-id="a1c25-145">图像编码是指将图像数据转换为特定的图像格式。</span><span class="sxs-lookup"><span data-stu-id="a1c25-145">Image encoding is the translation of image data to a specific image format.</span></span> <span data-ttu-id="a1c25-146">然后，已编码的图像数据可以用于创建新的图像文件。</span><span class="sxs-lookup"><span data-stu-id="a1c25-146">The encoded image data can then be used to create new image files.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]<span data-ttu-id="a1c25-147"> 为上面介绍的每种图像格式提供编码器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-147"> provides encoders for each of the image formats described above.</span></span>  
  
 <span data-ttu-id="a1c25-148">以下示例演示使用编码器保存一个新创建的位图图像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-148">The following example demonstrates the use of an encoder to save a newly created bitmap image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#3](../../../../samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#3)]
 [!code-csharp[BmpBitmapDecoderEncoder#3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#3)]
 [!code-vb[BmpBitmapDecoderEncoder#3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#3)]  
  
<a name="_displayingimages"></a>   
## <a name="displaying-images-in-wpf"></a><span data-ttu-id="a1c25-149">在 WPF 中显示图像</span><span class="sxs-lookup"><span data-stu-id="a1c25-149">Displaying Images in WPF</span></span>  
 <span data-ttu-id="a1c25-150">有多种方法可在 Windows Presentation Foundation (WPF) 应用程序中显示图像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-150">There are several ways to display an image in a Windows Presentation Foundation (WPF) application.</span></span> <span data-ttu-id="a1c25-151">可以使用显示映像<xref:System.Windows.Controls.Image>控件，在 visual using 上绘制<xref:System.Windows.Media.ImageBrush>，或使用绘制<xref:System.Windows.Media.ImageDrawing>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-151">Images can be displayed using an <xref:System.Windows.Controls.Image> control, painted on a visual using an <xref:System.Windows.Media.ImageBrush>, or drawn using an <xref:System.Windows.Media.ImageDrawing>.</span></span>  
  
### <a name="using-the-image-control"></a><span data-ttu-id="a1c25-152">使用 Image 控件</span><span class="sxs-lookup"><span data-stu-id="a1c25-152">Using the Image Control</span></span>  
 <span data-ttu-id="a1c25-153"><xref:System.Windows.Controls.Image> 是一个框架元素，在应用程序中显示图像的主要方法。</span><span class="sxs-lookup"><span data-stu-id="a1c25-153"><xref:System.Windows.Controls.Image> is a framework element and the primary way to display images in applications.</span></span> <span data-ttu-id="a1c25-154">在[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，<xref:System.Windows.Controls.Image>可在两种方法; 特性语法或属性语法。</span><span class="sxs-lookup"><span data-stu-id="a1c25-154">In [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], <xref:System.Windows.Controls.Image> can be used in two ways; attribute syntax or property syntax.</span></span> <span data-ttu-id="a1c25-155">以下示例演示如何使用特性语法或属性标记语法来呈现宽度为 200 像素的图像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-155">The following example shows how to render an image 200 pixels wide using both attribute syntax and property tag syntax.</span></span> <span data-ttu-id="a1c25-156">有关特性语法和属性语法的详细信息，请参阅[依赖属性概述](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="a1c25-156">For more information on attribute syntax and property syntax, see [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageSimpleExampleInlineMarkup](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml#imagesimpleexampleinlinemarkup)]  
  
 <span data-ttu-id="a1c25-157">许多示例使用<xref:System.Windows.Media.Imaging.BitmapImage>对象，以引用的图像文件。</span><span class="sxs-lookup"><span data-stu-id="a1c25-157">Many of the examples use a <xref:System.Windows.Media.Imaging.BitmapImage> object to reference an image file.</span></span> <span data-ttu-id="a1c25-158"><xref:System.Windows.Media.Imaging.BitmapImage> 是一个专用<xref:System.Windows.Media.Imaging.BitmapSource>针对进行了优化[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]加载和轻松地图像显示为<xref:System.Windows.Controls.Image.Source%2A>的<xref:System.Windows.Controls.Image>控件。</span><span class="sxs-lookup"><span data-stu-id="a1c25-158"><xref:System.Windows.Media.Imaging.BitmapImage> is a specialized <xref:System.Windows.Media.Imaging.BitmapSource> that is optimized for [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] loading and is an easy way to display images as the <xref:System.Windows.Controls.Image.Source%2A> of an <xref:System.Windows.Controls.Image> control.</span></span>  
  
 <span data-ttu-id="a1c25-159">以下示例演示如何使用代码呈现宽度为 200 像素的图像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-159">The following example shows how to render an image 200 pixels wide using code.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a1c25-160"><xref:System.Windows.Media.Imaging.BitmapImage> 实现<xref:System.ComponentModel.ISupportInitialize>接口来优化多个属性上的初始化。</span><span class="sxs-lookup"><span data-stu-id="a1c25-160"><xref:System.Windows.Media.Imaging.BitmapImage> implements the <xref:System.ComponentModel.ISupportInitialize> interface to optimize initialization on multiple properties.</span></span> <span data-ttu-id="a1c25-161">只能在对象初始化过程中进行属性更改。</span><span class="sxs-lookup"><span data-stu-id="a1c25-161">Property changes can only occur during object initialization.</span></span> <span data-ttu-id="a1c25-162">调用<xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A>发出信号初始化已开始和<xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A>发出信号初始化已完成。</span><span class="sxs-lookup"><span data-stu-id="a1c25-162">Call <xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A> to signal that initialization has begun and <xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A> to signal that initialization has completed.</span></span> <span data-ttu-id="a1c25-163">初始化后，将忽略所做的属性更改。</span><span class="sxs-lookup"><span data-stu-id="a1c25-163">Once initialized, property changes are ignored.</span></span>  
  
 [!code-csharp[ImageElementExample_snip#ImageSimpleExampleInlineCode1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml.cs#imagesimpleexampleinlinecode1)]
 [!code-vb[ImageElementExample_snip#ImageSimpleExampleInlineCode1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/ImageSimpleExample.xaml.vb#imagesimpleexampleinlinecode1)]  
  
#### <a name="rotating-converting-and-cropping-images"></a><span data-ttu-id="a1c25-164">旋转、转换和剪切图像</span><span class="sxs-lookup"><span data-stu-id="a1c25-164">Rotating, Converting, and Cropping Images</span></span>  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="a1c25-165"> 使用户能够使用的属性转换图像<xref:System.Windows.Media.Imaging.BitmapImage>或使用其他<xref:System.Windows.Media.Imaging.BitmapSource>对象如<xref:System.Windows.Media.Imaging.CroppedBitmap>或<xref:System.Windows.Media.Imaging.FormatConvertedBitmap>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-165"> enables users to transform images by using properties of <xref:System.Windows.Media.Imaging.BitmapImage> or by using additional <xref:System.Windows.Media.Imaging.BitmapSource> objects such as <xref:System.Windows.Media.Imaging.CroppedBitmap> or <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="a1c25-166">上述图像转换可以缩放或旋转图像、更改图像的像素格式或剪切图像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-166">These image transformations can scale or rotate an image, change the pixel format of an image, or crop an image.</span></span>  
  
 <span data-ttu-id="a1c25-167">使用来执行图像旋转<xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A>属性<xref:System.Windows.Media.Imaging.BitmapImage>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-167">Image rotations are performed using the <xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A> property of <xref:System.Windows.Media.Imaging.BitmapImage>.</span></span> <span data-ttu-id="a1c25-168">只能以 90 度为增量进行旋转。</span><span class="sxs-lookup"><span data-stu-id="a1c25-168">Rotations can only be done in 90 degree increments.</span></span> <span data-ttu-id="a1c25-169">在以下示例中，图像旋转了 90 度。</span><span class="sxs-lookup"><span data-stu-id="a1c25-169">In the following example, an image is rotated 90 degrees.</span></span>  
  
 [!code-xaml[ImageElementExample#TransformedXAML2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml#transformedxaml2)]  
  
 [!code-csharp[ImageElementExample#TransformedCSharp1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml.cs#transformedcsharp1)]
 [!code-vb[ImageElementExample#TransformedCSharp1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample/VB/TransformedImageExample.xaml.vb#transformedcsharp1)]  
  
 <span data-ttu-id="a1c25-170">将图像转换为不同的像素格式，如完成灰度使用<xref:System.Windows.Media.Imaging.FormatConvertedBitmap>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-170">Converting an image to a different pixel format such as grayscale is done using <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="a1c25-171">在以下示例中，映像转换为<xref:System.Windows.Media.PixelFormats.Gray4%2A>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-171">In the following examples, an image is converted to <xref:System.Windows.Media.PixelFormats.Gray4%2A>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ConvertedXAML2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml#convertedxaml2)]  
  
 [!code-csharp[ImageElementExample_snip#ConvertedCSharp1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml.cs#convertedcsharp1)]
 [!code-vb[ImageElementExample_snip#ConvertedCSharp1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/FormatConvertedExample.xaml.vb#convertedcsharp1)]  
  
 <span data-ttu-id="a1c25-172">若要裁剪图像，或者<xref:System.Windows.UIElement.Clip%2A>属性<xref:System.Windows.Controls.Image>或<xref:System.Windows.Media.Imaging.CroppedBitmap>可用。</span><span class="sxs-lookup"><span data-stu-id="a1c25-172">To crop an image, either the <xref:System.Windows.UIElement.Clip%2A> property of <xref:System.Windows.Controls.Image> or <xref:System.Windows.Media.Imaging.CroppedBitmap> can be used.</span></span> <span data-ttu-id="a1c25-173">通常情况下，如果您只想要显示的图像，一部分<xref:System.Windows.UIElement.Clip%2A>应使用。</span><span class="sxs-lookup"><span data-stu-id="a1c25-173">Typically, if you just want to display a portion of an image, <xref:System.Windows.UIElement.Clip%2A> should be used.</span></span> <span data-ttu-id="a1c25-174">如果你需要进行编码，并保存裁剪的图像，<xref:System.Windows.Media.Imaging.CroppedBitmap>应使用。</span><span class="sxs-lookup"><span data-stu-id="a1c25-174">If you need to encode and save a cropped image, the <xref:System.Windows.Media.Imaging.CroppedBitmap> should be used.</span></span> <span data-ttu-id="a1c25-175">在下面的示例中，使用剪辑属性使用裁剪图像<xref:System.Windows.Media.EllipseGeometry>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-175">In the following example, an image is cropped using the Clip property using an <xref:System.Windows.Media.EllipseGeometry>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#CroppedXAMLUsingClip1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml#croppedxamlusingclip1)]  
  
 [!code-csharp[ImageElementExample_snip#CroppedCSharpUsingClip1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml.cs#croppedcsharpusingclip1)]
 [!code-vb[ImageElementExample_snip#CroppedCSharpUsingClip1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/CroppedImageExample.xaml.vb#croppedcsharpusingclip1)]  
  
#### <a name="stretching-images"></a><span data-ttu-id="a1c25-176">拉伸图像</span><span class="sxs-lookup"><span data-stu-id="a1c25-176">Stretching Images</span></span>  
 <span data-ttu-id="a1c25-177"><xref:System.Windows.Controls.Image.Stretch%2A>属性控制如何拉伸图像以填充其容器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-177">The <xref:System.Windows.Controls.Image.Stretch%2A> property controls how an image is stretched to fill its container.</span></span> <span data-ttu-id="a1c25-178"><xref:System.Windows.Controls.Image.Stretch%2A>属性接受以下值，通过定义<xref:System.Windows.Media.Stretch>枚举：</span><span class="sxs-lookup"><span data-stu-id="a1c25-178">The <xref:System.Windows.Controls.Image.Stretch%2A> property accepts the following values, defined by the <xref:System.Windows.Media.Stretch> enumeration:</span></span>  
  
-   <span data-ttu-id="a1c25-179"><xref:System.Windows.Media.Stretch.None>： 的映像不拉伸以填充输出区域。</span><span class="sxs-lookup"><span data-stu-id="a1c25-179"><xref:System.Windows.Media.Stretch.None>: The image is not stretched to fill the output area.</span></span> <span data-ttu-id="a1c25-180">如果图像比输出区域大，将图像绘制到输出区域，剪裁掉无法容纳的内容。</span><span class="sxs-lookup"><span data-stu-id="a1c25-180">If the image is larger than the output area, the image is drawn to the output area, clipping what does not fit.</span></span>  
  
-   <span data-ttu-id="a1c25-181"><xref:System.Windows.Media.Stretch.Fill>： 的映像进行缩放以适合输出区域。</span><span class="sxs-lookup"><span data-stu-id="a1c25-181"><xref:System.Windows.Media.Stretch.Fill>: The image is scaled to fit the output area.</span></span> <span data-ttu-id="a1c25-182">由于图像的高度和宽度独立进行缩放，因此图像的原始纵横比可能不会保留。</span><span class="sxs-lookup"><span data-stu-id="a1c25-182">Because the image height and width are scaled independently, the original aspect ratio of the image might not be preserved.</span></span> <span data-ttu-id="a1c25-183">也就是说，为了完全填充输出容器，图像可能会扭曲。</span><span class="sxs-lookup"><span data-stu-id="a1c25-183">That is, the image might be warped in order to completely fill the output container.</span></span>  
  
-   <span data-ttu-id="a1c25-184"><xref:System.Windows.Media.Stretch.Uniform>： 将图像进行缩放，以便它在输出区域内完全适合。</span><span class="sxs-lookup"><span data-stu-id="a1c25-184"><xref:System.Windows.Media.Stretch.Uniform>: The image is scaled so that it fits completely within the output area.</span></span> <span data-ttu-id="a1c25-185">图像的纵横比会保留。</span><span class="sxs-lookup"><span data-stu-id="a1c25-185">The image's aspect ratio is preserved.</span></span>  
  
-   <span data-ttu-id="a1c25-186"><xref:System.Windows.Media.Stretch.UniformToFill>： 将图像进行缩放，以便在保留图像的原始纵横比的同时完全填充输出区域。</span><span class="sxs-lookup"><span data-stu-id="a1c25-186"><xref:System.Windows.Media.Stretch.UniformToFill>: The image is scaled so that it completely fills the output area while preserving the image's original aspect ratio.</span></span>  
  
 <span data-ttu-id="a1c25-187">下面的示例应用每个可用<xref:System.Windows.Media.Stretch>枚举到<xref:System.Windows.Controls.Image>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-187">The following example applies each of the available <xref:System.Windows.Media.Stretch> enumerations to an <xref:System.Windows.Controls.Image>.</span></span>  
  
 <span data-ttu-id="a1c25-188">下图显示的示例的输出，并演示了不同的影响<xref:System.Windows.Controls.Image.Stretch%2A>时必须设置应用于映像。</span><span class="sxs-lookup"><span data-stu-id="a1c25-188">The following image shows the output from the example and demonstrates the affect the different <xref:System.Windows.Controls.Image.Stretch%2A> settings have when applied to an image.</span></span>  
  
 <span data-ttu-id="a1c25-189">![Different TileBrush Stretch settings](../../../../docs/framework/wpf/graphics-multimedia/media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span><span class="sxs-lookup"><span data-stu-id="a1c25-189">![Different TileBrush Stretch settings](../../../../docs/framework/wpf/graphics-multimedia/media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span></span>  
<span data-ttu-id="a1c25-190">不同的拉伸设置</span><span class="sxs-lookup"><span data-stu-id="a1c25-190">Different stretch settings</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageStretchExampleWholePage](../../../../samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageStretchExample.xaml#imagestretchexamplewholepage)]  
  
### <a name="painting-with-images"></a><span data-ttu-id="a1c25-191">使用图像进行绘制</span><span class="sxs-lookup"><span data-stu-id="a1c25-191">Painting with Images</span></span>  
 <span data-ttu-id="a1c25-192">映像也在应用程序通过绘制与显示<xref:System.Windows.Media.Brush>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-192">Images can also be displayed in an application by painting with a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="a1c25-193">借助画笔，可以利用任意内容（从简单的纯色到复杂的图案和图像集）绘制 [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 对象。</span><span class="sxs-lookup"><span data-stu-id="a1c25-193">Brushes enable you to paint [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] objects with anything from simple, solid colors to complex sets of patterns and images.</span></span> <span data-ttu-id="a1c25-194">若要绘制图像，请使用<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-194">To paint with images, use an <xref:System.Windows.Media.ImageBrush>.</span></span> <span data-ttu-id="a1c25-195"><xref:System.Windows.Media.ImageBrush>是一种<xref:System.Windows.Media.TileBrush>作为位图图像定义其内容。</span><span class="sxs-lookup"><span data-stu-id="a1c25-195">An <xref:System.Windows.Media.ImageBrush> is a type of <xref:System.Windows.Media.TileBrush> that defines its content as a bitmap image.</span></span> <span data-ttu-id="a1c25-196"><xref:System.Windows.Media.ImageBrush>显示一幅图像，通过指定其<xref:System.Windows.Media.ImageBrush.ImageSource%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="a1c25-196">An <xref:System.Windows.Media.ImageBrush> displays a single image, which is specified by its <xref:System.Windows.Media.ImageBrush.ImageSource%2A> property.</span></span> <span data-ttu-id="a1c25-197">可以控制图像的拉伸、对齐和平铺方式，从而防止失真并生成图案和其他效果。</span><span class="sxs-lookup"><span data-stu-id="a1c25-197">You can control how the image is stretched, aligned, and tiled, enabling you to prevent distortion and produce patterns and other effects.</span></span> <span data-ttu-id="a1c25-198">下图显示了可以通过一些副作用<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-198">The following illustration shows some effects that can be achieved with an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 <span data-ttu-id="a1c25-199">![ImageBrush 输出示例](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span><span class="sxs-lookup"><span data-stu-id="a1c25-199">![ImageBrush output examples](../../../../docs/framework/wpf/graphics-multimedia/media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span></span>  
<span data-ttu-id="a1c25-200">图像画笔可以填充形状、控件、文本等</span><span class="sxs-lookup"><span data-stu-id="a1c25-200">Image brushes can fill shapes, controls, text, and more</span></span>  
  
 <span data-ttu-id="a1c25-201">下面的示例演示如何绘制背景的图像使用的按钮<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-201">The following example demonstrates how to paint the background of a button with an image using an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 [!code-xaml[UsingImageBrush#4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/UsingImageBrush/CS/PaintingWithImages.xaml#4)]  
  
 <span data-ttu-id="a1c25-202">有关其他信息<xref:System.Windows.Media.ImageBrush>和绘制图像请参阅[使用图像、 图形和视觉对象进行绘制](../../../../docs/framework/wpf/graphics-multimedia/painting-with-images-drawings-and-visuals.md)。</span><span class="sxs-lookup"><span data-stu-id="a1c25-202">For additional information about <xref:System.Windows.Media.ImageBrush> and painting images see [Painting with Images, Drawings, and Visuals](../../../../docs/framework/wpf/graphics-multimedia/painting-with-images-drawings-and-visuals.md).</span></span>  
  
<a name="_metadata"></a>   
## <a name="image-metadata"></a><span data-ttu-id="a1c25-203">图像元数据</span><span class="sxs-lookup"><span data-stu-id="a1c25-203">Image Metadata</span></span>  
 <span data-ttu-id="a1c25-204">某些图像文件包含用于描述文件的内容或特征的元数据。</span><span class="sxs-lookup"><span data-stu-id="a1c25-204">Some image files contain metadata that describes the content or the characteristics of the file.</span></span> <span data-ttu-id="a1c25-205">例如，大多数数数字相机创建的图像中包含用于捕获该图像的照相机品牌和型号的元数据。</span><span class="sxs-lookup"><span data-stu-id="a1c25-205">For example, most digital cameras create images that contain metadata about the make and model of the camera used to capture the image.</span></span> <span data-ttu-id="a1c25-206">每种图像格式处理元数据的方式不同，但 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 为存储和检索每种受支持图像格式的元数据提供了一种统一方式。</span><span class="sxs-lookup"><span data-stu-id="a1c25-206">Each image format handles metadata differently but [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] provides a uniform way of storing and retrieving metadata for each supported image format.</span></span>  
  
 <span data-ttu-id="a1c25-207">通过提供对元数据的访问<xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A>属性<xref:System.Windows.Media.Imaging.BitmapSource>对象。</span><span class="sxs-lookup"><span data-stu-id="a1c25-207">Access to metadata is provided through the <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> property of a <xref:System.Windows.Media.Imaging.BitmapSource> object.</span></span> <span data-ttu-id="a1c25-208"><xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> 返回<xref:System.Windows.Media.Imaging.BitmapMetadata>包括映像包含的所有元数据的对象。</span><span class="sxs-lookup"><span data-stu-id="a1c25-208"><xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> returns a <xref:System.Windows.Media.Imaging.BitmapMetadata> object that includes all the metadata contained by the image.</span></span> <span data-ttu-id="a1c25-209">此数据可以位于一个元数据架构中或位于不同架构的组合中。</span><span class="sxs-lookup"><span data-stu-id="a1c25-209">This data may be in one metadata schema or a combination of different schemes.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)]<span data-ttu-id="a1c25-210"> 支持以下图像元数据架构：[!INCLUDE[TLA#tla_exif](../../../../includes/tlasharptla-exif-md.md)]、tEXt（PNG 文本数据）、[!INCLUDE[TLA#tla_ifd](../../../../includes/tlasharptla-ifd-md.md)]、[!INCLUDE[TLA#tla_iptc](../../../../includes/tlasharptla-iptc-md.md)] 和 [!INCLUDE[TLA#tla_xmp](../../../../includes/tlasharptla-xmp-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="a1c25-210"> supports the following image metadata schemas: [!INCLUDE[TLA#tla_exif](../../../../includes/tlasharptla-exif-md.md)], tEXt (PNG Textual Data), [!INCLUDE[TLA#tla_ifd](../../../../includes/tlasharptla-ifd-md.md)], [!INCLUDE[TLA#tla_iptc](../../../../includes/tlasharptla-iptc-md.md)], and [!INCLUDE[TLA#tla_xmp](../../../../includes/tlasharptla-xmp-md.md)].</span></span>  
  
 <span data-ttu-id="a1c25-211">为了简化读取元数据的过程<xref:System.Windows.Media.Imaging.BitmapMetadata>提供多个命名的属性，可以如轻松访问<xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>， <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>，和<xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>。</span><span class="sxs-lookup"><span data-stu-id="a1c25-211">In order to simplify the process of reading metadata, <xref:System.Windows.Media.Imaging.BitmapMetadata> provides several named properties that can be easily accessed such as <xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>, <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>, and <xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>.</span></span> <span data-ttu-id="a1c25-212">许多命名属性还可以用于编写元数据。</span><span class="sxs-lookup"><span data-stu-id="a1c25-212">Many of these named properties can also be used to write metadata.</span></span> <span data-ttu-id="a1c25-213">元数据查询读取器提供对读取元数据的其他支持。</span><span class="sxs-lookup"><span data-stu-id="a1c25-213">Additional support for reading metadata is provided by the metadata query reader.</span></span> <span data-ttu-id="a1c25-214"><xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A>方法用于检索元数据查询读取器通过如提供字符串查询 *"/ app1/exif /"*。</span><span class="sxs-lookup"><span data-stu-id="a1c25-214">The <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> method is used to retrieve a metadata query reader by providing a string query such as *"/app1/exif/"*.</span></span> <span data-ttu-id="a1c25-215">在下面的示例中，<xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A>用于获取文本存储在 *"/ 文本/说明"* 位置。</span><span class="sxs-lookup"><span data-stu-id="a1c25-215">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> is used to obtain the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#GetQuery](../../../../samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#getquery)]
 [!code-csharp[BitmapMetadata#GetQuery](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#getquery)]
 [!code-vb[BitmapMetadata#GetQuery](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#getquery)]  
  
 <span data-ttu-id="a1c25-216">若要编写元数据，请使用元数据查询编写器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-216">To write metadata, a metadata query writer is used.</span></span> <span data-ttu-id="a1c25-217"><xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> 获取查询编写器和设置所需的值。</span><span class="sxs-lookup"><span data-stu-id="a1c25-217"><xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> obtains the query writer and sets the desired value.</span></span> <span data-ttu-id="a1c25-218">在下面的示例中，<xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A>用于写入文本存储在 *"/ 文本/说明"* 位置。</span><span class="sxs-lookup"><span data-stu-id="a1c25-218">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> is used to write the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#SetQuery](../../../../samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#setquery)]
 [!code-csharp[BitmapMetadata#SetQuery](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#setquery)]
 [!code-vb[BitmapMetadata#SetQuery](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#setquery)]  
  
<a name="_extensibility"></a>   
## <a name="codec-extensibility"></a><span data-ttu-id="a1c25-219">编解码器扩展性</span><span class="sxs-lookup"><span data-stu-id="a1c25-219">Codec Extensibility</span></span>  
 <span data-ttu-id="a1c25-220">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 的核心功能是用于新图像编解码器的扩展性模型。</span><span class="sxs-lookup"><span data-stu-id="a1c25-220">A core feature of [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] is the extensibility model for new image codecs.</span></span> <span data-ttu-id="a1c25-221">通过这些非托管的接口，编解码器开发人员可以将编解码器与 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 集成，这样 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 应用程序就可以自动使用新的图像格式。</span><span class="sxs-lookup"><span data-stu-id="a1c25-221">These unmanaged interfaces enable codec developers to integrate codecs with [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] so new image formats can automatically be used by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="a1c25-222">有关扩展性 [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] 的示例，请参阅 [Win32 示例编解码器](http://go.microsoft.com/fwlink/?LinkID=160052)。</span><span class="sxs-lookup"><span data-stu-id="a1c25-222">For a sample of the extensibility [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], see the [Win32 Sample Codec](http://go.microsoft.com/fwlink/?LinkID=160052).</span></span> <span data-ttu-id="a1c25-223">此示例演示如何为自定义图像格式创建解码器和编码器。</span><span class="sxs-lookup"><span data-stu-id="a1c25-223">This sample demonstrates how to create a decoder and encoder for a custom image format.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a1c25-224">编解码器必须进行数字签名，系统才能够识别它。</span><span class="sxs-lookup"><span data-stu-id="a1c25-224">The codec must be digitally signed for the system to recognize it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a1c25-225">请参阅</span><span class="sxs-lookup"><span data-stu-id="a1c25-225">See Also</span></span>  
 <xref:System.Windows.Media.Imaging.BitmapSource>  
 <xref:System.Windows.Media.Imaging.BitmapImage>  
 <xref:System.Windows.Controls.Image>  
 <xref:System.Windows.Media.Imaging.BitmapMetadata>  
 [<span data-ttu-id="a1c25-226">2D 图形和图像处理</span><span class="sxs-lookup"><span data-stu-id="a1c25-226">2D Graphics and Imaging</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-2d-graphics-and-imaging.md)  
 [<span data-ttu-id="a1c25-227">Win32 示例编解码器</span><span class="sxs-lookup"><span data-stu-id="a1c25-227">Win32 Sample Codec</span></span>](http://go.microsoft.com/fwlink/?LinkID=160052)
