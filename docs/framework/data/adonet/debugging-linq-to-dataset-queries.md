---
title: 调试 LINQ to DataSet 查询
ms.date: 03/30/2017
ms.assetid: f4c54015-8ce2-4c5c-8d18-7038144cc66d
ms.openlocfilehash: c0d3347358fa3417f8b73fd848b4091fe7d74a15
ms.sourcegitcommit: 11f11ca6cefe555972b3a5c99729d1a7523d8f50
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/03/2018
---
# <a name="debugging-linq-to-dataset-queries"></a><span data-ttu-id="dac65-102">调试 LINQ to DataSet 查询</span><span class="sxs-lookup"><span data-stu-id="dac65-102">Debugging LINQ to DataSet Queries</span></span>
[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]<span data-ttu-id="dac65-103"> 支持 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 代码的调试。</span><span class="sxs-lookup"><span data-stu-id="dac65-103"> supports the debugging of [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] code.</span></span> <span data-ttu-id="dac65-104">但是，有一些差异调试[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]代码和非-[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]托管代码。</span><span class="sxs-lookup"><span data-stu-id="dac65-104">However, there are some differences between debugging [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] code and non-[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] managed code.</span></span> <span data-ttu-id="dac65-105">大多数调试功能都适用于[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]语句，其中包括单步执行、 设置断点，以及查看调试器窗口中显示的结果。</span><span class="sxs-lookup"><span data-stu-id="dac65-105">Most debugging features work with [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] statements, including stepping, setting breakpoints, and viewing results that are shown in debugger windows.</span></span> <span data-ttu-id="dac65-106">而且，延迟查询执行一些在调试时应考虑的副作用[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]代码，并有一些限制使用编辑并继续。</span><span class="sxs-lookup"><span data-stu-id="dac65-106">However, deferred query execution in has some side effects that you should consider while debugging [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] code and there are some limitations to using Edit and Continue.</span></span> <span data-ttu-id="dac65-107">本主题讨论调试方面的问题，该调试对于与非 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 托管代码对比的 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 来说是唯一的。</span><span class="sxs-lookup"><span data-stu-id="dac65-107">This topic discusses aspects of debugging that are unique to [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] compared to non-[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] managed code.</span></span>  
  
## <a name="viewing-results"></a><span data-ttu-id="dac65-108">查看结果</span><span class="sxs-lookup"><span data-stu-id="dac65-108">Viewing Results</span></span>  
 <span data-ttu-id="dac65-109">你可以查看的结果[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]通过使用数据提示、 监视窗口和快速监视对话框中的语句。</span><span class="sxs-lookup"><span data-stu-id="dac65-109">You can view the result of a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] statement by using DataTips, the Watch window, and the QuickWatch dialog box.</span></span> <span data-ttu-id="dac65-110">使用源窗口，可以将指针暂时停留在源窗口中的查询上，这样数据提示就会出现。</span><span class="sxs-lookup"><span data-stu-id="dac65-110">By using a source window, you can pause the pointer on a query in the source window and a DataTip will appear.</span></span> <span data-ttu-id="dac65-111">可以复制 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 变量，然后将其粘贴到“监视”窗口或“快速监视”对话框。</span><span class="sxs-lookup"><span data-stu-id="dac65-111">You can copy a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] variable and paste it into the Watch window or the QuickWatch dialog box.</span></span> <span data-ttu-id="dac65-112">在 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 中，创建或声明查询时并不计算查询，而只在执行查询时才计算。</span><span class="sxs-lookup"><span data-stu-id="dac65-112">In [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)], a query is not evaluated when it is created or declared, but only when the query is executed.</span></span> <span data-ttu-id="dac65-113">这称为*延迟执行*。</span><span class="sxs-lookup"><span data-stu-id="dac65-113">This is called *deferred execution*.</span></span> <span data-ttu-id="dac65-114">因此，查询变量直到计算时才有值。</span><span class="sxs-lookup"><span data-stu-id="dac65-114">Therefore, the query variable does not have a value until it is evaluated.</span></span> <span data-ttu-id="dac65-115">有关详细信息，请参阅[LINQ to DataSet 中的查询](../../../../docs/framework/data/adonet/queries-in-linq-to-dataset.md)。</span><span class="sxs-lookup"><span data-stu-id="dac65-115">For more information, see [Queries in LINQ to DataSet](../../../../docs/framework/data/adonet/queries-in-linq-to-dataset.md).</span></span>  
  
 <span data-ttu-id="dac65-116">调试程序必须计算查询才能显示查询结果。</span><span class="sxs-lookup"><span data-stu-id="dac65-116">The debugger must evaluate a query to display the query results.</span></span> <span data-ttu-id="dac65-117">当您在调试程序中查看 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 查询结果时，将进行此隐式计算，应考虑到这存在一些副作用。</span><span class="sxs-lookup"><span data-stu-id="dac65-117">This implicit evaluation occurs when you view a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] query result in the debugger, and it has some effects you should consider.</span></span> <span data-ttu-id="dac65-118">查询的每次计算都需要时间。</span><span class="sxs-lookup"><span data-stu-id="dac65-118">Each evaluation of the query takes time.</span></span> <span data-ttu-id="dac65-119">展开结果节点需要时间。</span><span class="sxs-lookup"><span data-stu-id="dac65-119">Expanding the results node takes time.</span></span> <span data-ttu-id="dac65-120">对于某些查询，重复计算可能引起明显的性能损失。</span><span class="sxs-lookup"><span data-stu-id="dac65-120">For some queries, repeated evaluation might cause a noticeable performance penalty.</span></span> <span data-ttu-id="dac65-121">计算查询也会有副作用，这些副作用会更改数据值或程序的状态。</span><span class="sxs-lookup"><span data-stu-id="dac65-121">Evaluating a query can also cause side effects, which are changes to the value of data or the state of your program.</span></span> <span data-ttu-id="dac65-122">不是所有查询都具有副作用。</span><span class="sxs-lookup"><span data-stu-id="dac65-122">Not all queries have side effects.</span></span> <span data-ttu-id="dac65-123">若要确定查询是否可以安全计算而没有副作用，必须了解实现查询的代码。</span><span class="sxs-lookup"><span data-stu-id="dac65-123">To determine whether a query can be safely evaluated without side effects, you must understand the code that implements the query.</span></span> <span data-ttu-id="dac65-124">有关详细信息，请参阅[副作用与表达式](http://msdn.microsoft.com/library/e1f8a6ea-9e19-481d-b6bd-df120ad3bf4e)。</span><span class="sxs-lookup"><span data-stu-id="dac65-124">For more information, see [Side Effects and Expressions](http://msdn.microsoft.com/library/e1f8a6ea-9e19-481d-b6bd-df120ad3bf4e).</span></span>  
  
## <a name="edit-and-continue"></a><span data-ttu-id="dac65-125">编辑并继续</span><span class="sxs-lookup"><span data-stu-id="dac65-125">Edit and Continue</span></span>  
 <span data-ttu-id="dac65-126">编辑并继续不支持更改[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]查询。</span><span class="sxs-lookup"><span data-stu-id="dac65-126">Edit and Continue does not support changes to [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] queries.</span></span> <span data-ttu-id="dac65-127">如果添加、 删除或更改[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]语句中的调试会话期间，会出现一个对话框，告诉你编辑并继续不支持该更改。</span><span class="sxs-lookup"><span data-stu-id="dac65-127">If you add, remove, or change a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] statement during a debugging session, a dialog box appears that tells you the change is not supported by Edit and Continue.</span></span> <span data-ttu-id="dac65-128">此时，可以撤消更改，或停止调试会话并对编辑的代码重新启动新会话。</span><span class="sxs-lookup"><span data-stu-id="dac65-128">At that point, you can either undo the changes or stop the debugging session and restart a new session with the edited code.</span></span>  
  
 <span data-ttu-id="dac65-129">此外，编辑并继续不支持更改类型或使用中的变量的值[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]语句。</span><span class="sxs-lookup"><span data-stu-id="dac65-129">In addition, Edit and Continue does not support changing the type or the value of a variable that is used in a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] statement.</span></span> <span data-ttu-id="dac65-130">同样，可以撤消更改，或停止并重新启动调试会话。</span><span class="sxs-lookup"><span data-stu-id="dac65-130">Again, you can either undo the changes or stop and restart the debugging session.</span></span>  
  
 <span data-ttu-id="dac65-131">在 Visual C# 中 Visual Studio 中，你不能使用编辑并继续中包含的方法的任何代码[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]查询。</span><span class="sxs-lookup"><span data-stu-id="dac65-131">In Visual C# in Visual Studio, you cannot use Edit and Continue on any code in a method that contains a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] query.</span></span>  
  
 <span data-ttu-id="dac65-132">在 Visual Studio 中 Visual Basic 中，你可以使用编辑并继续对非[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]甚至中包含的方法代码[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]查询。</span><span class="sxs-lookup"><span data-stu-id="dac65-132">In Visual Basic in Visual Studio, you can use Edit and Continue on non-[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] code, even in a method that contains a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] query.</span></span> <span data-ttu-id="dac65-133">可以在 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 语句之前添加或移除代码，即使这些更改会影响 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 查询的行号。</span><span class="sxs-lookup"><span data-stu-id="dac65-133">You can add or remove code before the [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] statement, even if the changes affect line number of the [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] query.</span></span> <span data-ttu-id="dac65-134">Visual Basic 调试体验非[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]代码保持不变之前,[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)]引入了。</span><span class="sxs-lookup"><span data-stu-id="dac65-134">Your Visual Basic debugging experience for non-[!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] code remains the same as it was before [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] was introduced.</span></span> <span data-ttu-id="dac65-135">但是，您无法更改、添加或移除 [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] 查询，除非停止调试才能应用这些更改。</span><span class="sxs-lookup"><span data-stu-id="dac65-135">You cannot change, add, or remove a [!INCLUDE[linq_dataset](../../../../includes/linq-dataset-md.md)] query, however, unless you stop debugging to apply the changes.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dac65-136">请参阅</span><span class="sxs-lookup"><span data-stu-id="dac65-136">See Also</span></span>  
 [<span data-ttu-id="dac65-137">调试托管代码</span><span class="sxs-lookup"><span data-stu-id="dac65-137">Debugging Managed Code</span></span>](/visualstudio/debugger/debugging-managed-code)  
 [<span data-ttu-id="dac65-138">编程指南</span><span class="sxs-lookup"><span data-stu-id="dac65-138">Programming Guide</span></span>](../../../../docs/framework/data/adonet/programming-guide-linq-to-dataset.md)
