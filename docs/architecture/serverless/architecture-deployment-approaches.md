---
title: 体系结构部署方法 - 无服务器应用
description: 有关将企业体系结构部署到云的不同方式的指南，其中包括 IaaS、PaaS、容器和无服务器之间的对比。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: c745a4eb1c6f4a00bf139100b02f31cf3327d01e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/14/2020
ms.locfileid: "72522725"
---
# <a name="architecture-deployment-approaches"></a><span data-ttu-id="de3e2-103">体系结构部署方法</span><span class="sxs-lookup"><span data-stu-id="de3e2-103">Architecture deployment approaches</span></span>

<span data-ttu-id="de3e2-104">无论用于设计商业应用程序的体系结构方法如何，这些应用程序的实现或部署都可能有所不同。</span><span class="sxs-lookup"><span data-stu-id="de3e2-104">Regardless of the architecture approach used to design a business application, the implementation, or deployment of those applications may vary.</span></span> <span data-ttu-id="de3e2-105">企业可以在从物理硬件到无服务器函数的所有内容上托管应用程序。</span><span class="sxs-lookup"><span data-stu-id="de3e2-105">Businesses host applications on everything from physical hardware to serverless functions.</span></span>

## <a name="n-tier-applications"></a><span data-ttu-id="de3e2-106">N 层应用程序</span><span class="sxs-lookup"><span data-stu-id="de3e2-106">N-Tier applications</span></span>

<span data-ttu-id="de3e2-107">[N 层体系结构模式](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier)是一种成熟的体系结构，仅指将各种逻辑层分离为单独的物理层的应用程序。</span><span class="sxs-lookup"><span data-stu-id="de3e2-107">The [N-Tier architecture pattern](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) is a mature architecture and simply refers to applications that separate various logical layers into separate physical tiers.</span></span> <span data-ttu-id="de3e2-108">N 层体系结构是 N 层体系结构的物理实现。</span><span class="sxs-lookup"><span data-stu-id="de3e2-108">N-Tier architecture is a physical implementation of N-Layer architecture.</span></span> <span data-ttu-id="de3e2-109">此体系结构最常见的实现包括：</span><span class="sxs-lookup"><span data-stu-id="de3e2-109">The most common implementation of this architecture includes:</span></span>

- <span data-ttu-id="de3e2-110">表示层，例如 Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="de3e2-110">A presentation tier, for example a web app.</span></span>
- <span data-ttu-id="de3e2-111">API 或数据访问层，如 REST API。</span><span class="sxs-lookup"><span data-stu-id="de3e2-111">An API or data access tier, such as a REST API.</span></span>
- <span data-ttu-id="de3e2-112">数据层，如 SQL 数据库。</span><span class="sxs-lookup"><span data-stu-id="de3e2-112">A data tier, such as a SQL database.</span></span>

![N 层体系结构](./media/n-tier-architecture.png)

<span data-ttu-id="de3e2-114">N 层解决方案具有以下特征：</span><span class="sxs-lookup"><span data-stu-id="de3e2-114">N-tier solutions have the following characteristics:</span></span>

- <span data-ttu-id="de3e2-115">项目通常与层一致。</span><span class="sxs-lookup"><span data-stu-id="de3e2-115">Projects are typically aligned with tiers.</span></span>
- <span data-ttu-id="de3e2-116">各个层的测试方法可能有所不同。</span><span class="sxs-lookup"><span data-stu-id="de3e2-116">Testing may be approached differently by tier.</span></span>
- <span data-ttu-id="de3e2-117">各层提供抽象层，例如，表示层通常不了解数据层的实现细节。</span><span class="sxs-lookup"><span data-stu-id="de3e2-117">Tiers provide layers of abstraction, for example the presentation tier is typically ignorant of the implementation details of the data tier.</span></span>
- <span data-ttu-id="de3e2-118">通常，各层仅与相邻层交互。</span><span class="sxs-lookup"><span data-stu-id="de3e2-118">Typically, layers only interact with adjacent layers.</span></span>
- <span data-ttu-id="de3e2-119">发布通常是在项目上进行管理的，因此是层、级。</span><span class="sxs-lookup"><span data-stu-id="de3e2-119">Releases are often managed at the project, and therefore tier, level.</span></span> <span data-ttu-id="de3e2-120">简单的 API 更改可能需要重新发布整个中间层。</span><span class="sxs-lookup"><span data-stu-id="de3e2-120">A simple API change may require a new release of an entire middle tier.</span></span>

<span data-ttu-id="de3e2-121">这种方法具有多项优势，包括：</span><span class="sxs-lookup"><span data-stu-id="de3e2-121">This approach provides several benefits, including:</span></span>

- <span data-ttu-id="de3e2-122">隔离数据库（通常前端无法直接访问数据库后端）。</span><span class="sxs-lookup"><span data-stu-id="de3e2-122">Isolation of the database (often the front end doesn't have direct access to the database back end).</span></span>
- <span data-ttu-id="de3e2-123">重用 API（例如，移动、桌面和 Web 应用客户端都可以重用相同的 API）。</span><span class="sxs-lookup"><span data-stu-id="de3e2-123">Reuse of the API (for example, mobile, desktop, and web app clients can all reuse the same APIs).</span></span>
- <span data-ttu-id="de3e2-124">能够相互独立地横向扩展层。</span><span class="sxs-lookup"><span data-stu-id="de3e2-124">Ability to scale out tiers independent of each other.</span></span>
- <span data-ttu-id="de3e2-125">重构隔离：可以在不影响其他层的情况下重构一个层。</span><span class="sxs-lookup"><span data-stu-id="de3e2-125">Refactoring isolation: one tier may be refactored without impacting other tiers.</span></span>

## <a name="on-premises-and-infrastructure-as-a-service-iaas"></a><span data-ttu-id="de3e2-126">本地和基础结构即服务 (IaaS)</span><span class="sxs-lookup"><span data-stu-id="de3e2-126">On-premises and Infrastructure as a Service (IaaS)</span></span>

<span data-ttu-id="de3e2-127">托管应用程序的传统方法需要购买硬件并管理所有软件安装，包括操作系统。</span><span class="sxs-lookup"><span data-stu-id="de3e2-127">The traditional approach to hosting applications requires buying hardware and managing all of the software installations, including the operating system.</span></span> <span data-ttu-id="de3e2-128">最初，这涉及到昂贵的数据中心和物理硬件。</span><span class="sxs-lookup"><span data-stu-id="de3e2-128">Originally this involved expensive data centers and physical hardware.</span></span> <span data-ttu-id="de3e2-129">操作物理硬件所带来的挑战很多，包括：</span><span class="sxs-lookup"><span data-stu-id="de3e2-129">The challenges that come with operating physical hardware are many, including:</span></span>

- <span data-ttu-id="de3e2-130">为应对“以防万一”或高峰需求情况，需要购买额外的产品。</span><span class="sxs-lookup"><span data-stu-id="de3e2-130">The need to buy excess for "just in case" or peak demand scenarios.</span></span>
- <span data-ttu-id="de3e2-131">保护对硬件的物理访问。</span><span class="sxs-lookup"><span data-stu-id="de3e2-131">Securing physical access to the hardware.</span></span>
- <span data-ttu-id="de3e2-132">硬件失败（例如磁盘失败）的责任。</span><span class="sxs-lookup"><span data-stu-id="de3e2-132">Responsibility for hardware failure (such as disk failure).</span></span>
- <span data-ttu-id="de3e2-133">冷却。</span><span class="sxs-lookup"><span data-stu-id="de3e2-133">Cooling.</span></span>
- <span data-ttu-id="de3e2-134">配置路由器和负载平衡器。</span><span class="sxs-lookup"><span data-stu-id="de3e2-134">Configuring routers and load balancers.</span></span>
- <span data-ttu-id="de3e2-135">电源冗余。</span><span class="sxs-lookup"><span data-stu-id="de3e2-135">Power redundancy.</span></span>
- <span data-ttu-id="de3e2-136">保护软件访问。</span><span class="sxs-lookup"><span data-stu-id="de3e2-136">Securing software access.</span></span>

![IaaS 方法](./media/iaas-approach.png)

<span data-ttu-id="de3e2-138">通过“虚拟机”对硬件进行虚拟化可实现基础结构即服务 (IaaS)。</span><span class="sxs-lookup"><span data-stu-id="de3e2-138">Virtualization of hardware, via "virtual machines" enables Infrastructure as a Service (IaaS).</span></span> <span data-ttu-id="de3e2-139">有效地对主机进行分区，为实例提供资源，并为其分配各自的内存、CPU 和存储空间。</span><span class="sxs-lookup"><span data-stu-id="de3e2-139">Host machines are effectively partitioned to provide resources to instances with allocations for their own memory, CPU, and storage.</span></span> <span data-ttu-id="de3e2-140">该团队提供了必要的 VM，并配置到存储空间的相关网络和访问权限。</span><span class="sxs-lookup"><span data-stu-id="de3e2-140">The team provisions the necessary VMs and configures the associated networks and access to storage.</span></span>

<span data-ttu-id="de3e2-141">有关详细信息，请参阅[虚拟机 N 层参考体系结构](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier)。</span><span class="sxs-lookup"><span data-stu-id="de3e2-141">For more information, see [virtual machine N-tier reference architecture](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier).</span></span>

<span data-ttu-id="de3e2-142">尽管虚拟化和基础结构即服务 (IaaS) 解决了许多问题，但它仍然给基础结构团队遗留了很多问题。</span><span class="sxs-lookup"><span data-stu-id="de3e2-142">Although virtualization and Infrastructure as a Service (IaaS) address many concerns, it still leaves much responsibility in the hands of the infrastructure team.</span></span> <span data-ttu-id="de3e2-143">该团队维护操作系统版本、应用安全修补程序并在目标计算机上安装第三方依赖项。</span><span class="sxs-lookup"><span data-stu-id="de3e2-143">The team maintains operating system versions, applies security patches, and installs third-party dependencies on the target machines.</span></span> <span data-ttu-id="de3e2-144">与在测试环境中运行相比，应用程序在生产机器上的行为通常会有所不同。</span><span class="sxs-lookup"><span data-stu-id="de3e2-144">Apps often behave differently on production machines compared to the test environment.</span></span> <span data-ttu-id="de3e2-145">由于不同的依赖项版本和/或 OS SKU 级别而产生问题。</span><span class="sxs-lookup"><span data-stu-id="de3e2-145">Issues arise due to different dependency versions and/or OS SKU levels.</span></span> <span data-ttu-id="de3e2-146">尽管许多组织将 N 层应用程序部署到这些目标，但许多公司可以通过将其部署到更多云的本机模型（例如[平台即服务](#platform-as-a-service-paas)）的过程受益。</span><span class="sxs-lookup"><span data-stu-id="de3e2-146">Although many organizations deploy N-Tier applications to these targets, many companies benefit from deploying to a more cloud native model such as [Platform as a Service](#platform-as-a-service-paas).</span></span> <span data-ttu-id="de3e2-147">具有微服务的体系结构更具挑战性，因为需要横向扩展以具有伸缩性能和复原能力。</span><span class="sxs-lookup"><span data-stu-id="de3e2-147">Architectures with microservices are more challenging because of the requirements to scale out for elasticity and resiliency.</span></span>

<span data-ttu-id="de3e2-148">有关详细信息，请参阅[虚拟机](https://docs.microsoft.com/azure/virtual-machines/)。</span><span class="sxs-lookup"><span data-stu-id="de3e2-148">For more information, see [virtual machines](https://docs.microsoft.com/azure/virtual-machines/).</span></span>

## <a name="platform-as-a-service-paas"></a><span data-ttu-id="de3e2-149">平台即服务 (PaaS)</span><span class="sxs-lookup"><span data-stu-id="de3e2-149">Platform as a Service (PaaS)</span></span>

<span data-ttu-id="de3e2-150">平台即服务 (PaaS) 提供开发人员可以直接插入的已配置解决方案。</span><span class="sxs-lookup"><span data-stu-id="de3e2-150">Platform as a Service (PaaS) offers configured solutions that developers can plug into directly.</span></span> <span data-ttu-id="de3e2-151">PaaS 是托管宿主的另一个术语。</span><span class="sxs-lookup"><span data-stu-id="de3e2-151">PaaS is another term for managed hosting.</span></span> <span data-ttu-id="de3e2-152">它消除了管理基本操作系统、安全补丁以及各种情况下任何第三方依赖项的需要。</span><span class="sxs-lookup"><span data-stu-id="de3e2-152">It eliminates the need to manage the base operating system, security patches and in many cases any third-party dependencies.</span></span> <span data-ttu-id="de3e2-153">平台示例包括 Web 应用、数据库和移动后端。</span><span class="sxs-lookup"><span data-stu-id="de3e2-153">Examples of platforms include web applications, databases, and mobile back ends.</span></span>

<span data-ttu-id="de3e2-154">PaaS 解决了 IaaS 常见的挑战。</span><span class="sxs-lookup"><span data-stu-id="de3e2-154">PaaS addresses the challenges common to IaaS.</span></span> <span data-ttu-id="de3e2-155">PaaS 使开发人员可以专注于代码或数据库架构，而不是其部署方式。</span><span class="sxs-lookup"><span data-stu-id="de3e2-155">PaaS allows the developer to focus on the code or database schema rather than how it gets deployed.</span></span> <span data-ttu-id="de3e2-156">PaaS 优势包括：</span><span class="sxs-lookup"><span data-stu-id="de3e2-156">Benefits of PaaS include:</span></span>

- <span data-ttu-id="de3e2-157">付费使用模型，消除了投资闲置计算机的开销。</span><span class="sxs-lookup"><span data-stu-id="de3e2-157">Pay for use models that eliminate the overhead of investing in idle machines.</span></span>
- <span data-ttu-id="de3e2-158">直接部署、改进的 DevOps、持续集成 (CI) 和持续交付 (CD) 管道。</span><span class="sxs-lookup"><span data-stu-id="de3e2-158">Direct deployment and improved DevOps, continuous integration (CI), and continuous delivery (CD) pipelines.</span></span>
- <span data-ttu-id="de3e2-159">自动升级、更新和安全修补程序。</span><span class="sxs-lookup"><span data-stu-id="de3e2-159">Automatic upgrades, updates, and security patches.</span></span>
- <span data-ttu-id="de3e2-160">按钮横向扩展和纵向扩展（弹性缩放）。</span><span class="sxs-lookup"><span data-stu-id="de3e2-160">Push-button scale out and scale up (elastic scale).</span></span>

<span data-ttu-id="de3e2-161">一般来说，PaaS 的主要缺点是供应商锁定。</span><span class="sxs-lookup"><span data-stu-id="de3e2-161">The main disadvantage of PaaS traditionally has been vendor lock-in.</span></span> <span data-ttu-id="de3e2-162">例如，某些 PaaS 提供程序仅支持 ASP.NET、Node.js 或其他特定语言和平台。</span><span class="sxs-lookup"><span data-stu-id="de3e2-162">For example, some PaaS providers only support ASP.NET, Node.js, or other specific languages and platforms.</span></span> <span data-ttu-id="de3e2-163">诸如 Azure 应用服务之类的产品已经发展为可适用于多个平台并支持用于托管 Web 应用的多种语言和框架。</span><span class="sxs-lookup"><span data-stu-id="de3e2-163">Products like Azure App Service have evolved to address multiple platforms and support a variety of languages and frameworks for hosting web apps.</span></span>

![平台即服务体系结构](./media/paas-architecture.png)

## <a name="software-as-a-service-saas"></a><span data-ttu-id="de3e2-165">软件即服务 (SaaS)</span><span class="sxs-lookup"><span data-stu-id="de3e2-165">Software as a Service (SaaS)</span></span>

<span data-ttu-id="de3e2-166">软件即服务或 SaaS 集中托管，并且无需本地安装或配置即可使用。</span><span class="sxs-lookup"><span data-stu-id="de3e2-166">Software as a Service or SaaS is centrally hosted and available without local installation or provisioning.</span></span> <span data-ttu-id="de3e2-167">SaaS 通常托管在 PaaS 的顶层，作为用于部署软件的平台。</span><span class="sxs-lookup"><span data-stu-id="de3e2-167">SaaS often is hosted on top of PaaS as a platform for deploying software.</span></span> <span data-ttu-id="de3e2-168">SaaS 提供运行并与现有软件连接的服务。</span><span class="sxs-lookup"><span data-stu-id="de3e2-168">SaaS provides services to run and connect with existing software.</span></span> <span data-ttu-id="de3e2-169">SaaS 通常特定于行业和垂直行业。</span><span class="sxs-lookup"><span data-stu-id="de3e2-169">SaaS is often industry and vertical specific.</span></span> <span data-ttu-id="de3e2-170">SaaS 通常已获得许可，并提供客户端/服务器模型。</span><span class="sxs-lookup"><span data-stu-id="de3e2-170">SaaS is often licensed and typically provides a client/server model.</span></span> <span data-ttu-id="de3e2-171">大多数用于客户端的新式 SaaS 产品/服务都使用基于 Web 的应用。</span><span class="sxs-lookup"><span data-stu-id="de3e2-171">Most modern SaaS offerings use web-based apps for the client.</span></span> <span data-ttu-id="de3e2-172">公司通常将 SaaS 视为许可产品/服务的业务解决方案。</span><span class="sxs-lookup"><span data-stu-id="de3e2-172">Companies typically consider SaaS as a business solution to license offerings.</span></span> <span data-ttu-id="de3e2-173">它通常不会出于应用程序可伸缩性和可维护性的考虑而实现为体系结构。</span><span class="sxs-lookup"><span data-stu-id="de3e2-173">It isn't often implemented as architecture consideration for scalability and maintainability of an application.</span></span> <span data-ttu-id="de3e2-174">实际上，大多数 SaaS 解决方案均构建在 IaaS、PaaS 和/或无服务器后端上。</span><span class="sxs-lookup"><span data-stu-id="de3e2-174">Indeed, most SaaS solutions are built on IaaS, PaaS, and/or serverless back ends.</span></span>

<span data-ttu-id="de3e2-175">通过[示例应用程序](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app)详细了解有关 SaaS 的信息。</span><span class="sxs-lookup"><span data-stu-id="de3e2-175">Learn more about SaaS through a [sample application](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app).</span></span>

## <a name="containers-and-functions-as-a-service-faas"></a><span data-ttu-id="de3e2-176">容器和功能即服务 (FaaS)</span><span class="sxs-lookup"><span data-stu-id="de3e2-176">Containers and Functions as a Service (FaaS)</span></span>

<span data-ttu-id="de3e2-177">容器是一种有趣的解决方案，可实现类似 PaaS 的优势而无需 IaaS 开销。</span><span class="sxs-lookup"><span data-stu-id="de3e2-177">Containers are an interesting solution that enables PaaS-like benefits without the IaaS overhead.</span></span> <span data-ttu-id="de3e2-178">容器本质上是一个运行时，其中包含运行唯一应用程序所需的基本知识。</span><span class="sxs-lookup"><span data-stu-id="de3e2-178">A container is essentially a runtime that contains the bare essentials needed to run a unique application.</span></span> <span data-ttu-id="de3e2-179">主机操作系统和服务（例如存储）的内核或核心部分在主机上共享。</span><span class="sxs-lookup"><span data-stu-id="de3e2-179">The kernel or core part of the host operating system and services such as storage are shared across a host.</span></span> <span data-ttu-id="de3e2-180">共享内核使容器变得轻巧（与典型虚拟机的千兆字节大小相比，有些容器大小仅为兆字节）。</span><span class="sxs-lookup"><span data-stu-id="de3e2-180">The shared kernel enables containers to be lightweight (some are mere megabytes in size, compared to the gigabyte size of typical virtual machines).</span></span> <span data-ttu-id="de3e2-181">在主机已在运行的情况下，可以快速启动容器，从而提升高可用性。</span><span class="sxs-lookup"><span data-stu-id="de3e2-181">With hosts already running, containers can be started quickly, facilitating high availability.</span></span> <span data-ttu-id="de3e2-182">快速启动容器功能还提供了额外的复原能力层。</span><span class="sxs-lookup"><span data-stu-id="de3e2-182">The ability to spin up containers quickly also provides extra layers of resiliency.</span></span> <span data-ttu-id="de3e2-183">Docker 较为常用的容器实现方式之一。</span><span class="sxs-lookup"><span data-stu-id="de3e2-183">Docker is one of the more popular implementations of containers.</span></span>

<span data-ttu-id="de3e2-184">容器的优点包括：</span><span class="sxs-lookup"><span data-stu-id="de3e2-184">Benefits of containers include:</span></span>

- <span data-ttu-id="de3e2-185">轻便且便携</span><span class="sxs-lookup"><span data-stu-id="de3e2-185">Lightweight and portable</span></span>
- <span data-ttu-id="de3e2-186">自包含，因此无需安装依赖项</span><span class="sxs-lookup"><span data-stu-id="de3e2-186">Self-contained so no need to install dependencies</span></span>
- <span data-ttu-id="de3e2-187">无论主机如何，都提供一致的环境（在便携式计算机上运行与在云服务器上运行完全相同）</span><span class="sxs-lookup"><span data-stu-id="de3e2-187">Provide a consistent environment regardless of the host (runs exactly same on a laptop as on a cloud server)</span></span>
- <span data-ttu-id="de3e2-188">可以快速预配以进行横向扩展</span><span class="sxs-lookup"><span data-stu-id="de3e2-188">Can be provisioned quickly for scale-out</span></span>
- <span data-ttu-id="de3e2-189">可以快速重启以便从故障中恢复</span><span class="sxs-lookup"><span data-stu-id="de3e2-189">Can be restarted quickly to recover from failure</span></span>

<span data-ttu-id="de3e2-190">容器在容器主机上运行（容器主机又可以在裸机或虚拟机上运行）。</span><span class="sxs-lookup"><span data-stu-id="de3e2-190">A container runs on a container host (that in turn may run on a bare metal machine or a virtual machine).</span></span> <span data-ttu-id="de3e2-191">多个容器或同一容器的实例可以在单个主机上运行。</span><span class="sxs-lookup"><span data-stu-id="de3e2-191">Multiple containers or instances of the same containers may run on a single host.</span></span> <span data-ttu-id="de3e2-192">为了实现真正的故障转移和复原能力，必须在主机之间缩放容器。</span><span class="sxs-lookup"><span data-stu-id="de3e2-192">For true failover and resiliency, containers must be scaled across hosts.</span></span>

<span data-ttu-id="de3e2-193">有关 Docker 容器的详细信息，请参阅[什么是 Docker](../microservices/container-docker-introduction/docker-defined.md)。</span><span class="sxs-lookup"><span data-stu-id="de3e2-193">For more information about Docker containers, see [What is Docker](../microservices/container-docker-introduction/docker-defined.md).</span></span>

<span data-ttu-id="de3e2-194">跨主机管理容器通常需要诸如 Kubernetes 之类的业务流程工具。</span><span class="sxs-lookup"><span data-stu-id="de3e2-194">Managing containers across hosts typically requires an orchestration tool such as Kubernetes.</span></span> <span data-ttu-id="de3e2-195">配置和管理业务流程解决方案可能会增加项目的额外开销和复杂性。</span><span class="sxs-lookup"><span data-stu-id="de3e2-195">Configuring and managing orchestration solutions may add additional overhead and complexity to projects.</span></span> <span data-ttu-id="de3e2-196">幸运的是，许多云提供商通过 PaaS 解决方案提供业务流程服务，简化了容器的管理。</span><span class="sxs-lookup"><span data-stu-id="de3e2-196">Fortunately, many cloud providers provide orchestration services through PaaS solutions to simplify the management of containers.</span></span>

<span data-ttu-id="de3e2-197">下图说明了 Kubernetes 安装示例。</span><span class="sxs-lookup"><span data-stu-id="de3e2-197">The following image illustrates an example Kubernetes installation.</span></span> <span data-ttu-id="de3e2-198">安装地址中的节点将横向扩展并进行故障转移。</span><span class="sxs-lookup"><span data-stu-id="de3e2-198">Nodes in the installation address scale out and failover.</span></span> <span data-ttu-id="de3e2-199">它们运行由主服务器管理的 Docker 容器实例。</span><span class="sxs-lookup"><span data-stu-id="de3e2-199">They run Docker container instances that are managed by the master server.</span></span> <span data-ttu-id="de3e2-200"> kubelet 是将命令从 Kubernetes 中继到 Docker 的客户端。</span><span class="sxs-lookup"><span data-stu-id="de3e2-200">The *kubelet* is the client that relays commands from Kubernetes to Docker.</span></span>

![Kubernetes](./media/kubernetes-example.png)

<span data-ttu-id="de3e2-202">有关业务流程的详细信息，请参阅 [Azure 上的 Kubernetes](https://docs.microsoft.com/azure/aks/intro-kubernetes)。</span><span class="sxs-lookup"><span data-stu-id="de3e2-202">For more information about orchestration, see [Kubernetes on Azure](https://docs.microsoft.com/azure/aks/intro-kubernetes).</span></span>

<span data-ttu-id="de3e2-203">函数即服务 (FaaS) 是类似于无服务器的专用容器服务。</span><span class="sxs-lookup"><span data-stu-id="de3e2-203">Functions as a Service (FaaS) is a specialized container service that is similar to serverless.</span></span> <span data-ttu-id="de3e2-204">FaaS 的特定实现称为 [OpenFaaS](https://github.com/openfaas/faas)，位于容器顶层，可以提供无服务器功能。</span><span class="sxs-lookup"><span data-stu-id="de3e2-204">A specific implementation of FaaS, called [OpenFaaS](https://github.com/openfaas/faas), sits on top of containers to provide serverless capabilities.</span></span> <span data-ttu-id="de3e2-205">OpenFaaS 提供打包了运行一段代码所需的所有容器依赖项的模板。</span><span class="sxs-lookup"><span data-stu-id="de3e2-205">OpenFaaS provides templates that package all of the container dependencies necessary to run a piece of code.</span></span> <span data-ttu-id="de3e2-206">使用模板简化了将代码部署为功能单元的过程。</span><span class="sxs-lookup"><span data-stu-id="de3e2-206">Using templates simplifies the process of deploying code as a functional unit.</span></span> <span data-ttu-id="de3e2-207">OpenFaaS 面向已包含容器和业务流程协调程序的体系结构，因为它可以使用现有的基础结构。</span><span class="sxs-lookup"><span data-stu-id="de3e2-207">OpenFaaS targets architectures that already include containers and orchestrators because it can use the existing infrastructure.</span></span> <span data-ttu-id="de3e2-208">尽管可提供无服务器功能，但它特别要求使用 Docker 和业务流程协调程序。</span><span class="sxs-lookup"><span data-stu-id="de3e2-208">Although it provides serverless functionality, it specifically requires you to use Docker and an orchestrator.</span></span>

## <a name="serverless"></a><span data-ttu-id="de3e2-209">无服务器</span><span class="sxs-lookup"><span data-stu-id="de3e2-209">Serverless</span></span>

<span data-ttu-id="de3e2-210">无服务器体系结构明确区分了代码与其宿主环境。</span><span class="sxs-lookup"><span data-stu-id="de3e2-210">A serverless architecture provides a clear separation between the code and its hosting environment.</span></span> <span data-ttu-id="de3e2-211">你可以在  函数中实现代码，该函数由  触发器调用。</span><span class="sxs-lookup"><span data-stu-id="de3e2-211">You implement code in a *function* that is invoked by a *trigger*.</span></span> <span data-ttu-id="de3e2-212">该函数退出后，可以释放其所需的所有资源。</span><span class="sxs-lookup"><span data-stu-id="de3e2-212">After that function exits, all its needed resources may be freed.</span></span> <span data-ttu-id="de3e2-213">触发操作可以是定时的手动进程、HTTP 请求或文件上传。</span><span class="sxs-lookup"><span data-stu-id="de3e2-213">The trigger might be manual, a timed process, an HTTP request, or a file upload.</span></span> <span data-ttu-id="de3e2-214">触发的结果是执行代码。</span><span class="sxs-lookup"><span data-stu-id="de3e2-214">The result of the trigger is the execution of code.</span></span> <span data-ttu-id="de3e2-215">尽管无服务器平台各不相同，但大多数平台都提供对预定义 API 和绑定的访问权限，从而简化诸如写入数据库或排队结果之类的任务。</span><span class="sxs-lookup"><span data-stu-id="de3e2-215">Although serverless platforms vary, most provide access to pre-defined APIs and bindings to streamline tasks such as writing to a database or queueing results.</span></span>

<span data-ttu-id="de3e2-216">无服务器是非常依赖于提取抽象主机环境以专注于代码的体系结构。</span><span class="sxs-lookup"><span data-stu-id="de3e2-216">Serverless is an architecture that relies heavily on abstracting away the host environment to focus on code.</span></span> <span data-ttu-id="de3e2-217">可以将其视为较小服务器  。</span><span class="sxs-lookup"><span data-stu-id="de3e2-217">It can be thought of as *less server*.</span></span>

<span data-ttu-id="de3e2-218">容器解决方案为开发人员提供现有的生成脚本，从而将代码发布到无服务器就绪的映像中。</span><span class="sxs-lookup"><span data-stu-id="de3e2-218">Container solutions provide developers existing build scripts to publish code to serverless-ready images.</span></span> <span data-ttu-id="de3e2-219">其他实现可使用现有 PaaS 解决方案提供可缩放的体系结构。</span><span class="sxs-lookup"><span data-stu-id="de3e2-219">Other implementations use existing PaaS solutions to provide a scalable architecture.</span></span>

<span data-ttu-id="de3e2-220">抽象意味着 DevOps 团队无需配置或管理服务器，也无需特定容器。</span><span class="sxs-lookup"><span data-stu-id="de3e2-220">The abstraction means the DevOps team doesn't have to provision or manage servers, nor specific containers.</span></span> <span data-ttu-id="de3e2-221">无服务器平台将代码托管为脚本或使用相关 SDK 生成的已打包可执行文件，并为代码缩放分配必要的资源。</span><span class="sxs-lookup"><span data-stu-id="de3e2-221">The serverless platform hosts code, either as script or packaged executables built with a related SDK, and allocates the necessary resources for the code to scale.</span></span>

<span data-ttu-id="de3e2-222">下图演示了四个无服务器组件。</span><span class="sxs-lookup"><span data-stu-id="de3e2-222">The following illustration diagrams four serverless components.</span></span> <span data-ttu-id="de3e2-223">HTTP 请求引发 Checkout API 代码运行。</span><span class="sxs-lookup"><span data-stu-id="de3e2-223">An HTTP request causes the Checkout API code to run.</span></span> <span data-ttu-id="de3e2-224">Checkout API 将代码插入数据库，并且插入操作会触发其他几个函数运行，从而可执行诸如计算任务和履行订单之类的任务。</span><span class="sxs-lookup"><span data-stu-id="de3e2-224">The Checkout API inserts code into a database, and the insert triggers several other functions to run to perform tasks like computing tasks and fulfilling the order.</span></span>

![无服务器实现](./media/serverless-implementation.png)

<span data-ttu-id="de3e2-226">无服务器的优点包括：</span><span class="sxs-lookup"><span data-stu-id="de3e2-226">The advantages of serverless include:</span></span>

- <span data-ttu-id="de3e2-227">**高密度。**</span><span class="sxs-lookup"><span data-stu-id="de3e2-227">**High density.**</span></span> <span data-ttu-id="de3e2-228">与容器或虚拟机相比，相同无服务器代码的许多实例可以在同一主机上运行。</span><span class="sxs-lookup"><span data-stu-id="de3e2-228">Many instances of the same serverless code can run on the same host compared to containers or virtual machines.</span></span> <span data-ttu-id="de3e2-229">跨多个主机缩放的实例可横向扩展并具有复原能力。</span><span class="sxs-lookup"><span data-stu-id="de3e2-229">The instances scale across multiple hosts scale out and resiliency.</span></span>
- <span data-ttu-id="de3e2-230">**微计费。**</span><span class="sxs-lookup"><span data-stu-id="de3e2-230">**Micro-billing.**</span></span> <span data-ttu-id="de3e2-231">大多数无服务器提供程序都基于无服务器执行来计费，因而在某些情况下可以节省大量成本。</span><span class="sxs-lookup"><span data-stu-id="de3e2-231">Most serverless providers bill based on serverless executions, enabling massive cost savings in certain scenarios.</span></span>
- <span data-ttu-id="de3e2-232">**即时缩放。**</span><span class="sxs-lookup"><span data-stu-id="de3e2-232">**Instant scale.**</span></span> <span data-ttu-id="de3e2-233">无服务器可以缩放以自动快速地匹配工作负载。</span><span class="sxs-lookup"><span data-stu-id="de3e2-233">Serverless can scale to match workloads automatically and quickly.</span></span>
- <span data-ttu-id="de3e2-234">**上市时间加快。**</span><span class="sxs-lookup"><span data-stu-id="de3e2-234">**Faster time to market.**</span></span> <span data-ttu-id="de3e2-235">开发人员专注于代码并直接部署到无服务器平台。</span><span class="sxs-lookup"><span data-stu-id="de3e2-235">Developers focus on code and deploy directly to the serverless platform.</span></span> <span data-ttu-id="de3e2-236">组件可以相互独立发布。</span><span class="sxs-lookup"><span data-stu-id="de3e2-236">Components can be released independently of each other.</span></span>

<span data-ttu-id="de3e2-237">无服务器是最经常在计算上下文中讨论的内容，但也可以应用于数据。</span><span class="sxs-lookup"><span data-stu-id="de3e2-237">Serverless is most often discussed in the context of compute, but can also apply to data.</span></span> <span data-ttu-id="de3e2-238">例如，[Azure SQL](https://docs.microsoft.com/azure/sql-database) 和 [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db) 都提供不需要配置主机或群集的云数据库。</span><span class="sxs-lookup"><span data-stu-id="de3e2-238">For example, [Azure SQL](https://docs.microsoft.com/azure/sql-database) and [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db) both provide cloud databases that don't require you to configure host machines or clusters.</span></span> <span data-ttu-id="de3e2-239">本书重点介绍无服务器计算。</span><span class="sxs-lookup"><span data-stu-id="de3e2-239">This book focuses on serverless compute.</span></span>

## <a name="summary"></a><span data-ttu-id="de3e2-240">总结</span><span class="sxs-lookup"><span data-stu-id="de3e2-240">Summary</span></span>

<span data-ttu-id="de3e2-241">体系结构有多种可用选项可选，包括混合使用。</span><span class="sxs-lookup"><span data-stu-id="de3e2-241">There's a broad spectrum of available choices for architecture, including a hybrid approach.</span></span> <span data-ttu-id="de3e2-242">无服务器以控制和可移植性为代价，简化了应用程序功能的方法、管理和成本。</span><span class="sxs-lookup"><span data-stu-id="de3e2-242">Serverless simplifies the approach, management, and cost of application features at the expense of control and portability.</span></span> <span data-ttu-id="de3e2-243">但是，许多无服务器平台的确会公开配置，帮助优化解决方案。</span><span class="sxs-lookup"><span data-stu-id="de3e2-243">However, many serverless platforms do expose configuration to help fine-tune the solution.</span></span> <span data-ttu-id="de3e2-244">好的编程做法还可以产生更易于移植的代码和更少的无服务器平台锁定。</span><span class="sxs-lookup"><span data-stu-id="de3e2-244">Good programming practices can also lead to more portable code and less serverless platform lock-in.</span></span> <span data-ttu-id="de3e2-245">下表说明了各种架构方法。</span><span class="sxs-lookup"><span data-stu-id="de3e2-245">The following table illustrates the architecture approaches side by side.</span></span> <span data-ttu-id="de3e2-246">根据规模需求、是否要管理运行时以及如何将工作负载分解为小组件来选择无服务器。</span><span class="sxs-lookup"><span data-stu-id="de3e2-246">Choose serverless based on your scale needs, whether or not you want to manage the runtime, and how well you can break your workloads into small components.</span></span> <span data-ttu-id="de3e2-247">在下一章中，你将了解无服务器和其他决策点的潜在挑战。</span><span class="sxs-lookup"><span data-stu-id="de3e2-247">You'll learn about potential challenges with serverless and other decision points in the next chapter.</span></span>

|         |<span data-ttu-id="de3e2-248">IaaS</span><span class="sxs-lookup"><span data-stu-id="de3e2-248">IaaS</span></span>     |<span data-ttu-id="de3e2-249">PaaS</span><span class="sxs-lookup"><span data-stu-id="de3e2-249">PaaS</span></span>     |<span data-ttu-id="de3e2-250">容器</span><span class="sxs-lookup"><span data-stu-id="de3e2-250">Container</span></span>|<span data-ttu-id="de3e2-251">无服务器</span><span class="sxs-lookup"><span data-stu-id="de3e2-251">Serverless</span></span>|
|---------|---------|---------|---------|----------|
|<span data-ttu-id="de3e2-252">缩放 </span><span class="sxs-lookup"><span data-stu-id="de3e2-252">**Scale**</span></span>|<span data-ttu-id="de3e2-253">VM</span><span class="sxs-lookup"><span data-stu-id="de3e2-253">VM</span></span>       |<span data-ttu-id="de3e2-254">实例</span><span class="sxs-lookup"><span data-stu-id="de3e2-254">Instance</span></span> |<span data-ttu-id="de3e2-255">应用</span><span class="sxs-lookup"><span data-stu-id="de3e2-255">App</span></span>      |<span data-ttu-id="de3e2-256">函数</span><span class="sxs-lookup"><span data-stu-id="de3e2-256">Function</span></span>  |
|<span data-ttu-id="de3e2-257">**摘要**</span><span class="sxs-lookup"><span data-stu-id="de3e2-257">**Abstracts**</span></span>|<span data-ttu-id="de3e2-258">硬件</span><span class="sxs-lookup"><span data-stu-id="de3e2-258">Hardware</span></span>|<span data-ttu-id="de3e2-259">平台</span><span class="sxs-lookup"><span data-stu-id="de3e2-259">Platform</span></span>|<span data-ttu-id="de3e2-260">OS 主机</span><span class="sxs-lookup"><span data-stu-id="de3e2-260">OS Host</span></span>|<span data-ttu-id="de3e2-261">运行时</span><span class="sxs-lookup"><span data-stu-id="de3e2-261">Runtime</span></span>   |
|<span data-ttu-id="de3e2-262">**单位**</span><span class="sxs-lookup"><span data-stu-id="de3e2-262">**Unit**</span></span> |<span data-ttu-id="de3e2-263">VM</span><span class="sxs-lookup"><span data-stu-id="de3e2-263">VM</span></span>       |<span data-ttu-id="de3e2-264">Project</span><span class="sxs-lookup"><span data-stu-id="de3e2-264">Project</span></span>  |<span data-ttu-id="de3e2-265">Image</span><span class="sxs-lookup"><span data-stu-id="de3e2-265">Image</span></span>    |<span data-ttu-id="de3e2-266">代码</span><span class="sxs-lookup"><span data-stu-id="de3e2-266">Code</span></span>      |
|<span data-ttu-id="de3e2-267">**生存期**</span><span class="sxs-lookup"><span data-stu-id="de3e2-267">**Lifetime**</span></span>|<span data-ttu-id="de3e2-268">数月</span><span class="sxs-lookup"><span data-stu-id="de3e2-268">Months</span></span>|<span data-ttu-id="de3e2-269">数天到数月</span><span class="sxs-lookup"><span data-stu-id="de3e2-269">Days to Months</span></span>|<span data-ttu-id="de3e2-270">数分钟到数天</span><span class="sxs-lookup"><span data-stu-id="de3e2-270">Minutes to Days</span></span>|<span data-ttu-id="de3e2-271">数毫秒到数分钟</span><span class="sxs-lookup"><span data-stu-id="de3e2-271">Milliseconds to Minutes</span></span>|
|<span data-ttu-id="de3e2-272">**责任**</span><span class="sxs-lookup"><span data-stu-id="de3e2-272">**Responsibility**</span></span>|<span data-ttu-id="de3e2-273">应用程序、依赖项、运行时和操作系统</span><span class="sxs-lookup"><span data-stu-id="de3e2-273">Applications, dependencies, runtime, and operating system</span></span>|<span data-ttu-id="de3e2-274">应用程序和依赖项</span><span class="sxs-lookup"><span data-stu-id="de3e2-274">Applications and dependencies</span></span>|<span data-ttu-id="de3e2-275">应用程序、依赖项和运行时</span><span class="sxs-lookup"><span data-stu-id="de3e2-275">Applications, dependencies, and runtime</span></span>|<span data-ttu-id="de3e2-276">函数</span><span class="sxs-lookup"><span data-stu-id="de3e2-276">Function</span></span>

- <span data-ttu-id="de3e2-277">**缩放**是指用于缩放应用程序的单位</span><span class="sxs-lookup"><span data-stu-id="de3e2-277">**Scale** refers to the unit that is used to scale the application</span></span>
- <span data-ttu-id="de3e2-278">**摘要**是指实现所抽象的层</span><span class="sxs-lookup"><span data-stu-id="de3e2-278">**Abstracts** refers to the layer that is abstracted by the implementation</span></span>
- <span data-ttu-id="de3e2-279">**单元**是指所部署内容的范围</span><span class="sxs-lookup"><span data-stu-id="de3e2-279">**Unit** refers to the scope of what is deployed</span></span>
- <span data-ttu-id="de3e2-280">**生存期**是指特定实例的典型运行时</span><span class="sxs-lookup"><span data-stu-id="de3e2-280">**Lifetime** refers to the typical runtime of a specific instance</span></span>
- <span data-ttu-id="de3e2-281">**责任**是指生成、部署和维护应用程序的开销</span><span class="sxs-lookup"><span data-stu-id="de3e2-281">**Responsibility** refers to the overhead to build, deploy, and maintain the application</span></span>

<span data-ttu-id="de3e2-282">下一章将重点介绍无服务器体系结构、用例和设计模式。</span><span class="sxs-lookup"><span data-stu-id="de3e2-282">The next chapter will focus on serverless architecture, use cases, and design patterns.</span></span>

## <a name="recommended-resources"></a><span data-ttu-id="de3e2-283">推荐的资源</span><span class="sxs-lookup"><span data-stu-id="de3e2-283">Recommended resources</span></span>

- [<span data-ttu-id="de3e2-284">Azure 应用程序体系结构指南</span><span class="sxs-lookup"><span data-stu-id="de3e2-284">Azure application architecture guide</span></span>](https://docs.microsoft.com/azure/architecture/guide/)
- [<span data-ttu-id="de3e2-285">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="de3e2-285">Azure Cosmos DB</span></span>](https://docs.microsoft.com/azure/cosmos-db)
- [<span data-ttu-id="de3e2-286">Azure SQL</span><span class="sxs-lookup"><span data-stu-id="de3e2-286">Azure SQL</span></span>](https://docs.microsoft.com/azure/sql-database)
- [<span data-ttu-id="de3e2-287">N 层体系结构模式</span><span class="sxs-lookup"><span data-stu-id="de3e2-287">N-Tier architecture pattern</span></span>](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier)
- [<span data-ttu-id="de3e2-288">Azure 上的 Kubernetes</span><span class="sxs-lookup"><span data-stu-id="de3e2-288">Kubernetes on Azure</span></span>](https://docs.microsoft.com/azure/aks/intro-kubernetes)
- [<span data-ttu-id="de3e2-289">微服务</span><span class="sxs-lookup"><span data-stu-id="de3e2-289">Microservices</span></span>](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/microservices)
- [<span data-ttu-id="de3e2-290">虚拟机 N 层参考体系结构</span><span class="sxs-lookup"><span data-stu-id="de3e2-290">Virtual machine N-tier reference architecture</span></span>](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier)
- [<span data-ttu-id="de3e2-291">虚拟机</span><span class="sxs-lookup"><span data-stu-id="de3e2-291">Virtual machines</span></span>](https://docs.microsoft.com/azure/virtual-machines/)
- [<span data-ttu-id="de3e2-292">什么是 Docker？</span><span class="sxs-lookup"><span data-stu-id="de3e2-292">What is Docker?</span></span>](../microservices/container-docker-introduction/docker-defined.md)
- [<span data-ttu-id="de3e2-293">Wingtip Tickets SaaS 应用程序</span><span class="sxs-lookup"><span data-stu-id="de3e2-293">Wingtip Tickets SaaS application</span></span>](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app)

>[!div class="step-by-step"]
><span data-ttu-id="de3e2-294">[上一页](architecture-approaches.md)
>[下一页](serverless-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="de3e2-294">[Previous](architecture-approaches.md)
[Next](serverless-architecture.md)</span></span>
