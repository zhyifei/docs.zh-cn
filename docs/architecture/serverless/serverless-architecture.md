---
title: 无服务器体系结构 - 无服务器应用
description: 探索无服务器体系结构支持的各种体系结构和应用，包括 Web 应用、移动和 IoT。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 838dcd7b41df0d8297e1ae10f9c04a8d5b83b332
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/14/2020
ms.locfileid: "72522403"
---
# <a name="serverless-architecture"></a>无服务器体系结构

有许多使用[无服务器](https://azure.com/serverless)体系结构的方法。 本章介绍了集成无服务器的常见体系结构的示例。 还介绍了在实现无服务器时可能会带来其他挑战或需要额外注意的问题。 最后，提供了多个设计示例，用来演示各种无服务器用例。

无服务器主机通常使用现有的基于容器层或 PaaS 层来管理无服务器实例。 例如，Azure Functions 基于 [Azure 应用服务](https://docs.microsoft.com/azure/app-service/)。 应用服务用于横向扩展实例，并管理执行 Azure Functions 代码的运行时。 对于基于 Windows 的函数，主机作为 PaaS 运行并横向扩展 .NET 运行时。 对于基于 Linux 的函数，主机利用容器。

![Azure Functions 体系结构](./media/azure-functions-architecture.png)

WebJobs Core 为函数提供了执行上下文。 语言运行时运行脚本，执行库并托管目标语言的框架。 例如，Node.js 用于运行 JavaScript 函数，.NET Framework 用于运行 C# 函数。 本章稍后将详细介绍语言和平台选项。

某些项目可能会受益于采用“全面的”无服务器方法。 在很大程度上依赖于微服务的应用程序可以使用无服务器技术实现所有微服务。 大多数应用是混合的，它们遵循 N 层设计并对有用的组件使用无服务器，因为这些组件是模块化且可单独缩放的。 为了帮助理解这些方案，本部分介绍使用无服务器的一些常见体系结构示例。

## <a name="full-serverless-back-end"></a>完整的无服务器后端

完整的无服务器后端适用于多种类型的方案，尤其是在生成新的或“绿色字段”应用程序时。 具有大量 API 的应用程序可能会受益于将每个 API 作为无服务器函数实现。 基于微服务体系结构的应用是可以作为完整的无服务器后端实现的另一个示例。 微服务通过各种协议相互通信。 特定方案包括：

- 基于 API 的 SaaS 产品（示例：财务支付处理器）。
- 消息驱动的应用程序（示例：设备监视解决方案）。
- 专注于服务之间集成的应用（示例：航空公司预订应用程序）。
- 定期运行的进程（示例：基于计时器的数据库清理）。
- 专注于数据转换的应用（示例：由文件上传触发的导入）。
- 提取、转换和加载 (ETL) 过程。

本文档稍后会介绍其他更具体的用例。

## <a name="monoliths-and-starving-the-beast"></a>整体应用程序和“耗尽”

常见挑战是将现有的整体式应用程序迁移到云。 风险最小的方法是完全“直接迁移”到虚拟机。 许多商店更倾向于使用迁移来实现其基本代码的现代化。 迁移的实用方法称为“耗尽”。 在此方案中，整体应用程序将“按原样”迁移以开始。 然后，实现所选服务的现代化。 在某些情况下，服务的签名与原始签名相同：它只是作为函数托管。 将更新客户端以使用新服务，而不是使用整体应用程序终结点。 在此期间，数据库复制等步骤能够使微服务托管其自己的存储，即使事务仍由整体应用程序处理也是如此。 最终，所有客户端都将迁移到新服务。 所有功能都已替换之前，整体应用程序都“非常匮乏”（不再调用其服务）。 无服务器和代理的组合有助于实现这种迁移。

![无服务器整体应用程序迁移](./media/serverless-monolith-migration.png)

若要了解有关此方法的详细信息，请观看视频：[利用无服务器 Azure Functions 将你的应用引入云](https://channel9.msdn.com/Events/Connect/2017/E102)。

## <a name="web-apps"></a>Web 应用

Web 应用非常适合无服务器应用程序。 目前有两种常见的 Web 应用方法：服务器驱动的方法和客户端驱动的方法（例如，单页面应用程序或 SPA）。 服务器驱动的 Web 应用通常使用中间件层发出 API 调用以呈现 Web UI。 SPA 应用程序直接从浏览器进行 REST API 调用。 在这两个方案中，无服务器可以通过提供必要的业务逻辑来容纳中间件或 REST API 请求。 常见的体系结构是建立轻型静态 Web 服务器。 单页应用程序 (SPA) 提供 HTML、CSS、JavaScript 和其他浏览器资产。 然后，Web 应用连接到微服务后端。

## <a name="mobile-back-ends"></a>移动后端

无服务器应用的事件驱动模式使其成为移动后端的理想选择。 移动设备会触发事件，并执行无服务器代码来满足请求。 利用无服务器模型，开发人员无需部署完整的应用程序更新即可增强业务逻辑。 无服务器方法还允许团队共享终结点和并行工作。

移动开发人员无需成为服务器端专家，就可以生成业务逻辑。 传统上，移动应用连接到本地服务。 构建需要了解服务器平台和编程范例的服务层。 开发人员通过操作来预配服务器并进行相应的配置。 生成部署管道有时会花费数天甚至数周的时间。 所有这些挑战均由无服务器解决。

无服务器抽象化服务器端依赖关系，使开发人员可以专注于业务逻辑。 例如，使用 JavaScript 框架生成应用的移动开发人员也可以使用 JavaScript 生成无服务器函数。 无服务器主机管理操作系统、Node.js 实例以托管代码、包依赖项等。 为开发人员提供了一组简单的输入和输出的标准模板。 然后，他们可以专注于生成和测试业务逻辑。 因此，他们可以使用现有技能来生成移动应用的后端逻辑，而无需了解新平台或成为“服务器端开发人员”。

![无服务器移动后端](./media/serverless-mobile-backend.png)

大多数云提供商提供基于移动的无服务器产品，用来简化整个移动开发生命周期。 这些产品可能会自动预配数据库以保存数据、处理 DevOps 问题、提供基于云的生成和测试框架，以及使用开发人员的首选语言编写业务流程脚本的功能。 使用以移动为中心的无服务器方法可以简化该过程。 无服务器省去了为移动后端预配、配置和维护服务器的巨大开销。

## <a name="internet-of-things-iot"></a>物联网 (IoT)

IoT 是指相互联网的物理对象。 它们有时称为“连接的设备”或“智能设备”。 来自汽车和自动贩卖机的所有设备可能相互连接，并发送范围从库存到传感器数据（如温度和湿度）的信息。 在企业中，IoT 通过监视和自动化提供业务流程改进。 IoT 数据可用于在大型仓库中控制气候，或通过供应链跟踪清单。 当检测到冒烟时，IoT 可以检测到化学品泄漏并致电消防部门。

大量设备和信息通常要求事件驱动的体系结构路由和处理消息。 无服务器是一种理想的解决方案，原因如下：

- 随着设备和数据量的增加而启用缩放。
- 适用于添加新终结点以支持新设备和传感器。
- 有助于单独进行版本控制，以便开发人员无需部署整个系统即可更新特定设备的业务逻辑。
- 复原能力和更少的停机时间。

IoT 的普及率相导致出现了几个无服务器产品，它们侧重于 IoT 问题，例如 [Azure IoT 中心](https://docs.microsoft.com/azure/iot-hub)。 无服务器可自动执行任务，例如设备注册、策略强制执行、跟踪，甚至在边缘将代码部署到设备  。 边缘是指连接到的设备（如传感器和传动器），而不是 Internet 的活动部分。

>[!div class="step-by-step"]
>[上一页](architecture-approaches.md)
>[下一页](serverless-architecture-considerations.md)
