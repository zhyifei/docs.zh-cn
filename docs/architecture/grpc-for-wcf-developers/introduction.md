---
title: GRPC for WCF 开发人员
description: 简介
ms.date: 09/02/2019
ms.openlocfilehash: 2f36d6294e2c76309b051fb3af21157cbfc1087a
ms.sourcegitcommit: 5fb5b6520b06d7f5e6131ec2ad854da302a28f2e
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/03/2019
ms.locfileid: "74711236"
---
# <a name="introduction"></a><span data-ttu-id="9032f-103">简介</span><span class="sxs-lookup"><span data-stu-id="9032f-103">Introduction</span></span>

<span data-ttu-id="9032f-104">帮助计算机相互通信是数字时代的主要 preoccupations 之一。</span><span class="sxs-lookup"><span data-stu-id="9032f-104">Helping machines communicate with each other has been one of the primary preoccupations of the digital age.</span></span> <span data-ttu-id="9032f-105">特别是，我们正在努力确定适合当前基础结构的互操作性要求的最佳远程通信机制。</span><span class="sxs-lookup"><span data-stu-id="9032f-105">In particular, there's an ongoing effort to determine the optimal remote communication mechanism that will suit the interoperability demands of the current infrastructure.</span></span> <span data-ttu-id="9032f-106">正如您所想象的那样，该机制随着需求或基础结构的演变而变化。</span><span class="sxs-lookup"><span data-stu-id="9032f-106">As you can imagine, that mechanism changes as either the demands or the infrastructure evolves.</span></span>

<span data-ttu-id="9032f-107">.NET Core 3.0 的发布标记了 Microsoft 向要跨一系列平台提供服务的开发人员提供远程通信解决方案的方式。</span><span class="sxs-lookup"><span data-stu-id="9032f-107">The release of .NET Core 3.0 marks a shift in the way that Microsoft delivers remote communication solutions to developers who want to deliver services across a range of platforms.</span></span> <span data-ttu-id="9032f-108">.NET Core 不提供 Windows Communication Foundation （WCF），但随着 ASP.NET Core 3.0 的发布，它提供内置的 gRPC 功能。</span><span class="sxs-lookup"><span data-stu-id="9032f-108">.NET Core doesn't offer Windows Communication Foundation (WCF) out of the box but, with the release of ASP.NET Core 3.0, it does provide built-in gRPC functionality.</span></span>

<span data-ttu-id="9032f-109">gRPC 是更广泛的软件社区中的常用框架。</span><span class="sxs-lookup"><span data-stu-id="9032f-109">gRPC is a popular framework in the wider software community.</span></span> <span data-ttu-id="9032f-110">对于新式 RPC 方案，开发人员可跨多种编程语言使用该应用程序。</span><span class="sxs-lookup"><span data-stu-id="9032f-110">It's used by developers across many programming languages for modern RPC scenarios.</span></span> <span data-ttu-id="9032f-111">社区和生态系统的工作非常鲜明。</span><span class="sxs-lookup"><span data-stu-id="9032f-111">The community and the ecosystem are vibrant and active.</span></span> <span data-ttu-id="9032f-112">已将对 gRPC 协议的支持添加到基础结构组件（如 Kubernetes、服务网格、负载均衡器等）。</span><span class="sxs-lookup"><span data-stu-id="9032f-112">Support for the gRPC protocol is being added to infrastructure components like Kubernetes, service meshes, load balancers, and more.</span></span> <span data-ttu-id="9032f-113">这些因素以及性能、效率和跨平台兼容性使 gRPC 成为新应用程序和 WCF 应用程序的自然选择。</span><span class="sxs-lookup"><span data-stu-id="9032f-113">These factors, together with its performance, efficiency, and cross-platform compatibility, make gRPC a natural choice for new apps and WCF apps moving to .NET Core.</span></span>

## <a name="history"></a><span data-ttu-id="9032f-114">历史记录</span><span class="sxs-lookup"><span data-stu-id="9032f-114">History</span></span>

<span data-ttu-id="9032f-115">计算机网络的基本原则是除了一组相互交换数据的计算机，还不能实现一组相关的任务。</span><span class="sxs-lookup"><span data-stu-id="9032f-115">The fundamental principle of a computer network as nothing more than a group of computers exchanging data with each other to achieve a set of interrelated tasks hasn't changed since its inception.</span></span> <span data-ttu-id="9032f-116">但复杂性、规模和期望已呈指数级增长。</span><span class="sxs-lookup"><span data-stu-id="9032f-116">But the complexity, scale, and expectations have grown exponentially.</span></span>  

<span data-ttu-id="9032f-117">在二十世纪九十年代，重点在于改进使用相同语言和平台的内部网络。</span><span class="sxs-lookup"><span data-stu-id="9032f-117">During the 1990s, the emphasis was mainly on improving internal networks that used the same language and platforms.</span></span> <span data-ttu-id="9032f-118">对于这种类型的通信，TCP/IP 成为金牌标准。</span><span class="sxs-lookup"><span data-stu-id="9032f-118">TCP/IP became the gold standard for this type of communication.</span></span>

<span data-ttu-id="9032f-119">重点介绍了如何通过提升与语言无关的方法来优化多个平台之间的通信。</span><span class="sxs-lookup"><span data-stu-id="9032f-119">The focus soon shifted to how best to optimize communication across multiple platforms by promoting a language-agnostic approach.</span></span> <span data-ttu-id="9032f-120">面向服务的体系结构（SOA）提供了一个结构，用于松散耦合可提供给应用程序的广泛的服务集合。</span><span class="sxs-lookup"><span data-stu-id="9032f-120">Service-oriented architecture (SOA) provided a structure for loosely coupling a broad collection of services that could be provided to an application.</span></span>

<span data-ttu-id="9032f-121">如果所有主要平台都可以访问 internet，但仍无法相互交互，则会出现*web 服务*的开发。</span><span class="sxs-lookup"><span data-stu-id="9032f-121">The development of *web services* occurred when all major platforms could access the internet, but they still couldn’t interact with each other.</span></span> <span data-ttu-id="9032f-122">Web 服务具有开放的标准和协议，其中包括：</span><span class="sxs-lookup"><span data-stu-id="9032f-122">Web services have open standards and protocols, including:</span></span>

- <span data-ttu-id="9032f-123">XML 来标记和代码数据。</span><span class="sxs-lookup"><span data-stu-id="9032f-123">XML to tag and code data.</span></span>
- <span data-ttu-id="9032f-124">用于传输数据的简单对象访问协议（SOAP）。</span><span class="sxs-lookup"><span data-stu-id="9032f-124">Simple Object Access Protocol (SOAP) to transfer data.</span></span>
- <span data-ttu-id="9032f-125">用于描述 web 服务并将其连接到客户端应用程序的 web 服务定义语言（WSDL）。</span><span class="sxs-lookup"><span data-stu-id="9032f-125">Web Services Definition Language (WSDL) to describe and connect web services to client applications.</span></span>
- <span data-ttu-id="9032f-126">通用描述、发现和集成（UDDI），使 web 服务可由其他服务发现。</span><span class="sxs-lookup"><span data-stu-id="9032f-126">Universal Description, Discovery, and Integration (UDDI) to make web services discoverable by other services.</span></span>

<span data-ttu-id="9032f-127">SOAP 定义了应用程序的分布式元素可以彼此通信的规则，即使它们位于不同的平台上。</span><span class="sxs-lookup"><span data-stu-id="9032f-127">SOAP defines the rules by which distributed elements of an application can communicate with each other, even if they're on different platforms.</span></span> <span data-ttu-id="9032f-128">SOAP 是基于 XML 的，因此是可读的。</span><span class="sxs-lookup"><span data-stu-id="9032f-128">SOAP is based on XML, so it's human-readable.</span></span> <span data-ttu-id="9032f-129">使 SOAP 易于理解的牺牲是大小;SOAP 消息比可比较协议中的消息要大。</span><span class="sxs-lookup"><span data-stu-id="9032f-129">The sacrifice for making SOAP easily understood is size; SOAP messages are larger than messages in comparable protocols.</span></span> <span data-ttu-id="9032f-130">SOAP 旨在将单个应用程序分解成 multicomponent 的形式，而不会丢失安全性或控制。</span><span class="sxs-lookup"><span data-stu-id="9032f-130">SOAP was designed to break monolithic applications into multicomponent form without losing security or control.</span></span> <span data-ttu-id="9032f-131">因此，WCF 设计为与该类型的系统一起使用，这不同于 gRPC，后者始于一种分布式系统。</span><span class="sxs-lookup"><span data-stu-id="9032f-131">So WCF was designed to work with that kind of system, unlike gRPC, which began as a distributed system.</span></span> <span data-ttu-id="9032f-132">WCF 通过开发和记录 SOAP stack 的专有扩展协议来解决其中一些限制，但代价是从其他平台缺少支持。</span><span class="sxs-lookup"><span data-stu-id="9032f-132">WCF addressed some of these limitations by developing and documenting proprietary extension protocols for the SOAP stack, but at the cost of a lack of support from other platforms.</span></span>

<span data-ttu-id="9032f-133">Windows Communication Foundation 是用于生成服务的框架。</span><span class="sxs-lookup"><span data-stu-id="9032f-133">Windows Communication Foundation is a framework for building services.</span></span> <span data-ttu-id="9032f-134">它是在早期2000s 中设计的，旨在帮助开发人员使用早期 SOA 来管理使用 SOAP 的复杂性。</span><span class="sxs-lookup"><span data-stu-id="9032f-134">It was designed in the early 2000s to help developers using early SOA to manage the complexities of working with SOAP.</span></span> <span data-ttu-id="9032f-135">尽管它不再要求开发人员编写自己的 SOAP 协议，但 WCF 仍使用 SOAP 来实现与其他系统的互操作性。</span><span class="sxs-lookup"><span data-stu-id="9032f-135">Although it removes the requirement for the developers to write their own SOAP protocols, WCF still uses SOAP to enable interoperability with other systems.</span></span> <span data-ttu-id="9032f-136">WCF 还旨在提供跨多个协议的解决方案（HTTP/1.1、Net.tcp 等）。</span><span class="sxs-lookup"><span data-stu-id="9032f-136">WCF was also designed to deliver solutions across multiple protocols (HTTP/1.1, Net.TCP, and so on).</span></span>

## <a name="microservices"></a><span data-ttu-id="9032f-137">微服务</span><span class="sxs-lookup"><span data-stu-id="9032f-137">Microservices</span></span>

<span data-ttu-id="9032f-138">在微服务体系结构中，大型应用程序构建为较小的模块化服务的集合。</span><span class="sxs-lookup"><span data-stu-id="9032f-138">In microservice architectures, large applications are built as a collection of smaller modular services.</span></span> <span data-ttu-id="9032f-139">每个组件都执行特定的任务或过程，组件专门用于 interoperably，但可以根据需要进行隔离。</span><span class="sxs-lookup"><span data-stu-id="9032f-139">Each component does a specific task or process, and components are designed to work interoperably but can be isolated as necessary.</span></span>

<span data-ttu-id="9032f-140">微服务的优点包括：</span><span class="sxs-lookup"><span data-stu-id="9032f-140">Advantages to microservices include:</span></span>

- <span data-ttu-id="9032f-141">更改和升级可单独处理。</span><span class="sxs-lookup"><span data-stu-id="9032f-141">Changes and upgrades can be handled independently.</span></span>
- <span data-ttu-id="9032f-142">错误处理变得更高效，因为这些问题可能会对特定服务进行跟踪，而这些服务将被隔离、重新生成、测试并独立于其他服务重新部署。</span><span class="sxs-lookup"><span data-stu-id="9032f-142">Error handling becomes more efficient because problems can be traced to specific services that are then isolated, rebuilt, tested, and redeployed independently of the other services.</span></span>
- <span data-ttu-id="9032f-143">可伸缩性可以局限于特定实例或服务，而不是整个应用程序。</span><span class="sxs-lookup"><span data-stu-id="9032f-143">Scalability can be confined to specific instances or services rather than the whole application.</span></span>
- <span data-ttu-id="9032f-144">开发可能跨多个团队发生，而不是在多个团队处理单个代码库时进行。</span><span class="sxs-lookup"><span data-stu-id="9032f-144">Development can happen across multiple teams, with less friction than occurs when many teams work on a single codebase.</span></span>

<span data-ttu-id="9032f-145">提高虚拟化、云计算、容器和物联网的发展会使微服务的不断上升。</span><span class="sxs-lookup"><span data-stu-id="9032f-145">The move towards increasing virtualization, cloud computing, containers, and the Internet of Things has contributed to the ongoing rise of microservices.</span></span> <span data-ttu-id="9032f-146">但微服务不会遇到问题。</span><span class="sxs-lookup"><span data-stu-id="9032f-146">But microservices aren't without their challenges.</span></span> <span data-ttu-id="9032f-147">分散/分散的基础结构更侧重于在服务之间进行通信时对简易性和速度的需求。</span><span class="sxs-lookup"><span data-stu-id="9032f-147">The fragmented/decentralized infrastructure put more emphasis on the need for simplicity and speed when communicating between services.</span></span> <span data-ttu-id="9032f-148">这进而会注意到 SOAP 的有时费力和 contorted 的特性。</span><span class="sxs-lookup"><span data-stu-id="9032f-148">This in turn drew attention to the sometimes laborious and contorted nature of SOAP.</span></span>

<span data-ttu-id="9032f-149">在此环境中，gRPC 已启动，Microsoft 首次发布 WCF 后10年。</span><span class="sxs-lookup"><span data-stu-id="9032f-149">It was into this environment that gRPC was launched, 10 years after Microsoft first released WCF.</span></span> <span data-ttu-id="9032f-150">直接从 Google 的内部基础结构 RPC （Stubby）演变而来，gRPC 从不基于相同的标准和协议，这些协议已经通知了许多早期 Rpc 的参数。</span><span class="sxs-lookup"><span data-stu-id="9032f-150">Evolved directly from Google’s internal infrastructure RPC (Stubby), gRPC was never based on the same standards and protocols that had informed the parameters of many earlier RPCs.</span></span> <span data-ttu-id="9032f-151">和 gRPC 仅基于 HTTP/2。</span><span class="sxs-lookup"><span data-stu-id="9032f-151">And gRPC was only ever based on HTTP/2.</span></span> <span data-ttu-id="9032f-152">这就是它可以在高级传输协议提供的新功能上进行绘制的原因。</span><span class="sxs-lookup"><span data-stu-id="9032f-152">That's why it could draw on the new capabilities that advanced transport protocol provided.</span></span> <span data-ttu-id="9032f-153">特别是双向流式处理、二进制消息传递和多路复用。</span><span class="sxs-lookup"><span data-stu-id="9032f-153">In particular, bidirectional streaming, binary messaging, and multiplexing.</span></span>

## <a name="about-this-guide"></a><span data-ttu-id="9032f-154">关于本指南</span><span class="sxs-lookup"><span data-stu-id="9032f-154">About this guide</span></span>

<span data-ttu-id="9032f-155">本指南涵盖了 gRPC 的主要功能。</span><span class="sxs-lookup"><span data-stu-id="9032f-155">This guide covers the key features of gRPC.</span></span> <span data-ttu-id="9032f-156">早期章节大致了解 WCF 的主要功能，并将它们与 gRPC 的主要功能进行比较。</span><span class="sxs-lookup"><span data-stu-id="9032f-156">The early chapters take a high-level look at the main features of WCF and compare them to those of gRPC.</span></span> <span data-ttu-id="9032f-157">它确定 WCF 与 gRPC 之间的直接相关性，以及 gRPC 提供优点的位置。</span><span class="sxs-lookup"><span data-stu-id="9032f-157">It identifies where there are direct correlations between WCF and gRPC and also where gRPC offers an advantage.</span></span> <span data-ttu-id="9032f-158">如果 WCF 与 gRPC 之间没有关联，或 gRPC 无法为 WCF 提供等效的解决方案，本指南将建议解决方法或在何处获取详细信息。</span><span class="sxs-lookup"><span data-stu-id="9032f-158">When there's no correlation between WCF and gRPC, or when gRPC isn't able to offer an equivalent solution to WCF, this guide will suggest workarounds or where to go for more information.</span></span>

<span data-ttu-id="9032f-159">通过使用一组示例 WCF 应用程序，第5章深入探讨了如何将 WCF 服务（简单的请求-答复、单向和流式处理）的主要类型转换为 gRPC 中的等效项。</span><span class="sxs-lookup"><span data-stu-id="9032f-159">Using a set of sample WCF applications, Chapter 5 is a deep-dive look at converting the main types of WCF service (simple request-reply, one-way, and streaming) to their equivalents in gRPC.</span></span>

<span data-ttu-id="9032f-160">本书的最后一部分介绍如何在实践中充分利用 gRPC。</span><span class="sxs-lookup"><span data-stu-id="9032f-160">The final section of the book looks at how to get the best from gRPC in practice.</span></span> <span data-ttu-id="9032f-161">本部分包含有关使用其他工具（如 Docker 容器或 Kubernetes）的信息，以便充分利用 gRPC 的效率。</span><span class="sxs-lookup"><span data-stu-id="9032f-161">This section includes information on using additional tools, like Docker containers or Kubernetes, to take advantage of the efficiency of gRPC.</span></span> <span data-ttu-id="9032f-162">它还详细介绍了如何监视日志记录、指标和分布式跟踪。</span><span class="sxs-lookup"><span data-stu-id="9032f-162">It also includes a detailed look at monitoring with logging, metrics, and distributed tracing.</span></span>

## <a name="who-this-guide-is-for"></a><span data-ttu-id="9032f-163">本指南适用对象</span><span class="sxs-lookup"><span data-stu-id="9032f-163">Who this guide is for</span></span>

<span data-ttu-id="9032f-164">本指南专为在使用 WCF 的 .NET Framework 或 .NET Core 开发人员编写，并正在寻求将其应用程序迁移到 .NET Core 3.0 及更高版本的新式 RPC 环境。</span><span class="sxs-lookup"><span data-stu-id="9032f-164">This guide was written for developers working in .NET Framework or .NET Core who have used WCF and who are seeking to migrate their applications to a modern RPC environment for .NET Core 3.0 and later versions.</span></span> <span data-ttu-id="9032f-165">本指南还可能更适用于开发人员升级或考虑升级到 .NET Core 3.0 以及要使用内置 gRPC 工具的用户。</span><span class="sxs-lookup"><span data-stu-id="9032f-165">The guide might also be useful more generally for developers upgrading or considering upgrading to .NET Core 3.0 and who want to use the built-in gRPC tools.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="9032f-166">[上一页](index.md)
>[下一页](grpc-overview.md)</span><span class="sxs-lookup"><span data-stu-id="9032f-166">[Previous](index.md)
[Next](grpc-overview.md)</span></span>
