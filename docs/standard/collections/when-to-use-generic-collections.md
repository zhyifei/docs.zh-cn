---
title: 何时使用泛型集合
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- collections [.NET Framework], generic
- generic collections [.NET Framework]
ms.assetid: e7b868b1-11fe-4ac5-bed3-de68aca47739
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 9831212cf65e3913bae2431e4746b5def03430b6
ms.sourcegitcommit: ad99773e5e45068ce03b99518008397e1299e0d1
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/23/2018
ms.locfileid: "46703671"
---
# <a name="when-to-use-generic-collections"></a><span data-ttu-id="138be-102">何时使用泛型集合</span><span class="sxs-lookup"><span data-stu-id="138be-102">When to Use Generic Collections</span></span>
<span data-ttu-id="138be-103">通常建议使用泛型集合，因为这样你可以获得类型安全的直接优点而无需从基集合类型派生和实现特定类型的成员。</span><span class="sxs-lookup"><span data-stu-id="138be-103">Using generic collections is generally recommended, because you gain the immediate benefit of type safety without having to derive from a base collection type and implement type-specific members.</span></span> <span data-ttu-id="138be-104">当集合元素为值类型时，泛型集合类型也通常优于对应的非泛型集合类型（比从非泛型基集合类型派生的类型好），因为使用泛型时不必对元素进行装箱。</span><span class="sxs-lookup"><span data-stu-id="138be-104">Generic collection types also generally perform better than the corresponding nongeneric collection types (and better than types that are derived from nongeneric base collection types) when the collection elements are value types, because with generics there is no need to box the elements.</span></span>  
  
 <span data-ttu-id="138be-105">对于面向 [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] 或更高版本的程序，你应在多个线程可能会同时向集合添加项或从集合中删除项时使用 <xref:System.Collections.Concurrent> 命名空间中的泛型集合。</span><span class="sxs-lookup"><span data-stu-id="138be-105">For programs that target the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] or later, you should use the generic collection classes in the <xref:System.Collections.Concurrent> namespace when multiple threads might be adding or removing items from the collection concurrently.</span></span>  
  
 <span data-ttu-id="138be-106">以下泛型类型对应于现有集合类型：</span><span class="sxs-lookup"><span data-stu-id="138be-106">The following generic types correspond to existing collection types:</span></span>  
  
-   <span data-ttu-id="138be-107"><xref:System.Collections.Generic.List%601> 泛型类对应于 <xref:System.Collections.ArrayList>。</span><span class="sxs-lookup"><span data-stu-id="138be-107"><xref:System.Collections.Generic.List%601> is the generic class that corresponds to <xref:System.Collections.ArrayList>.</span></span>  
  
-   <span data-ttu-id="138be-108"><xref:System.Collections.Generic.Dictionary%602> 和 <xref:System.Collections.Concurrent.ConcurrentDictionary%602> 泛型类对应 <xref:System.Collections.Hashtable>。</span><span class="sxs-lookup"><span data-stu-id="138be-108"><xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Concurrent.ConcurrentDictionary%602> are the generic classes that correspond to <xref:System.Collections.Hashtable>.</span></span>  
  
-   <span data-ttu-id="138be-109"><xref:System.Collections.ObjectModel.Collection%601> 泛型类对应于 <xref:System.Collections.CollectionBase>。</span><span class="sxs-lookup"><span data-stu-id="138be-109"><xref:System.Collections.ObjectModel.Collection%601> is the generic class that corresponds to <xref:System.Collections.CollectionBase>.</span></span> <span data-ttu-id="138be-110"><xref:System.Collections.ObjectModel.Collection%601> 可以用作基类，但是与 <xref:System.Collections.CollectionBase>不同，它不抽象。</span><span class="sxs-lookup"><span data-stu-id="138be-110"><xref:System.Collections.ObjectModel.Collection%601> can be used as a base class, but unlike <xref:System.Collections.CollectionBase>, it is not abstract.</span></span> <span data-ttu-id="138be-111">这使得它更易于使用。</span><span class="sxs-lookup"><span data-stu-id="138be-111">This makes it much easier to use.</span></span>  
  
-   <span data-ttu-id="138be-112"><xref:System.Collections.ObjectModel.ReadOnlyCollection%601> 泛型类对应于 <xref:System.Collections.ReadOnlyCollectionBase>。</span><span class="sxs-lookup"><span data-stu-id="138be-112"><xref:System.Collections.ObjectModel.ReadOnlyCollection%601> is the generic class that corresponds to <xref:System.Collections.ReadOnlyCollectionBase>.</span></span> <span data-ttu-id="138be-113"><xref:System.Collections.ObjectModel.ReadOnlyCollection%601> 不是抽象的并且拥有可以轻松地公开现有的 <xref:System.Collections.Generic.List%601> 为只读集合的构造函数。</span><span class="sxs-lookup"><span data-stu-id="138be-113"><xref:System.Collections.ObjectModel.ReadOnlyCollection%601> is not abstract, and has a constructor that makes it easy to expose an existing <xref:System.Collections.Generic.List%601> as a read-only collection.</span></span>  
  
-   <span data-ttu-id="138be-114"><xref:System.Collections.Generic.Queue%601>、 <xref:System.Collections.Concurrent.ConcurrentQueue%601>、 <xref:System.Collections.Generic.Stack%601>、 <xref:System.Collections.Concurrent.ConcurrentStack%601>和 <xref:System.Collections.Generic.SortedList%602> 泛型类对应有着相应的相同名称的非泛型类。</span><span class="sxs-lookup"><span data-stu-id="138be-114">The <xref:System.Collections.Generic.Queue%601>, <xref:System.Collections.Concurrent.ConcurrentQueue%601>, <xref:System.Collections.Generic.Stack%601>, <xref:System.Collections.Concurrent.ConcurrentStack%601>, and <xref:System.Collections.Generic.SortedList%602> generic classes correspond to the respective nongeneric classes with the same names.</span></span>  
  
## <a name="additional-types"></a><span data-ttu-id="138be-115">其他类型</span><span class="sxs-lookup"><span data-stu-id="138be-115">Additional Types</span></span>  
 <span data-ttu-id="138be-116">几种泛型集合类型没有对应的非泛型集合类型。</span><span class="sxs-lookup"><span data-stu-id="138be-116">Several generic collection types do not have nongeneric counterparts.</span></span> <span data-ttu-id="138be-117">它们包括以下类型：</span><span class="sxs-lookup"><span data-stu-id="138be-117">They include the following:</span></span>  
  
-   <span data-ttu-id="138be-118"><xref:System.Collections.Generic.LinkedList%601> 是一个通用的链接列表，该列表提供 O(1) 插入和删除操作。</span><span class="sxs-lookup"><span data-stu-id="138be-118"><xref:System.Collections.Generic.LinkedList%601> is a general-purpose linked list that provides O(1) insertion and removal operations.</span></span>  
  
-   <span data-ttu-id="138be-119"><xref:System.Collections.Generic.SortedDictionary%602> 是一个有 O(log `n`) 插入和检索操作的已排序字典，这使它有效代替了 <xref:System.Collections.Generic.SortedList%602>。</span><span class="sxs-lookup"><span data-stu-id="138be-119"><xref:System.Collections.Generic.SortedDictionary%602> is a sorted dictionary with O(log `n`) insertion and retrieval operations, which makes it a useful alternative to <xref:System.Collections.Generic.SortedList%602>.</span></span>  
  
-   <span data-ttu-id="138be-120"><xref:System.Collections.ObjectModel.KeyedCollection%602> 是列表和字典的结合，它提供了一种方法来存储包含自己的键的对象。</span><span class="sxs-lookup"><span data-stu-id="138be-120"><xref:System.Collections.ObjectModel.KeyedCollection%602> is a hybrid between a list and a dictionary, which provides a way to store objects that contain their own keys.</span></span>  
  
-   <span data-ttu-id="138be-121"><xref:System.Collections.Concurrent.BlockingCollection%601> 通过限制和阻止功能实现集合类。</span><span class="sxs-lookup"><span data-stu-id="138be-121"><xref:System.Collections.Concurrent.BlockingCollection%601> implements a collection class with bounding and blocking functionality.</span></span>  
  
-   <span data-ttu-id="138be-122"><xref:System.Collections.Concurrent.ConcurrentBag%601> 能快速插入和移除未排序元素。</span><span class="sxs-lookup"><span data-stu-id="138be-122"><xref:System.Collections.Concurrent.ConcurrentBag%601> provides fast insertion and removal of unordered elements.</span></span>  
  
## <a name="linq-to-objects"></a><span data-ttu-id="138be-123">LINQ to Objects</span><span class="sxs-lookup"><span data-stu-id="138be-123">LINQ to Objects</span></span>  
 <span data-ttu-id="138be-124">你可以通过 LINQ to Objects 功能使用 LINQ 查询来访问内存中的对象，但条件是该对象类型要实现 <xref:System.Collections.IEnumerable?displayProperty=nameWithType> 或 <xref:System.Collections.Generic.IEnumerable%601?displayProperty=nameWithType> 接口。</span><span class="sxs-lookup"><span data-stu-id="138be-124">The LINQ to Objects feature enables you to use LINQ queries to access in-memory objects as long as the object type implements the <xref:System.Collections.IEnumerable?displayProperty=nameWithType> or <xref:System.Collections.Generic.IEnumerable%601?displayProperty=nameWithType> interface.</span></span> <span data-ttu-id="138be-125">LINQ 查询提供了一种通用的数据访问模式；与标准 `foreach` 循环相比，它通常更加简洁，可读性更高；这种查询可提供筛选、排序和分组功能。</span><span class="sxs-lookup"><span data-stu-id="138be-125">LINQ queries provide a common pattern for accessing data; are typically more concise and readable than standard `foreach` loops; and provide filtering, ordering and grouping capabilities.</span></span> <span data-ttu-id="138be-126">LINQ 查询还可提高性能。</span><span class="sxs-lookup"><span data-stu-id="138be-126">LINQ queries can also improve performance.</span></span> <span data-ttu-id="138be-127">有关详细信息，请参阅 [LINQ to Objects](https://msdn.microsoft.com/library/73cafe73-37cf-46e7-bfa7-97c7eea7ced9) 和 [Parallel LINQ (PLINQ)](../../../docs/standard/parallel-programming/parallel-linq-plinq.md)。</span><span class="sxs-lookup"><span data-stu-id="138be-127">For more information, see [LINQ to Objects](https://msdn.microsoft.com/library/73cafe73-37cf-46e7-bfa7-97c7eea7ced9) and [Parallel LINQ (PLINQ)](../../../docs/standard/parallel-programming/parallel-linq-plinq.md).</span></span>  
  
## <a name="additional-functionality"></a><span data-ttu-id="138be-128">其他功能</span><span class="sxs-lookup"><span data-stu-id="138be-128">Additional Functionality</span></span>  
 <span data-ttu-id="138be-129">一些泛型类型具有非泛型集合类型中找不到的功能。</span><span class="sxs-lookup"><span data-stu-id="138be-129">Some of the generic types have functionality that is not found in the nongeneric collection types.</span></span> <span data-ttu-id="138be-130">比如与非泛型 <xref:System.Collections.Generic.List%601> 类相对的 <xref:System.Collections.ArrayList> 类有大量接受泛型委托的方法，例如允许你指定搜索列表的方法的 <xref:System.Predicate%601> 委托、代表对列表中每个元素发挥作用的 <xref:System.Action%601> 委托和在类型间定义对话的 <xref:System.Converter%602> 委托。</span><span class="sxs-lookup"><span data-stu-id="138be-130">For example, the <xref:System.Collections.Generic.List%601> class, which corresponds to the nongeneric <xref:System.Collections.ArrayList> class, has a number of methods that accept generic delegates, such as the <xref:System.Predicate%601> delegate that allows you to specify methods for searching the list, the <xref:System.Action%601> delegate that represents methods that act on each element of the list, and the <xref:System.Converter%602> delegate that lets you define conversions between types.</span></span>  
  
 <span data-ttu-id="138be-131"><xref:System.Collections.Generic.List%601> 类使你可以指定你自己的用于排序和搜索列表的 <xref:System.Collections.Generic.IComparer%601> 泛型接口实现。</span><span class="sxs-lookup"><span data-stu-id="138be-131">The <xref:System.Collections.Generic.List%601> class allows you to specify your own <xref:System.Collections.Generic.IComparer%601> generic interface implementations for sorting and searching the list.</span></span> <span data-ttu-id="138be-132"><xref:System.Collections.Generic.SortedDictionary%602> 和 <xref:System.Collections.Generic.SortedList%602> 类也有这个功能。</span><span class="sxs-lookup"><span data-stu-id="138be-132">The <xref:System.Collections.Generic.SortedDictionary%602> and <xref:System.Collections.Generic.SortedList%602> classes also have this capability.</span></span> <span data-ttu-id="138be-133">另外，这些类使你可以在创建集合时指定比较器。</span><span class="sxs-lookup"><span data-stu-id="138be-133">In addition, these classes let you specify comparers when the collection is created.</span></span> <span data-ttu-id="138be-134">同样地，<xref:System.Collections.Generic.Dictionary%602> 和 <xref:System.Collections.ObjectModel.KeyedCollection%602> 类让你指定自己的相等比较器。</span><span class="sxs-lookup"><span data-stu-id="138be-134">In similar fashion, the <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.ObjectModel.KeyedCollection%602> classes let you specify your own equality comparers.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="138be-135">请参阅</span><span class="sxs-lookup"><span data-stu-id="138be-135">See also</span></span>

- [<span data-ttu-id="138be-136">集合和数据结构</span><span class="sxs-lookup"><span data-stu-id="138be-136">Collections and Data Structures</span></span>](../../../docs/standard/collections/index.md)  
- [<span data-ttu-id="138be-137">常用的集合类型</span><span class="sxs-lookup"><span data-stu-id="138be-137">Commonly Used Collection Types</span></span>](../../../docs/standard/collections/commonly-used-collection-types.md)  
- [<span data-ttu-id="138be-138">泛型</span><span class="sxs-lookup"><span data-stu-id="138be-138">Generics</span></span>](../../../docs/standard/generics/index.md)
